import{r as S,j as r,_ as ti,c as ft,g as ar}from"./index-CEWwOppT.js";const ni=S.createContext(null),ri=()=>{const e=S.useContext(ni);if(!e)throw new Error("useBackendContext must be used within a BackendProvider (TauriProvider or WebSocketProvider)");return e},cr=S.createContext(null),Nc=({children:e})=>{const{sendMessage:t,subscribe:n,isConnected:i}=ri(),[l,o]=S.useState([]),[s,a]=S.useState(null),[d,u]=S.useState(null),[p,h]=S.useState(!1),[m,c]=S.useState(!1),[x,y]=S.useState(0),[v,w]=S.useState(0),[W,E]=S.useState(!1),[Y,G]=S.useState(0),[k,D]=S.useState(null),[z,P]=S.useState(null),[L,A]=S.useState(null);S.useEffect(()=>{i&&t({type:"get_sessions"})},[i,t]),S.useEffect(()=>{const F=n("sessions_list",_=>o(_.sessions||[])),g=n("session_started",_=>{a(_.session),h(!0)}),Z=n("session_stopped",_=>{h(!1),c(!1),a(null),t({type:"get_sessions"}),_.session&&u(_.session)}),ne=n("session_details",_=>u(_.session)),f=n("chunk_created",_=>{a(U=>!U||U.id!==_.sessionId?U:{...U,chunks:[...U.chunks,_.chunk]}),u(U=>!U||U.id!==_.sessionId?U:{...U,chunks:[...U.chunks,_.chunk]})}),ce=n("chunk_transcribed",_=>{const U=re=>!re||re.id!==_.sessionId?re:{...re,chunks:re.chunks.map(Ue=>Ue.id===_.chunk.id?_.chunk:Ue)};a(re=>U(re)),u(re=>U(re))}),oe=n("audio_level",_=>{y(Math.min(_.micLevel||0,100)),w(Math.min(_.sysLevel||_.systemLevel||0,100))}),te=n("summary_completed",_=>{u(U=>!U||U.id!==_.sessionId?U:{...U,summary:_.summary})}),fe=n("improve_completed",_=>{_.session&&u(_.session)}),de=n("session_renamed",_=>{u(U=>!U||U.id!==_.sessionId?U:{...U,title:_.data}),o(U=>U.map(re=>re.id===_.sessionId?{...re,title:_.data}:re))}),xe=n("session_title_updated",_=>{u(U=>!U||U.id!==_.sessionId?U:{...U,title:_.title}),o(U=>U.map(re=>re.id===_.sessionId?{...re,title:_.title}:re))}),pe=n("session_tags_updated",_=>{u(U=>!U||U.id!==_.sessionId?U:{...U,tags:_.tags}),o(U=>U.map(re=>re.id===_.sessionId?{...re,tags:_.tags}:re))}),Te=n("full_transcription_started",_=>{E(!0),G(0),D("Начало полной транскрипции..."),P(null),A(_.sessionId||null)}),Se=n("full_transcription_progress",_=>{G(_.progress||0),D(_.data||null)}),Be=n("full_transcription_completed",_=>{E(!1),G(1),D(null),P(null),A(null),_.session&&u(_.session)}),De=n("full_transcription_error",_=>{E(!1),G(0),D(null),P(_.error||"Неизвестная ошибка"),A(null)}),He=n("full_transcription_cancelled",()=>{E(!1),G(0),D(null),P(null),A(null)});return()=>{F(),g(),Z(),ne(),f(),ce(),oe(),te(),fe(),de(),xe(),pe(),Te(),Se(),Be(),De(),He()}},[n,t]);const R=async F=>{try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(Z=>Z.stop()),console.log("[SessionContext] Microphone permission granted")}catch(g){console.error("[SessionContext] Microphone permission denied:",g)}t({type:"start_session",...F})},j=()=>{c(!0),t({type:"stop_session"})},I=F=>{t({type:"delete_session",sessionId:F}),d?.id===F&&u(null),o(g=>g.filter(Z=>Z.id!==F))};S.useEffect(()=>n("session_deleted",()=>t({type:"get_sessions"})),[n,t]);const C=F=>{t({type:"get_session",sessionId:F})},B=(F,g,Z,ne)=>{t({type:"generate_summary",sessionId:F,ollamaModel:g,ollamaUrl:Z,ollamaContextSize:ne||8})},V=(F,g,Z)=>{t({type:"improve_transcription",sessionId:F,ollamaModel:g,ollamaUrl:Z})},H=()=>{t({type:"cancel_full_transcription"})};return r.jsx(cr.Provider,{value:{sessions:l,currentSession:s,selectedSession:d,isRecording:p,isStopping:m,micLevel:x,sysLevel:v,isFullTranscribing:W,fullTranscriptionProgress:Y,fullTranscriptionStatus:k,fullTranscriptionError:z,fullTranscriptionSessionId:L,startSession:R,stopSession:j,deleteSession:I,selectSession:C,generateSummary:B,improveTranscription:V,cancelFullTranscription:H,setSelectedSession:u},children:e})},Wc=()=>{const e=S.useContext(cr);if(!e)throw new Error("useSessionContext must be used within a SessionProvider");return e},ii={modelId:"ggml-large-v3-turbo",language:"ru",hybridEnabled:!1,hybridSecondaryModelId:""},li={enabled:!1,apiKeySet:!1,model:"gpt-4o-transcribe",responseFormat:"verbose_json",temperature:0},oi={enabled:!1,apiKeySet:!1,model:"nova-2",punctuate:!0,diarize:!1,smartFormat:!1},si={enabled:!1,apiKeySet:!1,model:"whisper-large-v3"},ai={enabled:!0,url:"http://localhost:11434",model:"llama3.2",contextSize:8},ci={enabled:!1,apiKeySet:!1,model:"gpt-4o-mini",temperature:.7,maxTokens:1e3},ui={enabled:!1,apiKeySet:!1,model:"anthropic/claude-3.5-sonnet",temperature:.7,maxTokens:1e3},xt={local:{id:"local",name:"Локальные модели",description:"Whisper, GigaAM, Parakeet — работает офлайн",isCloud:!1,requiresApiKey:!1},openai:{id:"openai",name:"OpenAI Whisper",description:"Whisper API от OpenAI — высокое качество",isCloud:!0,requiresApiKey:!0,website:"https://openai.com",docsUrl:"https://platform.openai.com/docs/guides/speech-to-text"},deepgram:{id:"deepgram",name:"Deepgram Nova-2",description:"Быстрая транскрибация с диаризацией",isCloud:!0,requiresApiKey:!0,website:"https://deepgram.com",docsUrl:"https://developers.deepgram.com/docs"},assemblyai:{id:"assemblyai",name:"AssemblyAI",description:"Продвинутые функции: главы, сущности",isCloud:!0,requiresApiKey:!0,website:"https://www.assemblyai.com",docsUrl:"https://www.assemblyai.com/docs"},groq:{id:"groq",name:"Groq Whisper",description:"Сверхбыстрая транскрибация на Groq LPU",isCloud:!0,requiresApiKey:!0,website:"https://groq.com",docsUrl:"https://console.groq.com/docs/speech-text"}},hn={ollama:{id:"ollama",name:"Ollama",description:"Локальные LLM — Llama, Qwen, Mistral",isCloud:!1,requiresApiKey:!1,website:"https://ollama.ai",docsUrl:"https://github.com/ollama/ollama/blob/main/docs/api.md"},openai:{id:"openai",name:"OpenAI GPT",description:"GPT-4o, GPT-4o-mini, GPT-4 Turbo",isCloud:!0,requiresApiKey:!0,website:"https://openai.com",docsUrl:"https://platform.openai.com/docs/guides/chat-completions"},openrouter:{id:"openrouter",name:"OpenRouter",description:"Claude, GPT, Llama через единый API",isCloud:!0,requiresApiKey:!0,website:"https://openrouter.ai",docsUrl:"https://openrouter.ai/docs"}},di=[{id:"gpt-4o-transcribe",name:"GPT-4o Transcribe (лучшее качество)"},{id:"gpt-4o-mini-transcribe",name:"GPT-4o Mini Transcribe (быстрая и дешёвая)"},{id:"whisper-1",name:"Whisper v2 Large (классическая)"}],pi=[{id:"nova-2",name:"Nova-2 (рекомендуется)"},{id:"nova",name:"Nova"},{id:"enhanced",name:"Enhanced"},{id:"base",name:"Base"}],hi=[{id:"whisper-large-v3",name:"Whisper Large v3"},{id:"whisper-large-v3-turbo",name:"Whisper Large v3 Turbo (быстрее)"},{id:"distil-whisper-large-v3-en",name:"Distil Whisper Large v3 (только EN)"}],mi=[{id:"gpt-4o",name:"GPT-4o (самый умный)"},{id:"gpt-4o-mini",name:"GPT-4o Mini (быстрый и дешёвый)"},{id:"gpt-4-turbo",name:"GPT-4 Turbo"},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo"}],gi=[{id:"anthropic/claude-3.5-sonnet",name:"Claude 3.5 Sonnet"},{id:"anthropic/claude-3-opus",name:"Claude 3 Opus"},{id:"openai/gpt-4o",name:"GPT-4o"},{id:"openai/gpt-4o-mini",name:"GPT-4o Mini"},{id:"meta-llama/llama-3.1-405b-instruct",name:"Llama 3.1 405B"},{id:"meta-llama/llama-3.1-70b-instruct",name:"Llama 3.1 70B"},{id:"mistralai/mistral-large",name:"Mistral Large"},{id:"google/gemini-pro-1.5",name:"Gemini Pro 1.5"}],ur=()=>"__TAURI__"in window;let se=null;typeof window<"u"&&ur()&&ti(()=>import("./core-DhEqZVGG.js"),[],import.meta.url).then(e=>{se=e.invoke});const fi={activeProvider:"local",local:ii},xi={activeProvider:"ollama",ollama:ai},dr=S.createContext(null),Oc=({children:e})=>{const[t,n]=S.useState(!1),[i,l]=S.useState(!1),[o,s]=S.useState(fi),[a,d]=S.useState(xi),[u,p]=S.useState(null),[h,m]=S.useState(!1),[c,x]=S.useState(null),[y,v]=S.useState(null),w=S.useRef(!1),W=async()=>{if(!ur())return!1;const I=50;let C=0;for(;!se&&C<I;)await new Promise(B=>setTimeout(B,100)),C++;return!!se};S.useEffect(()=>{if(w.current)return;w.current=!0,(async()=>{n(!0),v(null);try{if(!await W()||!se){console.warn("[ProvidersContext] Tauri not available, using defaults"),l(!0),n(!1);return}try{const B=await se("get_stt_providers_settings");B&&(console.log("[ProvidersContext] Loaded STT settings:",B.activeProvider),s(B))}catch(B){console.error("[ProvidersContext] Failed to load STT settings:",B)}try{const B=await se("get_llm_providers_settings");B&&(console.log("[ProvidersContext] Loaded LLM settings:",B.activeProvider),d(B))}catch(B){console.error("[ProvidersContext] Failed to load LLM settings:",B)}try{const B=await se("get_providers_status");B&&p(B)}catch(B){console.error("[ProvidersContext] Failed to load providers status:",B)}l(!0)}catch(C){console.error("[ProvidersContext] Initialization failed:",C),v(C instanceof Error?C.message:String(C))}finally{n(!1)}})()},[]);const E=S.useCallback(async I=>{n(!0),v(null);try{se&&await se("set_stt_providers_settings",{settings:I}),console.log("[ProvidersContext] Updated STT settings:",I.activeProvider),s(I)}catch(C){const B=C instanceof Error?C.message:String(C);throw v(B),C}finally{n(!1)}},[]),Y=S.useCallback(async I=>{const C={...o,activeProvider:I};await E(C)},[o,E]),G=S.useCallback(async I=>{n(!0),v(null);try{se&&await se("set_llm_providers_settings",{settings:I}),console.log("[ProvidersContext] Updated LLM settings:",I.activeProvider),d(I)}catch(C){const B=C instanceof Error?C.message:String(C);throw v(B),C}finally{n(!1)}},[]),k=S.useCallback(async I=>{const C={...a,activeProvider:I};await G(C)},[a,G]),D=S.useCallback(async()=>{try{if(se){const I=await se("get_providers_status");I&&p(I)}}catch(I){console.error("[ProvidersContext] Failed to refresh status:",I)}},[]),z=S.useCallback(async(I,C,B)=>{n(!0),v(null);try{se&&await se("set_provider_api_key",{request:{providerType:I,providerId:C,apiKey:B}}),await D()}catch(V){const H=V instanceof Error?V.message:String(V);throw v(H),V}finally{n(!1)}},[D]),P=S.useCallback(async(I,C)=>{n(!0),v(null);try{se&&await se("remove_provider_api_key",{request:{providerType:I,providerId:C}}),await D()}catch(B){const V=B instanceof Error?B.message:String(B);throw v(V),B}finally{n(!1)}},[D]),L=S.useCallback(async(I,C)=>{try{return se?await se("has_provider_api_key",{providerType:I,providerId:C}):!1}catch(B){return console.error("[ProvidersContext] Failed to check API key:",B),!1}},[]),A=S.useCallback(async(I,C)=>{m(!0),x(null),v(null);try{if(!se){const V={success:!1,error:"Tauri not available"};return x(V),V}const B=await se("test_provider_connection",{request:{providerType:I,providerId:C}});return x(B),B}catch(B){const V={success:!1,error:B instanceof Error?B.message:String(B)};return x(V),V}finally{m(!1)}},[]),R=S.useCallback(()=>{v(null)},[]),j={isLoading:t,isInitialized:i,sttSettings:o,setSttSettings:E,updateSttProvider:Y,llmSettings:a,setLlmSettings:G,updateLlmProvider:k,setApiKey:z,removeApiKey:P,hasApiKey:L,testConnection:A,isTestingConnection:h,lastTestResult:c,providersStatus:u,refreshStatus:D,error:y,clearError:R};return r.jsx(dr.Provider,{value:j,children:e})};function pr(){const e=S.useContext(dr);if(!e)throw new Error("useProvidersContext must be used within a ProvidersProvider");return e}const Hc=e=>{const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(n);i.setDate(i.getDate()-1);const l=new Date(n);l.setDate(l.getDate()-l.getDay());const o=new Date(t.getFullYear(),t.getMonth(),1),s={},a=[],d=(p,h)=>{s[p]||(s[p]=[],a.push(p)),s[p].push(h)};return[...e].sort((p,h)=>new Date(h.startTime).getTime()-new Date(p.startTime).getTime()).forEach(p=>{const h=new Date(p.startTime),m=new Date(h.getFullYear(),h.getMonth(),h.getDate());if(m.getTime()===n.getTime())d("Сегодня",p);else if(m.getTime()===i.getTime())d("Вчера",p);else if(m>=l)d("На этой неделе",p);else if(m>=o)d("В этом месяце",p);else{const c=h.toLocaleDateString("ru-RU",{month:"long"}),x=h.getFullYear(),y=t.getFullYear(),v=x===y?`в ${c}`:`${c} ${x}`;d(v,p)}}),a.map(p=>({label:p,sessions:s[p]}))},Uc=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%60);return t>0?`${t}:${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},$c=e=>{const t=new Date(e);return t.toLocaleDateString("ru-RU",{day:"numeric",month:"short",year:t.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},Vc=e=>new Date(e).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),ht=({title:e,children:t,position:n="bottom",maxWidth:i=400})=>{const[l,o]=S.useState(!1),[s,a]=S.useState({}),d=S.useRef(null),u=S.useRef(null);S.useEffect(()=>{const h=m=>{d.current&&!d.current.contains(m.target)&&u.current&&!u.current.contains(m.target)&&o(!1)};return l&&document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[l]),S.useEffect(()=>{const h=m=>{m.key==="Escape"&&o(!1)};return l&&document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[l]),S.useEffect(()=>{if(l&&d.current){const m=d.current.getBoundingClientRect(),c=window.innerWidth,x=window.innerHeight,y=16,v={};m.left<y?(v.left=`${y-m.left}px`,v.right="auto",v.transform=n==="left"||n==="right"?"translateY(-50%)":"none"):m.right>c-y&&(v.right=`${m.right-c+y}px`,v.left="auto",v.transform=n==="left"||n==="right"?"translateY(-50%)":"none"),m.top<y?(v.top=`${y-m.top}px`,v.bottom="auto"):m.bottom>x-y&&(v.bottom=`${m.bottom-x+y}px`,v.top="auto"),Object.keys(v).length>0&&a(v)}else a({})},[l,n]);const p=()=>{switch(n){case"top":return{bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:"8px"};case"bottom":return{top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"8px"};case"left":return{right:"100%",top:"50%",transform:"translateY(-50%)",marginRight:"8px"};case"right":return{left:"100%",top:"50%",transform:"translateY(-50%)",marginLeft:"8px"};default:return{}}};return r.jsxs("div",{style:{position:"relative",display:"inline-flex",alignItems:"center"},children:[r.jsx("button",{ref:u,onClick:()=>o(!l),style:{width:"18px",height:"18px",borderRadius:"50%",border:"1px solid var(--text-muted)",background:"transparent",color:"var(--text-muted)",fontSize:"11px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0,transition:"all 0.2s ease"},onMouseEnter:h=>{h.currentTarget.style.borderColor="var(--primary)",h.currentTarget.style.color="var(--primary)"},onMouseLeave:h=>{l||(h.currentTarget.style.borderColor="var(--text-muted)",h.currentTarget.style.color="var(--text-muted)")},"aria-label":`Справка: ${e}`,title:"Нажмите для подробной информации",children:"?"}),l&&r.jsx("div",{ref:d,style:{position:"absolute",zIndex:1e3,...p(),...s},children:r.jsxs("div",{style:{background:"rgba(30, 30, 35, 0.85)",backdropFilter:"blur(24px) saturate(180%)",WebkitBackdropFilter:"blur(24px) saturate(180%)",border:"1px solid rgba(255, 255, 255, 0.12)",borderRadius:"16px",padding:"16px 20px",maxWidth:`${i}px`,minWidth:"320px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.08)",animation:"fadeIn 0.2s ease"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px",paddingBottom:"10px",borderBottom:"1px solid rgba(255, 255, 255, 0.08)"},children:[r.jsx("span",{style:{fontSize:"1rem",fontWeight:600,color:"rgba(255, 255, 255, 0.95)"},children:e}),r.jsx("button",{onClick:()=>o(!1),style:{background:"rgba(255, 255, 255, 0.1)",border:"none",color:"rgba(255, 255, 255, 0.6)",cursor:"pointer",fontSize:"16px",padding:"4px 8px",lineHeight:1,borderRadius:"6px",transition:"all 0.15s ease"},onMouseEnter:h=>{h.currentTarget.style.background="rgba(255, 255, 255, 0.15)",h.currentTarget.style.color="rgba(255, 255, 255, 0.9)"},onMouseLeave:h=>{h.currentTarget.style.background="rgba(255, 255, 255, 0.1)",h.currentTarget.style.color="rgba(255, 255, 255, 0.6)"},"aria-label":"Закрыть",children:"✕"})]}),r.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",lineHeight:1.7},children:t})]})}),r.jsx("style",{children:`
                @keyframes fadeIn {
                    from {
                        opacity: 0;
                        transform: translateX(-50%) translateY(-4px);
                    }
                    to {
                        opacity: 1;
                        transform: translateX(-50%) translateY(0);
                    }
                }
            `})]})},et=({checked:e,onChange:t,disabled:n=!1,size:i="md",label:l,description:o,id:s,className:a=""})=>{const d=s||`switch-${Math.random().toString(36).slice(2,9)}`,u={sm:{width:36,height:20,thumb:16,translate:16},md:{width:44,height:24,thumb:20,translate:20},lg:{width:52,height:28,thumb:24,translate:24}},{width:p,height:h,thumb:m,translate:c}=u[i],x=()=>{n||t(!e)},y=v=>{(v.key===" "||v.key==="Enter")&&(v.preventDefault(),x())};return r.jsxs("div",{className:`switch-container ${a}`,style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[r.jsx("button",{id:d,type:"button",role:"switch","aria-checked":e,"aria-label":l,disabled:n,onClick:x,onKeyDown:y,style:{position:"relative",display:"inline-flex",flexShrink:0,width:`${p}px`,height:`${h}px`,borderRadius:`${h}px`,border:"none",padding:"2px",cursor:n?"not-allowed":"pointer",background:e?"var(--primary, #7c3aed)":"var(--switch-bg, rgba(120, 120, 128, 0.32))",transition:"background-color 0.2s ease",opacity:n?.5:1,outline:"none"},onFocus:v=>{v.currentTarget.style.boxShadow="0 0 0 2px var(--primary-alpha, rgba(124, 58, 237, 0.3))"},onBlur:v=>{v.currentTarget.style.boxShadow="none"},children:r.jsx("span",{style:{display:"block",width:`${m}px`,height:`${m}px`,borderRadius:"50%",background:"white",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.2), 0 1px 2px rgba(0, 0, 0, 0.12)",transition:"transform 0.2s ease",transform:e?`translateX(${c}px)`:"translateX(0)"}})}),(l||o)&&r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px",flex:1},children:[l&&r.jsx("label",{htmlFor:d,style:{fontSize:"0.9rem",fontWeight:500,color:"var(--text-primary)",cursor:n?"not-allowed":"pointer"},onClick:x,children:l}),o&&r.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)",lineHeight:1.4},children:o})]})]})},hr=({value:e,onChange:t,min:n=0,max:i=100,step:l=1,disabled:o=!1,label:s,description:a,showValue:d=!0,valueFormat:u,className:p=""})=>{const[h,m]=S.useState(!1),c=S.useRef(null),x=(e-n)/(i-n)*100,y=u?u(e):e.toString(),v=S.useCallback(E=>{o||t(Number(E.target.value))},[o,t]),w=()=>m(!0),W=()=>m(!1);return r.jsxs("div",{className:`slider-container ${p}`,style:{display:"flex",flexDirection:"column",gap:"8px"},children:[(s||d)&&r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s&&r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[r.jsx("span",{style:{fontSize:"0.9rem",fontWeight:500,color:"var(--text-primary)"},children:s}),a&&r.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:a})]}),d&&r.jsx("span",{style:{fontSize:"0.85rem",fontWeight:600,color:"var(--primary, #7c3aed)",minWidth:"40px",textAlign:"right",fontVariantNumeric:"tabular-nums"},children:y})]}),r.jsxs("div",{ref:c,style:{position:"relative",width:"100%",height:"24px",display:"flex",alignItems:"center"},children:[r.jsx("div",{style:{position:"absolute",width:"100%",height:"6px",borderRadius:"3px",background:"var(--slider-bg, rgba(120, 120, 128, 0.2))"}}),r.jsx("div",{style:{position:"absolute",width:`${x}%`,height:"6px",borderRadius:"3px",background:o?"var(--text-muted)":"var(--primary, #7c3aed)",transition:h?"none":"width 0.1s ease"}}),r.jsx("input",{type:"range",min:n,max:i,step:l,value:e,onChange:v,onMouseDown:w,onMouseUp:W,onTouchStart:w,onTouchEnd:W,disabled:o,style:{position:"absolute",width:"100%",height:"100%",opacity:0,cursor:o?"not-allowed":"pointer",margin:0,zIndex:2}}),r.jsx("div",{style:{position:"absolute",left:`calc(${x}% - 10px)`,width:"20px",height:"20px",borderRadius:"50%",background:"white",boxShadow:h?"0 0 0 4px var(--primary-alpha, rgba(124, 58, 237, 0.2)), 0 2px 8px rgba(0, 0, 0, 0.2)":"0 2px 6px rgba(0, 0, 0, 0.15)",transition:h?"box-shadow 0.15s ease":"left 0.1s ease, box-shadow 0.15s ease",pointerEvents:"none",opacity:o?.5:1}})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.7rem",color:"var(--text-muted)",opacity:.7},children:[r.jsx("span",{children:u?u(n):n}),r.jsx("span",{children:u?u(i):i})]})]})},yi=()=>r.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M13 17l5-5-5-5M6 17l5-5-5-5"})}),bi=()=>r.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M18 20V10M12 20V4M6 20v-6"})}),vi=({settings:e,onChange:t,availableModels:n,currentModelId:i,disabled:l=!1})=>{const o=n.filter(m=>m.status==="downloaded"&&m.id!==i&&(m.engine==="whisper"||m.engine==="gigaam"||m.engine==="fluid-asr")),s=m=>{t({...e,enabled:m})},a=m=>{t({...e,secondaryModelId:m})},d=m=>{t({...e,confidenceThreshold:m})},u=m=>{t({...e,useLLMForMerge:m})},p=m=>{t({...e,mode:m})},h=m=>{const c=m.split(",").map(x=>x.trim()).filter(Boolean).filter((x,y,v)=>v.indexOf(x)===y);t({...e,hotwords:c.length>0?c:void 0})};return r.jsxs("div",{style:{padding:"12px 16px",background:"var(--surface-strong)",borderRadius:"12px",border:"1px solid var(--border)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.enabled?"16px":0},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{opacity:.7},children:[r.jsx("path",{d:"M23 4v6h-6M1 20v-6h6"}),r.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),r.jsx("span",{style:{fontSize:"0.9rem",fontWeight:500},children:"Улучшенное распознавание"}),r.jsx(ht,{title:"Гибридная транскрипция",maxWidth:520,children:r.jsx(ki,{})})]}),r.jsx(et,{checked:e.enabled,onChange:s,disabled:l,size:"sm"})]}),e.enabled&&r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"var(--text-muted)",marginBottom:"6px"},children:"Дополнительная модель для проблемных участков:"}),r.jsxs("select",{value:e.secondaryModelId,onChange:m=>a(m.target.value),disabled:l,style:{width:"100%",padding:"8px 12px",background:"var(--glass-bg)",border:"1px solid var(--glass-border)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"0.85rem",cursor:l?"not-allowed":"pointer"},children:[r.jsx("option",{value:"",children:"Выберите модель..."}),o.map(m=>r.jsxs("option",{value:m.id,children:[m.name," ",m.wer&&`(WER: ${m.wer})`]},m.id))]}),o.length===0&&r.jsx("p",{style:{fontSize:"0.75rem",color:"var(--warning)",marginTop:"4px"},children:"Скачайте дополнительную модель в менеджере моделей"})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",fontSize:"0.8rem",color:"var(--text-muted)",marginBottom:"6px"},children:"Режим слияния:"}),r.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:[r.jsxs("button",{onClick:()=>p("parallel"),disabled:l,style:{flex:1,minWidth:"140px",padding:"8px 10px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",background:e.mode==="parallel"?"var(--primary)":"var(--glass-bg)",border:`1px solid ${e.mode==="parallel"?"var(--primary)":"var(--glass-border)"}`,borderRadius:"8px",color:e.mode==="parallel"?"white":"var(--text-primary)",fontSize:"0.75rem",cursor:l?"not-allowed":"pointer",transition:"all 0.15s ease"},children:[r.jsx(yi,{}),"Пословное слияние"]}),r.jsxs("button",{onClick:()=>p("confidence"),disabled:l,style:{flex:1,minWidth:"140px",padding:"8px 10px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",background:e.mode==="confidence"?"var(--primary)":"var(--glass-bg)",border:`1px solid ${e.mode==="confidence"?"var(--primary)":"var(--glass-border)"}`,borderRadius:"8px",color:e.mode==="confidence"?"white":"var(--text-primary)",fontSize:"0.75rem",cursor:l?"not-allowed":"pointer",transition:"all 0.15s ease"},children:[r.jsx(bi,{}),"По порогу confidence"]})]}),r.jsx("p",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"4px"},children:e.mode==="parallel"?"Обе модели транскрибируют весь текст, система выбирает лучшие слова через voting (быстро)":"Вторая модель перетранскрибирует только слова с низким confidence"})]}),e.mode==="confidence"&&r.jsx("div",{children:r.jsx(hr,{value:e.confidenceThreshold,onChange:d,min:.5,max:.9,step:.05,label:"Порог уверенности",description:`Слова с уверенностью ниже ${Math.round(e.confidenceThreshold*100)}% будут перетранскрибированы`,valueFormat:m=>`${Math.round(m*100)}%`,disabled:l})}),r.jsxs("div",{style:{padding:"10px 12px",background:e.useLLMForMerge?"rgba(var(--primary-rgb), 0.1)":"var(--glass-bg)",border:`1px solid ${e.useLLMForMerge?"var(--primary)":"var(--glass-border)"}`,borderRadius:"8px",transition:"all 0.15s ease"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"12px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1},children:[r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{opacity:.7,flexShrink:0},children:[r.jsx("path",{d:"M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2z"}),r.jsx("circle",{cx:"7.5",cy:"14.5",r:"1.5"}),r.jsx("circle",{cx:"16.5",cy:"14.5",r:"1.5"})]}),r.jsx("span",{style:{fontSize:"0.85rem",fontWeight:500},children:"Улучшить через LLM (Ollama)"}),r.jsxs(ht,{title:"LLM для улучшения",position:"left",maxWidth:380,children:[r.jsx("p",{children:"После слияния результатов двух моделей, LLM (Ollama) проанализирует текст и исправит грамматические ошибки, пунктуацию и выберет правильные варианты спорных слов с учётом контекста."}),r.jsxs("p",{style:{marginTop:"8px"},children:[r.jsx("strong",{children:"Требования:"})," Запущенный Ollama с выбранной моделью."]}),r.jsxs("p",{style:{marginTop:"8px"},children:[r.jsx("strong",{children:"Рекомендуемые модели:"})," gemma2, llama3.2, qwen2.5"]})]})]}),r.jsx(et,{checked:e.useLLMForMerge,onChange:u,disabled:l,size:"sm"})]}),e.useLLMForMerge&&r.jsx("p",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"6px",marginLeft:"24px"},children:"LLM будет вызван после слияния для финальной корректировки текста"})]}),r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[r.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{opacity:.6},children:[r.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),r.jsx("polyline",{points:"14 2 14 8 20 8"}),r.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),r.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),r.jsx("label",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:"Словарь подсказок:"}),r.jsxs(ht,{title:"Словарь подсказок (Hotwords)",position:"left",maxWidth:400,children:[r.jsx("p",{children:"Введите термины, имена и аббревиатуры, которые модели часто распознают неправильно."}),r.jsxs("p",{style:{marginTop:"8px"},children:[r.jsx("strong",{children:"Примеры:"})," Notifier, API, B2C, Люха, техкомитет"]}),r.jsx("p",{style:{marginTop:"8px"},children:"Система найдёт похожие слова в транскрипции (по расстоянию Левенштейна) и заменит их на правильное написание из словаря."})]})]}),r.jsx("textarea",{placeholder:"Notifier, API, B2C, Люха, техкомитет...",value:e.hotwords?.join(", ")||"",onChange:m=>h(m.target.value),disabled:l,rows:2,style:{width:"100%",padding:"8px 12px",background:"var(--glass-bg)",border:"1px solid var(--glass-border)",borderRadius:"8px",color:"var(--text-primary)",fontSize:"0.85rem",resize:"vertical",minHeight:"50px",fontFamily:"inherit"}}),r.jsx("p",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"4px"},children:"Через запятую. Слова с похожим звучанием будут заменены на указанные."})]})]})]})},ki=()=>r.jsxs("div",{children:[r.jsx("p",{style:{marginBottom:"12px"},children:"Эта функция комбинирует сильные стороны двух моделей распознавания речи."}),r.jsx("h4",{style:{fontSize:"0.85rem",fontWeight:600,marginBottom:"8px",color:"var(--text-primary)"},children:"Как это работает:"}),r.jsxs("ol",{style:{paddingLeft:"20px",marginBottom:"12px"},children:[r.jsxs("li",{style:{marginBottom:"4px"},children:[r.jsx("strong",{children:"Первый проход"})," — основная модель транскрибирует весь аудиофайл"]}),r.jsxs("li",{style:{marginBottom:"4px"},children:[r.jsx("strong",{children:"Анализ уверенности"})," — система находит слова с низким confidence"]}),r.jsxs("li",{style:{marginBottom:"4px"},children:[r.jsx("strong",{children:"Второй проход"})," — дополнительная модель перетранскрибирует проблемные участки"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Объединение"})," — LLM выбирает лучший вариант"]})]}),r.jsx("h4",{style:{fontSize:"0.85rem",fontWeight:600,marginBottom:"8px",color:"var(--text-primary)"},children:"Когда использовать:"}),r.jsxs("ul",{style:{paddingLeft:"20px",marginBottom:"12px"},children:[r.jsx("li",{style:{marginBottom:"4px"},children:"Много иностранных терминов (API, B2C, UMS)"}),r.jsx("li",{style:{marginBottom:"4px"},children:"Основная модель хороша с языком, но плоха с терминологией"}),r.jsx("li",{children:"Важна максимальная точность"})]}),r.jsx("h4",{style:{fontSize:"0.85rem",fontWeight:600,marginBottom:"8px",color:"var(--text-primary)"},children:"Рекомендуемые комбинации:"}),r.jsxs("ul",{style:{paddingLeft:"20px"},children:[r.jsxs("li",{style:{marginBottom:"4px"},children:[r.jsx("strong",{children:"GigaAM"})," + ",r.jsx("strong",{children:"Whisper"})," — для русского с англ. терминами"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Parakeet"})," + ",r.jsx("strong",{children:"Whisper Large"})," — для английского с редкими терминами"]})]})]}),wi=e=>new Date(e).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),ji=e=>{const t=new Date(e),i=new Date().getTime()-t.getTime(),l=Math.floor(i/(1e3*60*60*24));return l===0?"Сегодня":l===1?"Вчера":l<7?`${l} дн. назад`:l<30?`${Math.floor(l/7)} нед. назад`:wi(e)},Si=({currentName:e,onSave:t,onClose:n})=>{const[i,l]=S.useState(e),o=s=>{s.preventDefault(),i.trim()&&t(i.trim())};return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},onClick:n,children:r.jsxs("div",{style:{background:"var(--glass-bg-elevated)",backdropFilter:"blur(var(--glass-blur)) saturate(var(--glass-saturation))",WebkitBackdropFilter:"blur(var(--glass-blur)) saturate(var(--glass-saturation))",borderRadius:"var(--radius-xl)",padding:"1.5rem",minWidth:"320px",boxShadow:"var(--shadow-elevated)",border:"1px solid var(--glass-border)"},onClick:s=>s.stopPropagation(),children:[r.jsx("h3",{style:{margin:"0 0 1rem",color:"var(--text-primary)"},children:"Переименовать голос"}),r.jsxs("form",{onSubmit:o,children:[r.jsx("input",{type:"text",value:i,onChange:s=>l(s.target.value),placeholder:"Введите имя",autoFocus:!0,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",backgroundColor:"var(--surface-strong)",color:"var(--text-primary)",marginBottom:"1rem",boxSizing:"border-box"}}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[r.jsx("button",{type:"button",onClick:n,className:"btn-secondary",style:{padding:"0.6rem 1.2rem",borderRadius:"var(--radius-md)"},children:"Отмена"}),r.jsx("button",{type:"submit",className:"btn-primary",style:{padding:"0.6rem 1.2rem",borderRadius:"var(--radius-md)"},children:"Сохранить"})]})]})]})})},Ci=({name:e,onConfirm:t,onClose:n})=>r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},onClick:n,children:r.jsxs("div",{style:{background:"var(--glass-bg-elevated)",backdropFilter:"blur(var(--glass-blur)) saturate(var(--glass-saturation))",WebkitBackdropFilter:"blur(var(--glass-blur)) saturate(var(--glass-saturation))",borderRadius:"var(--radius-xl)",padding:"1.5rem",minWidth:"320px",maxWidth:"400px",boxShadow:"var(--shadow-elevated)",border:"1px solid var(--glass-border)"},onClick:i=>i.stopPropagation(),children:[r.jsx("h3",{style:{margin:"0 0 0.75rem",color:"var(--text-primary)"},children:"Удалить голос?"}),r.jsxs("p",{style:{margin:"0 0 1.5rem",color:"var(--text-secondary)",fontSize:"0.9rem"},children:["Голос «",e,"» будет удалён из базы. Это действие нельзя отменить."]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[r.jsx("button",{type:"button",onClick:n,className:"btn-secondary",style:{padding:"0.6rem 1.2rem",borderRadius:"var(--radius-md)"},children:"Отмена"}),r.jsx("button",{type:"button",onClick:t,style:{padding:"0.6rem 1.2rem",borderRadius:"var(--radius-md)",backgroundColor:"var(--danger)",color:"white",border:"none",cursor:"pointer"},children:"Удалить"})]})]})}),Ii=({voiceprints:e,onRename:t,onDelete:n,onRefresh:i,isLoading:l=!1})=>{const[o,s]=S.useState(null),[a,d]=S.useState(null),u=h=>{o&&(t(o.id,h),s(null))},p=()=>{a&&(n(a.id),d(null))};return l?r.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem",color:"var(--text-muted)"},children:[r.jsx("div",{style:{width:"40px",height:"40px",margin:"0 auto 1rem",border:"3px solid var(--glass-border)",borderTopColor:"var(--primary)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("p",{style:{margin:0},children:"Загрузка голосов..."}),r.jsx("style",{children:`
                    @keyframes spin {
                        to { transform: rotate(360deg); }
                    }
                `})]}):e.length===0?r.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem",color:"var(--text-muted)"},children:[r.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",style:{marginBottom:"1rem",opacity:.5},children:[r.jsx("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}),r.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),r.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"})]}),r.jsx("p",{style:{margin:"0 0 0.5rem"},children:"Нет сохранённых голосов"}),r.jsx("p",{style:{fontSize:"0.85rem",margin:0},children:"Голоса сохраняются при переименовании спикера с опцией «Запомнить голос»"})]}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[r.jsxs("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:[e.length," ",e.length===1?"голос":e.length<5?"голоса":"голосов"]}),r.jsx("button",{className:"btn-icon btn-icon-sm",onClick:i,disabled:l,title:"Обновить список",style:{width:"28px",height:"28px",opacity:l?.5:1},children:r.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{animation:l?"spin 1s linear infinite":"none"},children:[r.jsx("path",{d:"M23 4v6h-6"}),r.jsx("path",{d:"M1 20v-6h6"}),r.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})})]}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.map(h=>r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",backgroundColor:"var(--glass-bg)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},children:[r.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:h.source==="mic"?"#4caf50":"#2196f3",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"0.9rem",flexShrink:0},children:h.name.charAt(0).toUpperCase()}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontWeight:600,color:"var(--text-primary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"0.9rem"},children:h.name}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",display:"flex",gap:"0.5rem"},children:[r.jsx("span",{children:ji(h.lastSeenAt)}),r.jsx("span",{children:"·"}),r.jsxs("span",{children:[h.seenCount," ",h.seenCount===1?"встреча":"встреч"]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[r.jsx("button",{onClick:()=>s(h),className:"btn-icon btn-icon-sm",title:"Переименовать",style:{width:"28px",height:"28px"},children:r.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),r.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),r.jsx("button",{onClick:()=>d(h),className:"btn-icon btn-icon-sm",title:"Удалить",style:{width:"28px",height:"28px",color:"var(--danger)"},children:r.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("polyline",{points:"3 6 5 6 21 6"}),r.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]},h.id))}),o&&r.jsx(Si,{currentName:o.name,onSave:u,onClose:()=>s(null)}),a&&r.jsx(Ci,{name:a.name,onConfirm:p,onClose:()=>d(null)})]})},Ti={marginBottom:"1.5rem",padding:"1rem",background:"var(--glass-bg)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border-subtle)"},mn={fontSize:"0.75rem",fontWeight:"var(--font-weight-semibold)",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.04em",marginBottom:"0.75rem",display:"block"},_t={width:"100%",padding:"0.6rem 2.25rem 0.6rem 0.75rem",background:"var(--glass-bg)",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23888' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"12px",border:"1px solid var(--glass-border)",borderRadius:"var(--radius-sm)",color:"var(--text-primary)",fontSize:"0.9rem",fontFamily:"inherit",cursor:"pointer",transition:"border-color var(--duration-fast)",minHeight:"40px",lineHeight:"1.4",WebkitAppearance:"none",MozAppearance:"none",appearance:"none"},Ft={..._t,backgroundImage:"none",paddingRight:"0.75rem",cursor:"text"},mr={padding:"0.85rem 1rem",background:"var(--glass-bg)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)",marginBottom:"0.5rem",cursor:"pointer",transition:"all var(--duration-fast)"},zi={...mr,background:"rgba(52, 199, 89, 0.1)",borderColor:"rgba(52, 199, 89, 0.3)"},gn=({name:e,description:t,isCloud:n,isActive:i,isConfigured:l,onClick:o})=>r.jsx("div",{style:i?zi:mr,onClick:o,onKeyDown:s=>s.key==="Enter"&&o(),role:"button",tabIndex:0,children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:i?"#34c759":"var(--text-muted)",flexShrink:0}}),r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:e}),n&&r.jsx("span",{style:{fontSize:"0.7rem",padding:"0.1rem 0.4rem",background:"rgba(0, 122, 255, 0.15)",color:"var(--primary)",borderRadius:"4px"},children:"Облако"}),n&&l&&r.jsx("span",{style:{fontSize:"0.7rem",padding:"0.1rem 0.4rem",background:"rgba(52, 199, 89, 0.15)",color:"var(--success)",borderRadius:"4px"},children:"API ✓"})]}),r.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:"0.2rem"},children:t})]}),i&&r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#34c759",strokeWidth:"2",children:r.jsx("polyline",{points:"20 6 9 17 4 12"})})]})}),fn=({isSet:e,onSave:t,onRemove:n,onTest:i,isLoading:l,testResult:o})=>{const[s,a]=S.useState(""),[d,u]=S.useState(!1),p=async()=>{s.trim()&&(await t(s.trim()),a(""))};return r.jsxs("div",{style:{marginTop:"0.75rem"},children:[r.jsx("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:e?r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{...Ft,flex:1,display:"flex",alignItems:"center",cursor:"default",background:"rgba(52, 199, 89, 0.05)",borderColor:"rgba(52, 199, 89, 0.2)"},children:r.jsx("span",{style:{color:"var(--success)"},children:"••••••••••••••••"})}),r.jsx("button",{className:"btn-capsule",onClick:i,disabled:l,style:{padding:"0.5rem 0.75rem",fontSize:"0.85rem",background:"var(--glass-bg)",border:"1px solid var(--glass-border)"},children:l?"Тест...":"Тест"}),r.jsx("button",{className:"btn-capsule",onClick:n,disabled:l,style:{padding:"0.5rem 0.75rem",fontSize:"0.85rem",background:"rgba(255, 59, 48, 0.1)",border:"1px solid rgba(255, 59, 48, 0.2)",color:"var(--danger)"},children:"Удалить"})]}):r.jsxs(r.Fragment,{children:[r.jsx("input",{type:d?"text":"password",value:s,onChange:h=>a(h.target.value),placeholder:"Введите API ключ...",style:{...Ft,flex:1}}),r.jsx("button",{className:"btn-icon",onClick:()=>u(!d),style:{width:"40px",height:"40px"},children:d?r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),r.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),r.jsx("button",{className:"btn-capsule btn-capsule-primary",onClick:p,disabled:l||!s.trim(),style:{padding:"0.5rem 1rem",fontSize:"0.85rem"},children:"Сохранить"})]})}),o&&r.jsx("div",{style:{marginTop:"0.5rem",padding:"0.5rem 0.75rem",borderRadius:"var(--radius-sm)",fontSize:"0.8rem",background:o.success?"rgba(52, 199, 89, 0.1)":"rgba(255, 59, 48, 0.1)",color:o.success?"var(--success)":"var(--danger)"},children:o.success?`✓ Подключение успешно${o.latencyMs?` (${o.latencyMs}ms)`:""}`:`✗ Ошибка: ${o.error||"Неизвестная ошибка"}`})]})},Ei=({className:e})=>{const{isLoading:t,isInitialized:n,sttSettings:i,setSttSettings:l,updateSttProvider:o,llmSettings:s,setLlmSettings:a,updateLlmProvider:d,setApiKey:u,removeApiKey:p,testConnection:h,isTestingConnection:m,lastTestResult:c,error:x}=pr(),[y,v]=S.useState("stt"),[w,W]=S.useState(null),[E,Y]=S.useState(null),G=S.useCallback(async j=>{i.activeProvider===j?W(w===j?null:j):(await o(j),W(j))},[i,w,o]),k=S.useCallback(async j=>{s.activeProvider===j?Y(E===j?null:j):(await d(j),Y(j))},[s,E,d]),D=S.useCallback(async(j,I)=>{await u("stt",j,I);const C={...i};switch(j){case"openai":C.openai={...C.openai||li,enabled:!0,apiKeySet:!0};break;case"deepgram":C.deepgram={...C.deepgram||oi,enabled:!0,apiKeySet:!0};break;case"groq":C.groq={...C.groq||si,enabled:!0,apiKeySet:!0};break}await l(C)},[i,u,l]),z=S.useCallback(async j=>{await p("stt",j);const I={...i};switch(j){case"openai":I.openai&&(I.openai.apiKeySet=!1);break;case"deepgram":I.deepgram&&(I.deepgram.apiKeySet=!1);break;case"groq":I.groq&&(I.groq.apiKeySet=!1);break}await l(I)},[i,p,l]),P=S.useCallback(async(j,I)=>{await u("llm",j,I);const C={...s};switch(j){case"openai":C.openai={...C.openai||ci,enabled:!0,apiKeySet:!0};break;case"openrouter":C.openrouter={...C.openrouter||ui,enabled:!0,apiKeySet:!0};break}await a(C)},[s,u,a]),L=S.useCallback(async j=>{await p("llm",j);const I={...s};switch(j){case"openai":I.openai&&(I.openai.apiKeySet=!1);break;case"openrouter":I.openrouter&&(I.openrouter.apiKeySet=!1);break}await a(I)},[s,p,a]);if(!n)return r.jsx("div",{className:e,style:Ti,children:r.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"var(--text-muted)"},children:"Загрузка провайдеров..."})});const A=j=>{switch(j){case"local":return!0;case"openai":return i.openai?.apiKeySet||!1;case"deepgram":return i.deepgram?.apiKeySet||!1;case"groq":return i.groq?.apiKeySet||!1;default:return!1}},R=j=>{switch(j){case"ollama":return!0;case"openai":return s.openai?.apiKeySet||!1;case"openrouter":return s.openrouter?.apiKeySet||!1;default:return!1}};return r.jsxs("div",{className:e,children:[x&&r.jsx("div",{style:{padding:"0.75rem 1rem",background:"rgba(255, 59, 48, 0.1)",border:"1px solid rgba(255, 59, 48, 0.2)",borderRadius:"var(--radius-md)",color:"var(--danger)",fontSize:"0.85rem",marginBottom:"1rem"},children:x}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",padding:"0.25rem",background:"var(--glass-bg)",borderRadius:"var(--radius-md)"},children:[r.jsx("button",{onClick:()=>v("stt"),style:{flex:1,padding:"0.6rem 1rem",border:"none",borderRadius:"var(--radius-sm)",background:y==="stt"?"var(--glass-bg-elevated)":"transparent",color:y==="stt"?"var(--text-primary)":"var(--text-muted)",fontWeight:y==="stt"?600:400,cursor:"pointer",transition:"all var(--duration-fast)"},children:"Транскрибация (STT)"}),r.jsx("button",{onClick:()=>v("llm"),style:{flex:1,padding:"0.6rem 1rem",border:"none",borderRadius:"var(--radius-sm)",background:y==="llm"?"var(--glass-bg-elevated)":"transparent",color:y==="llm"?"var(--text-primary)":"var(--text-muted)",fontWeight:y==="llm"?600:400,cursor:"pointer",transition:"all var(--duration-fast)"},children:"LLM (Сводка)"})]}),y==="stt"&&r.jsxs("div",{children:[r.jsx("span",{style:mn,children:"Провайдеры транскрибации"}),Object.keys(xt).filter(j=>j!=="assemblyai").map(j=>{const I=xt[j],C=i.activeProvider===j,B=w===j,V=A(j);return r.jsxs("div",{children:[r.jsx(gn,{id:j,name:I.name,description:I.description,isCloud:I.isCloud,isActive:C,isConfigured:V,onClick:()=>G(j)}),C&&B&&I.requiresApiKey&&r.jsxs("div",{style:{marginTop:"-0.25rem",marginBottom:"0.5rem",padding:"1rem",background:"var(--glass-bg)",borderRadius:"0 0 var(--radius-md) var(--radius-md)",borderTop:"none"},children:[r.jsx("label",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",display:"block",marginBottom:"0.25rem"},children:"API ключ"}),r.jsx(fn,{providerId:j,providerType:"stt",isSet:V,onSave:H=>D(j,H),onRemove:()=>z(j),onTest:()=>h("stt",j),isLoading:t||m,testResult:c}),V&&r.jsxs("div",{style:{marginTop:"1rem"},children:[r.jsx("label",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",display:"block",marginBottom:"0.35rem"},children:"Модель"}),r.jsx("select",{value:j==="openai"?i.openai?.model:j==="deepgram"?i.deepgram?.model:i.groq?.model,onChange:async H=>{const F={...i};j==="openai"&&F.openai?F.openai.model=H.target.value:j==="deepgram"&&F.deepgram?F.deepgram.model=H.target.value:j==="groq"&&F.groq&&(F.groq.model=H.target.value),await l(F)},style:_t,children:(j==="openai"?di:j==="deepgram"?pi:hi).map(H=>r.jsx("option",{value:H.id,children:H.name},H.id))})]}),I.docsUrl&&r.jsx("a",{href:I.docsUrl,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",marginTop:"0.75rem",fontSize:"0.8rem",color:"var(--primary)"},children:"Документация →"})]})]},j)})]}),y==="llm"&&r.jsxs("div",{children:[r.jsx("span",{style:mn,children:"LLM провайдеры"}),Object.keys(hn).map(j=>{const I=hn[j],C=s.activeProvider===j,B=E===j,V=R(j);return r.jsxs("div",{children:[r.jsx(gn,{id:j,name:I.name,description:I.description,isCloud:I.isCloud,isActive:C,isConfigured:V,onClick:()=>k(j)}),C&&B&&r.jsxs("div",{style:{marginTop:"-0.25rem",marginBottom:"0.5rem",padding:"1rem",background:"var(--glass-bg)",borderRadius:"0 0 var(--radius-md) var(--radius-md)",borderTop:"none"},children:[j==="ollama"&&r.jsxs(r.Fragment,{children:[r.jsx("label",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",display:"block",marginBottom:"0.35rem"},children:"URL сервера"}),r.jsx("input",{type:"text",value:s.ollama.url,onChange:async H=>{const F={...s,ollama:{...s.ollama,url:H.target.value}};await a(F)},placeholder:"http://localhost:11434",style:Ft}),r.jsxs("div",{style:{marginTop:"0.5rem"},children:[r.jsx("button",{className:"btn-capsule",onClick:()=>h("llm","ollama"),disabled:t||m,style:{padding:"0.4rem 0.75rem",fontSize:"0.8rem",background:"var(--glass-bg)",border:"1px solid var(--glass-border)"},children:m?"Проверка...":"Проверить подключение"}),c&&r.jsx("span",{style:{marginLeft:"0.75rem",fontSize:"0.8rem",color:c.success?"var(--success)":"var(--danger)"},children:c.success?"✓ Подключено":`✗ ${c.error}`})]})]}),I.requiresApiKey&&r.jsxs(r.Fragment,{children:[r.jsx("label",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",display:"block",marginBottom:"0.25rem"},children:"API ключ"}),r.jsx(fn,{providerId:j,providerType:"llm",isSet:V,onSave:H=>P(j,H),onRemove:()=>L(j),onTest:()=>h("llm",j),isLoading:t||m,testResult:c})]}),j!=="ollama"&&V&&r.jsxs("div",{style:{marginTop:"1rem"},children:[r.jsx("label",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",display:"block",marginBottom:"0.35rem"},children:"Модель"}),r.jsx("select",{value:j==="openai"?s.openai?.model:s.openrouter?.model,onChange:async H=>{const F={...s};j==="openai"&&F.openai?F.openai.model=H.target.value:j==="openrouter"&&F.openrouter&&(F.openrouter.model=H.target.value),await a(F)},style:_t,children:(j==="openai"?mi:gi).map(H=>r.jsx("option",{value:H.id,children:H.name},H.id))})]}),I.docsUrl&&r.jsx("a",{href:I.docsUrl,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",marginTop:"0.75rem",fontSize:"0.8rem",color:"var(--primary)"},children:"Документация →"})]})]},j)})]})]})},We={appearance:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[r.jsx("circle",{cx:"12",cy:"12",r:"3"}),r.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),audio:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[r.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),r.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2M12 19v4M8 23h8"})]}),models:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[r.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),r.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),r.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]}),diarization:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[r.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"9",cy:"7",r:"4"}),r.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"})]}),hybrid:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),r.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),voiceprints:r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:r.jsx("path",{d:"M2 10v3M6 6v11M10 3v18M14 8v7M18 5v13M22 10v3"})}),about:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),r.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),providers:r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:r.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})})},Mi=[{id:"appearance",label:"Внешний вид",icon:We.appearance},{id:"audio",label:"Аудио",icon:We.audio},{id:"providers",label:"Провайдеры",icon:We.providers},{id:"models",label:"Модели",icon:We.models},{id:"diarization",label:"Диаризация",icon:We.diarization},{id:"voiceprints",label:"Голоса",icon:We.voiceprints},{id:"about",label:"О программе",icon:We.about}],qc=({isOpen:e,onClose:t,devices:n,micDevice:i,setMicDevice:l,captureSystem:o,setCaptureSystem:s,vadMode:a,setVADMode:d,vadMethod:u,setVADMethod:p,screenCaptureKitAvailable:h,useVoiceIsolation:m,setUseVoiceIsolation:c,echoCancel:x,setEchoCancel:y,language:v,setLanguage:w,theme:W,setTheme:E,ollamaModel:Y,setOllamaModel:G,ollamaContextSize:k,setOllamaContextSize:D,ollamaModels:z,ollamaModelsLoading:P,ollamaError:L,loadOllamaModels:A,onShowModelManager:R,activeModelId:j,models:I,diarizationStatus:C,diarizationLoading:B,diarizationError:V,segmentationModels:H=[],embeddingModels:F=[],onEnableDiarization:g,onDisableDiarization:Z,hybridTranscription:ne,onHybridTranscriptionChange:f,voiceprints:ce=[],voiceprintsLoading:oe=!1,onRenameVoiceprint:te,onDeleteVoiceprint:fe,onRefreshVoiceprints:de,appVersion:xe="2.0.6"})=>{const[pe,Te]=S.useState("appearance"),[Se,Be]=S.useState(H.find(N=>N.recommended)?.id||H[0]?.id||""),[De,He]=S.useState(F.find(N=>N.recommended)?.id||F[0]?.id||""),{sttSettings:_,updateSttProvider:U}=pr(),re=S.useRef(!1);if(S.useEffect(()=>{e&&!re.current&&z.length===0&&!P&&(re.current=!0,A()),e||(re.current=!1)},[e,z.length,P,A]),S.useEffect(()=>{!Se&&H.length>0&&Be(H.find(N=>N.recommended)?.id||H[0].id),!De&&F.length>0&&He(F.find(N=>N.recommended)?.id||F[0].id)},[H,F,Se,De]),S.useEffect(()=>{const N=Q=>{Q.key==="Escape"&&e&&t()};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[e,t]),!e)return null;const Ue=I.find(N=>N.id===j),st=n.filter(N=>N.isInput),ze={width:"100%",padding:"0.6rem 2.25rem 0.6rem 0.75rem",background:"var(--glass-bg)",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23888' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"12px",border:"1px solid var(--glass-border)",borderRadius:"var(--radius-sm)",color:"var(--text-primary)",fontSize:"0.9rem",fontFamily:"inherit",cursor:"pointer",transition:"border-color var(--duration-fast)",minHeight:"40px",lineHeight:"1.4",WebkitAppearance:"none",MozAppearance:"none",appearance:"none"},Ce={fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:"0.35rem",display:"block"},Ae={fontSize:"1.5rem",fontWeight:600,marginBottom:"1.5rem",color:"var(--text-primary)"},me={background:"var(--glass-bg)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border-subtle)",padding:"1.25rem",marginBottom:"1rem"},St=()=>r.jsxs("div",{children:[r.jsx("h2",{style:Ae,children:"Внешний вид"}),r.jsxs("div",{style:me,children:[r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:Ce,children:"Тема оформления"}),r.jsxs("select",{value:W,onChange:N=>E(N.target.value),style:ze,children:[r.jsx("option",{value:"system",children:"Системная"}),r.jsx("option",{value:"dark",children:"Тёмная"}),r.jsx("option",{value:"light",children:"Светлая"})]})]}),r.jsxs("div",{children:[r.jsx("label",{style:Ce,children:"Язык распознавания"}),r.jsxs("select",{value:v,onChange:N=>w(N.target.value),style:ze,children:[r.jsx("option",{value:"ru",children:"Русский"}),r.jsx("option",{value:"en",children:"English"}),r.jsx("option",{value:"auto",children:"Авто"})]})]})]})]}),b=()=>r.jsxs("div",{children:[r.jsx("h2",{style:Ae,children:"Аудио"}),r.jsxs("div",{style:me,children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-primary)"},children:"Устройства ввода"}),r.jsxs("div",{style:{marginBottom:"1.25rem"},children:[r.jsx("label",{style:Ce,children:"Микрофон"}),r.jsxs("select",{value:i,onChange:N=>l(N.target.value),style:ze,children:[r.jsx("option",{value:"",children:"По умолчанию"}),st.map(N=>r.jsx("option",{value:N.id,children:N.name},N.id))]})]}),r.jsx("div",{style:{marginBottom:"1rem"},children:r.jsx(et,{checked:o,onChange:s,label:"Записывать системный звук",description:h?"ScreenCaptureKit":void 0})}),o&&h&&r.jsx("div",{style:{marginLeft:"56px"},children:r.jsx(et,{checked:m,onChange:c,label:"Voice Isolation",description:"macOS 15+ для выделения речи",size:"sm"})})]}),r.jsxs("div",{style:me,children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-primary)"},children:"Обработка речи (VAD)"}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:Ce,children:"Режим обработки пауз"}),r.jsxs("select",{value:a,onChange:N=>d(N.target.value),style:ze,children:[r.jsx("option",{value:"auto",children:"Авто (рекомендуется)"}),r.jsx("option",{value:"per-region",children:"Per-region (лучше для GigaAM)"}),r.jsx("option",{value:"compression",children:"Compression (лучше для Whisper)"}),r.jsx("option",{value:"off",children:"Выключен (30с чанки)"})]}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.8rem",marginTop:"0.5rem",lineHeight:"1.4"},children:"Per-region: каждый фрагмент речи отдельно. Compression: склеивание фрагментов."})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{style:Ce,children:"Метод детекции речи"}),r.jsxs("select",{value:u,onChange:N=>p(N.target.value),style:ze,children:[r.jsx("option",{value:"auto",children:"Авто"}),r.jsx("option",{value:"energy",children:"Energy (быстрый)"}),r.jsx("option",{value:"silero",children:"Silero VAD (точный)"})]})]}),r.jsx(hr,{value:x,onChange:y,min:0,max:1,step:.05,label:"Эхоподавление",description:"Уменьшает обратную связь от динамиков",valueFormat:N=>`${Math.round(N*100)}%`})]})]}),M=()=>r.jsxs("div",{children:[r.jsx("h2",{style:Ae,children:"Провайдеры"}),r.jsx("div",{style:me,children:r.jsx(Ei,{})})]}),q=()=>{const N=I.filter(O=>O.engine==="whisper"||O.engine==="gigaam"||O.engine==="fluid-asr"),Q=N.filter(O=>O.status==="downloaded"||O.status==="active"),$e=O=>O.id===j?{text:"Активна",color:"var(--success)",bg:"rgba(52, 211, 153, 0.15)"}:O.status==="downloading"?{text:`${O.progress||0}%`,color:"var(--primary)",bg:"rgba(124, 58, 237, 0.15)"}:O.status==="downloaded"?{text:"Готова",color:"var(--text-secondary)",bg:"var(--glass-bg)"}:null,ge=O=>O>=1e9?`${(O/1e9).toFixed(1)} GB`:O>=1e6?`${(O/1e6).toFixed(0)} MB`:`${O} B`,_e=O=>O.engine==="whisper"?{bg:"#10b981",label:"W"}:O.engine==="gigaam"?{bg:"#3b82f6",label:"G"}:{bg:"#8b5cf6",label:"P"},ue=_.activeProvider==="local",pn=["openai","deepgram","groq"];return r.jsxs("div",{children:[r.jsx("h2",{style:Ae,children:"Модели"}),r.jsxs("div",{style:me,children:[r.jsx("label",{style:{...Ce,marginBottom:"0.75rem"},children:"Режим транскрибации"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",padding:"0.25rem",background:"var(--glass-bg-elevated)",borderRadius:"var(--radius-md)"},children:[r.jsxs("button",{onClick:()=>U("local"),style:{flex:1,padding:"0.65rem 1rem",border:"none",borderRadius:"var(--radius-sm)",background:ue?"var(--primary)":"transparent",color:ue?"white":"var(--text-muted)",fontWeight:ue?600:400,cursor:"pointer",transition:"all var(--duration-fast)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.9rem"},children:[r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),r.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),r.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),"Локально"]}),r.jsxs("button",{onClick:()=>{const O=pn.find(Ee=>xt[Ee]?.isCloud);O&&U(O)},style:{flex:1,padding:"0.65rem 1rem",border:"none",borderRadius:"var(--radius-sm)",background:ue?"transparent":"var(--primary)",color:ue?"var(--text-muted)":"white",fontWeight:ue?400:600,cursor:"pointer",transition:"all var(--duration-fast)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontSize:"0.9rem"},children:[r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})}),"Облако"]})]}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.8rem",margin:0,marginTop:"0.75rem"},children:ue?"Транскрибация выполняется на вашем устройстве — приватность и офлайн-работа":"Облачные сервисы — быстрее и точнее, требуется API-ключ"})]}),!ue&&r.jsxs("div",{style:me,children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-primary)"},children:"Облачный провайдер"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:pn.map(O=>{const Ee=xt[O],Fe=_.activeProvider===O,at=O==="openai"?_.openai?.apiKeySet:O==="deepgram"?_.deepgram?.apiKeySet:O==="groq"?_.groq?.apiKeySet:!1;return r.jsxs("div",{onClick:()=>U(O),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.85rem 1rem",background:Fe?"rgba(124, 58, 237, 0.1)":"var(--glass-bg)",border:Fe?"1px solid var(--primary)":"1px solid var(--glass-border-subtle)",borderRadius:"var(--radius-md)",cursor:"pointer",transition:"all var(--duration-fast)"},children:[r.jsx("div",{style:{width:"18px",height:"18px",borderRadius:"50%",border:`2px solid ${Fe?"var(--primary)":"var(--text-muted)"}`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:Fe&&r.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"var(--primary)"}})}),r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)"},children:Ee.name}),at&&r.jsx("span",{style:{fontSize:"0.7rem",padding:"0.15rem 0.4rem",background:"rgba(52, 199, 89, 0.15)",color:"var(--success)",borderRadius:"4px",fontWeight:500},children:"API ✓"})]}),r.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginTop:"0.15rem"},children:Ee.description})]})]},O)})}),!_.openai?.apiKeySet&&!_.deepgram?.apiKeySet&&!_.groq?.apiKeySet&&r.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(251, 191, 36, 0.1)",borderRadius:"var(--radius-sm)",border:"1px solid rgba(251, 191, 36, 0.2)"},children:r.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--warning, #f59e0b)",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),r.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),"Требуется API-ключ. Добавьте его в расширенных настройках провайдеров."]})})]}),ue&&r.jsxs("div",{style:me,children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,color:"var(--text-primary)",margin:0},children:"Загруженные модели"}),r.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:[Q.length," из ",N.length]})]}),Q.length===0?r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.9rem",margin:0},children:"Нет загруженных моделей. Нажмите «Добавить модель» ниже."}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Q.map(O=>{const Ee=$e(O),Fe=O.id===j,at=_e(O);return r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:Fe?"rgba(124, 58, 237, 0.08)":"var(--glass-bg)",borderRadius:"var(--radius-sm)",border:Fe?"1px solid var(--primary)":"1px solid var(--glass-border-subtle)",cursor:"pointer",transition:"all 0.15s ease"},onClick:()=>!Fe&&R(),children:[r.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"var(--radius-xs)",background:at.bg,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.7rem",fontWeight:700,flexShrink:0},children:at.label}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsx("div",{style:{fontWeight:600,color:"var(--text-primary)",fontSize:"0.9rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:O.name}),r.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)"},children:[O.engine," · ",O.sizeBytes?ge(O.sizeBytes):""]})]}),Ee&&r.jsx("div",{style:{padding:"0.25rem 0.5rem",borderRadius:"var(--radius-xs)",fontSize:"0.7rem",fontWeight:600,color:Ee.color,background:Ee.bg},children:Ee.text})]},O.id)})}),r.jsxs("button",{onClick:R,className:"btn-capsule",style:{width:"100%",marginTop:"1rem"},children:[r.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:"0.5rem"},children:[r.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),r.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Добавить модель"]})]}),r.jsxs("div",{style:me,children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-primary)"},children:"Ollama (для сводки)"}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:Ce,children:"Модель Ollama"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("select",{value:Y,onChange:O=>G(O.target.value),style:{...ze,flex:1},disabled:P,children:[z.length===0&&r.jsx("option",{value:"",children:"Нет моделей"}),z.map(O=>r.jsx("option",{value:O.name,children:O.name},O.name))]}),r.jsx("button",{onClick:A,className:"btn-icon",disabled:P,title:"Обновить список",children:r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M23 4v6h-6M1 20v-6h6"}),r.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})})]}),L&&r.jsx("p",{style:{color:"var(--danger)",fontSize:"0.8rem",marginTop:"0.5rem"},children:L})]}),r.jsxs("div",{children:[r.jsx("label",{style:Ce,children:"Размер контекста"}),r.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[4,8,16,32,64,128,256].map(O=>r.jsxs("button",{onClick:()=>D(O),style:{padding:"0.4rem 0.75rem",borderRadius:"var(--radius-md)",border:k===O?"1px solid var(--primary)":"1px solid var(--glass-border)",background:k===O?"var(--primary)":"transparent",color:k===O?"white":"var(--text-secondary)",cursor:"pointer",fontSize:"0.85rem",fontWeight:500,transition:"all 0.2s ease"},children:[O,"k"]},O))}),r.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginTop:"0.5rem"},children:"Больший контекст позволяет анализировать длинные записи, но требует больше памяти"})]})]}),r.jsxs("div",{style:me,children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[We.hybrid,r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,color:"var(--text-primary)",margin:0},children:"Гибридное распознавание"})]}),ne&&f?r.jsx(vi,{settings:ne,onChange:f,availableModels:I,currentModelId:j||""}):r.jsx("p",{style:{color:"var(--text-secondary)",margin:0},children:"Настройки гибридной транскрипции недоступны"})]})]})},X=()=>{const N=Q=>{Q?g?.(Se,De,"coreml"):Z?.()};return r.jsxs("div",{children:[r.jsx("h2",{style:Ae,children:"Диаризация спикеров"}),r.jsxs("div",{style:me,children:[r.jsx("div",{style:{marginBottom:"1.25rem"},children:r.jsx(et,{checked:C?.enabled??!1,onChange:N,disabled:B,label:"FluidAudio диаризация",description:C?.enabled?`Активна (${C.provider||"CoreML"})`:"Автоматическое разделение речи по спикерам"})}),B&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:"rgba(124, 58, 237, 0.1)",borderRadius:"var(--radius-sm)",marginBottom:"1rem"},children:[r.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid var(--primary)",borderTopColor:"transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:C?.enabled?"Отключение...":"Загрузка моделей..."})]}),V&&r.jsx("div",{style:{padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"var(--radius-sm)",marginBottom:"1rem"},children:r.jsx("p",{style:{color:"var(--danger)",fontSize:"0.85rem",margin:0},children:V})}),r.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.8rem",lineHeight:"1.5",margin:0},children:"Использует модели FluidAudio (CoreML) для сегментации речи и создания эмбеддингов голосов. Модели загружаются автоматически при первом включении."})]}),!C?.enabled&&(H.length>0||F.length>0)&&r.jsxs("details",{style:{marginTop:"-0.5rem"},children:[r.jsx("summary",{style:{cursor:"pointer",fontSize:"0.85rem",color:"var(--text-muted)",padding:"0.5rem 0",userSelect:"none"},children:"Расширенные настройки моделей"}),r.jsxs("div",{style:{...me,marginTop:"0.5rem"},children:[H.length>0&&r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:Ce,children:"Модель сегментации"}),r.jsx("select",{value:Se,onChange:Q=>Be(Q.target.value),style:ze,children:H.map(Q=>r.jsxs("option",{value:Q.id,children:[Q.name," ",Q.recommended&&"(рекомендуется)"]},Q.id))})]}),F.length>0&&r.jsxs("div",{children:[r.jsx("label",{style:Ce,children:"Модель эмбеддингов"}),r.jsx("select",{value:De,onChange:Q=>He(Q.target.value),style:ze,children:F.map(Q=>r.jsxs("option",{value:Q.id,children:[Q.name," ",Q.recommended&&"(рекомендуется)"]},Q.id))})]})]})]})]})},ee=()=>r.jsxs("div",{children:[r.jsx("h2",{style:Ae,children:"Сохранённые голоса"}),r.jsx(Ii,{voiceprints:ce,isLoading:oe,onRename:te||(()=>{}),onDelete:fe||(()=>{}),onRefresh:de||(()=>{})})]}),ke=()=>r.jsxs("div",{children:[r.jsx("h2",{style:Ae,children:"О программе"}),r.jsxs("div",{style:me,children:[r.jsxs("div",{style:{textAlign:"center",padding:"2rem 0"},children:[r.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 1rem",borderRadius:"var(--radius-lg)",background:"linear-gradient(135deg, var(--primary), var(--accent))",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",color:"white",fontWeight:700},children:"AI"}),r.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.5rem",color:"var(--text-primary)"},children:"AIWisper"}),r.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:"1rem"},children:["Версия ",xe]}),r.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"0.85rem",lineHeight:"1.5"},children:["AI-транскрипция речи в текст с поддержкой",r.jsx("br",{}),"Whisper, GigaAM и диаризации спикеров"]})]}),r.jsxs("div",{style:{borderTop:"1px solid var(--glass-border-subtle)",paddingTop:"1rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{color:"var(--text-secondary)"},children:"Платформа"}),r.jsx("span",{style:{color:"var(--text-primary)"},children:"macOS (Tauri)"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[r.jsx("span",{style:{color:"var(--text-secondary)"},children:"Активная модель"}),r.jsx("span",{style:{color:"var(--text-primary)"},children:Ue?.name||"Не выбрана"})]})]})]}),r.jsxs("div",{style:me,children:[r.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:"0.75rem",color:"var(--text-primary)"},children:"Горячие клавиши"}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[{keys:"⌘ R",desc:"Начать/остановить запись"},{keys:"⌘ ,",desc:"Открыть настройки"},{keys:"⌘ E",desc:"Экспорт"},{keys:"Space",desc:"Воспроизведение/пауза"},{keys:"Esc",desc:"Закрыть окно"}].map(({keys:N,desc:Q})=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:Q}),r.jsx("kbd",{style:{padding:"0.25rem 0.5rem",background:"var(--glass-bg-elevated)",borderRadius:"var(--radius-xs)",fontSize:"0.8rem",fontFamily:"monospace",color:"var(--text-primary)"},children:N})]},N))})]})]}),Re=()=>{switch(pe){case"appearance":return St();case"audio":return b();case"providers":return M();case"models":return q();case"diarization":return X();case"voiceprints":return ee();case"about":return ke();default:return null}};return r.jsxs("div",{style:{position:"fixed",inset:0,zIndex:1e3,display:"flex",background:"var(--bg)"},children:[r.jsxs("div",{style:{width:"240px",flexShrink:0,background:"var(--sidebar-bg)",borderRight:"1px solid var(--glass-border-subtle)",display:"flex",flexDirection:"column",backdropFilter:"blur(var(--glass-blur))",WebkitBackdropFilter:"blur(var(--glass-blur))"},children:[r.jsxs("div",{style:{height:"52px",display:"flex",alignItems:"center",padding:"0 1rem",borderBottom:"1px solid var(--glass-border-subtle)",WebkitAppRegion:"drag"},children:[r.jsx("button",{onClick:t,className:"btn-icon",style:{width:"28px",height:"28px",WebkitAppRegion:"no-drag"},title:"Назад (Esc)",children:r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),r.jsx("span",{style:{marginLeft:"0.75rem",fontWeight:600,color:"var(--text-primary)"},children:"Настройки"})]}),r.jsx("nav",{style:{flex:1,padding:"0.5rem",overflowY:"auto"},children:Mi.map(N=>r.jsxs("button",{onClick:()=>Te(N.id),style:{width:"100%",display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.6rem 0.75rem",border:"none",borderRadius:"var(--radius-sm)",background:pe===N.id?"var(--glass-bg-active)":"transparent",color:pe===N.id?"var(--text-primary)":"var(--text-secondary)",cursor:"pointer",textAlign:"left",fontSize:"0.9rem",fontFamily:"inherit",transition:"all var(--duration-fast)"},onMouseEnter:Q=>{pe!==N.id&&(Q.currentTarget.style.background="var(--glass-bg-hover)")},onMouseLeave:Q=>{pe!==N.id&&(Q.currentTarget.style.background="transparent")},children:[N.icon,N.label]},N.id))})]}),r.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[r.jsx("div",{style:{height:"52px",flexShrink:0,WebkitAppRegion:"drag"}}),r.jsx("div",{style:{flex:1,overflowY:"auto",padding:"0 2rem 2rem"},children:r.jsx("div",{style:{maxWidth:"600px"},children:Re()})})]})]})};function Kc({activeTab:e,onTabChange:t,hasSummary:n,isGeneratingSummary:i,isRecording:l=!1,speakersCount:o=0}){const a=[{id:"dialogue",label:"Транскрипция"},{id:"chunks",label:"Отрезки"},{id:"speakers",label:"Собеседники",hideWhenRecording:!0},{id:"stats",label:"Статистика",hideWhenRecording:!0},{id:"summary",label:"Сводка",hideWhenRecording:!0}].filter(d=>!l||!d.hideWhenRecording);return r.jsx("div",{className:"segmented-control",style:{margin:"0 1rem 1rem"},children:a.map(d=>{const u=e===d.id,p=d.id==="summary"&&(n||i),h=d.id==="speakers"&&o>0;return r.jsxs("button",{onClick:()=>t(d.id),className:`segmented-control-item ${u?"active":""}`,style:{position:"relative",display:"flex",alignItems:"center",gap:"0.4rem"},children:[r.jsx("span",{children:d.label}),p&&r.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:i?"var(--warning)":"var(--success)",animation:i?"pulse 1s infinite":"none"}}),h&&r.jsx("span",{style:{fontSize:"0.7rem",padding:"1px 5px",borderRadius:"999px",backgroundColor:"var(--primary)",color:"white",fontWeight:600},children:o})]},d.id)})})}function Li(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Pi=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ai=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ri={};function xn(e,t){return(Ri.jsx?Ai:Pi).test(e)}const Bi=/[ \t\n\f\r]/g;function Di(e){return typeof e=="object"?e.type==="text"?yn(e.value):!1:yn(e)}function yn(e){return e.replace(Bi,"")===""}class lt{constructor(t,n,i){this.normal=n,this.property=t,i&&(this.space=i)}}lt.prototype.normal={};lt.prototype.property={};lt.prototype.space=void 0;function gr(e,t){const n={},i={};for(const l of e)Object.assign(n,l.property),Object.assign(i,l.normal);return new lt(n,i,t)}function Nt(e){return e.toLowerCase()}class ve{constructor(t,n){this.attribute=n,this.property=t}}ve.prototype.attribute="";ve.prototype.booleanish=!1;ve.prototype.boolean=!1;ve.prototype.commaOrSpaceSeparated=!1;ve.prototype.commaSeparated=!1;ve.prototype.defined=!1;ve.prototype.mustUseProperty=!1;ve.prototype.number=!1;ve.prototype.overloadedBoolean=!1;ve.prototype.property="";ve.prototype.spaceSeparated=!1;ve.prototype.space=void 0;let _i=0;const K=qe(),ae=qe(),Wt=qe(),T=qe(),ie=qe(),Ge=qe(),we=qe();function qe(){return 2**++_i}const Ot=Object.freeze(Object.defineProperty({__proto__:null,boolean:K,booleanish:ae,commaOrSpaceSeparated:we,commaSeparated:Ge,number:T,overloadedBoolean:Wt,spaceSeparated:ie},Symbol.toStringTag,{value:"Module"})),Ct=Object.keys(Ot);class Xt extends ve{constructor(t,n,i,l){let o=-1;if(super(t,n),bn(this,"space",l),typeof i=="number")for(;++o<Ct.length;){const s=Ct[o];bn(this,Ct[o],(i&Ot[s])===Ot[s])}}}Xt.prototype.defined=!0;function bn(e,t,n){n&&(e[t]=n)}function Xe(e){const t={},n={};for(const[i,l]of Object.entries(e.properties)){const o=new Xt(i,e.transform(e.attributes||{},i),l,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),t[i]=o,n[Nt(i)]=i,n[Nt(o.attribute)]=i}return new lt(t,n,e.space)}const fr=Xe({properties:{ariaActiveDescendant:null,ariaAtomic:ae,ariaAutoComplete:null,ariaBusy:ae,ariaChecked:ae,ariaColCount:T,ariaColIndex:T,ariaColSpan:T,ariaControls:ie,ariaCurrent:null,ariaDescribedBy:ie,ariaDetails:null,ariaDisabled:ae,ariaDropEffect:ie,ariaErrorMessage:null,ariaExpanded:ae,ariaFlowTo:ie,ariaGrabbed:ae,ariaHasPopup:null,ariaHidden:ae,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ie,ariaLevel:T,ariaLive:null,ariaModal:ae,ariaMultiLine:ae,ariaMultiSelectable:ae,ariaOrientation:null,ariaOwns:ie,ariaPlaceholder:null,ariaPosInSet:T,ariaPressed:ae,ariaReadOnly:ae,ariaRelevant:null,ariaRequired:ae,ariaRoleDescription:ie,ariaRowCount:T,ariaRowIndex:T,ariaRowSpan:T,ariaSelected:ae,ariaSetSize:T,ariaSort:null,ariaValueMax:T,ariaValueMin:T,ariaValueNow:T,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function xr(e,t){return t in e?e[t]:t}function yr(e,t){return xr(e,t.toLowerCase())}const Fi=Xe({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ge,acceptCharset:ie,accessKey:ie,action:null,allow:null,allowFullScreen:K,allowPaymentRequest:K,allowUserMedia:K,alt:null,as:null,async:K,autoCapitalize:null,autoComplete:ie,autoFocus:K,autoPlay:K,blocking:ie,capture:null,charSet:null,checked:K,cite:null,className:ie,cols:T,colSpan:null,content:null,contentEditable:ae,controls:K,controlsList:ie,coords:T|Ge,crossOrigin:null,data:null,dateTime:null,decoding:null,default:K,defer:K,dir:null,dirName:null,disabled:K,download:Wt,draggable:ae,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:K,formTarget:null,headers:ie,height:T,hidden:Wt,high:T,href:null,hrefLang:null,htmlFor:ie,httpEquiv:ie,id:null,imageSizes:null,imageSrcSet:null,inert:K,inputMode:null,integrity:null,is:null,isMap:K,itemId:null,itemProp:ie,itemRef:ie,itemScope:K,itemType:ie,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:K,low:T,manifest:null,max:null,maxLength:T,media:null,method:null,min:null,minLength:T,multiple:K,muted:K,name:null,nonce:null,noModule:K,noValidate:K,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:K,optimum:T,pattern:null,ping:ie,placeholder:null,playsInline:K,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:K,referrerPolicy:null,rel:ie,required:K,reversed:K,rows:T,rowSpan:T,sandbox:ie,scope:null,scoped:K,seamless:K,selected:K,shadowRootClonable:K,shadowRootDelegatesFocus:K,shadowRootMode:null,shape:null,size:T,sizes:null,slot:null,span:T,spellCheck:ae,src:null,srcDoc:null,srcLang:null,srcSet:null,start:T,step:null,style:null,tabIndex:T,target:null,title:null,translate:null,type:null,typeMustMatch:K,useMap:null,value:ae,width:T,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ie,axis:null,background:null,bgColor:null,border:T,borderColor:null,bottomMargin:T,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:K,declare:K,event:null,face:null,frame:null,frameBorder:null,hSpace:T,leftMargin:T,link:null,longDesc:null,lowSrc:null,marginHeight:T,marginWidth:T,noResize:K,noHref:K,noShade:K,noWrap:K,object:null,profile:null,prompt:null,rev:null,rightMargin:T,rules:null,scheme:null,scrolling:ae,standby:null,summary:null,text:null,topMargin:T,valueType:null,version:null,vAlign:null,vLink:null,vSpace:T,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:K,disableRemotePlayback:K,prefix:null,property:null,results:T,security:null,unselectable:null},space:"html",transform:yr}),Ni=Xe({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:we,accentHeight:T,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:T,amplitude:T,arabicForm:null,ascent:T,attributeName:null,attributeType:null,azimuth:T,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:T,by:null,calcMode:null,capHeight:T,className:ie,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:T,diffuseConstant:T,direction:null,display:null,dur:null,divisor:T,dominantBaseline:null,download:K,dx:null,dy:null,edgeMode:null,editable:null,elevation:T,enableBackground:null,end:null,event:null,exponent:T,externalResourcesRequired:null,fill:null,fillOpacity:T,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ge,g2:Ge,glyphName:Ge,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:T,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:T,horizOriginX:T,horizOriginY:T,id:null,ideographic:T,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:T,k:T,k1:T,k2:T,k3:T,k4:T,kernelMatrix:we,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:T,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:T,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:T,overlineThickness:T,paintOrder:null,panose1:null,path:null,pathLength:T,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ie,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:T,pointsAtY:T,pointsAtZ:T,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:we,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:we,rev:we,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:we,requiredFeatures:we,requiredFonts:we,requiredFormats:we,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:T,specularExponent:T,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:T,strikethroughThickness:T,string:null,stroke:null,strokeDashArray:we,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:T,strokeOpacity:T,strokeWidth:null,style:null,surfaceScale:T,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:we,tabIndex:T,tableValues:null,target:null,targetX:T,targetY:T,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:we,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:T,underlineThickness:T,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:T,values:null,vAlphabetic:T,vMathematical:T,vectorEffect:null,vHanging:T,vIdeographic:T,version:null,vertAdvY:T,vertOriginX:T,vertOriginY:T,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:T,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:xr}),br=Xe({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),vr=Xe({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:yr}),kr=Xe({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Wi={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Oi=/[A-Z]/g,vn=/-[a-z]/g,Hi=/^data[-\w.:]+$/i;function Ui(e,t){const n=Nt(t);let i=t,l=ve;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Hi.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(vn,Vi);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!vn.test(o)){let s=o.replace(Oi,$i);s.charAt(0)!=="-"&&(s="-"+s),t="data"+s}}l=Xt}return new l(i,t)}function $i(e){return"-"+e.toLowerCase()}function Vi(e){return e.charAt(1).toUpperCase()}const qi=gr([fr,Fi,br,vr,kr],"html"),Qt=gr([fr,Ni,br,vr,kr],"svg");function Ki(e){return e.join(" ").trim()}var Jt={},kn=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Gi=/\n/g,Yi=/^\s*/,Xi=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Qi=/^:\s*/,Ji=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Zi=/^[;\s]*/,el=/^\s+|\s+$/g,tl=`
`,wn="/",jn="*",Ve="",nl="comment",rl="declaration";function il(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,i=1;function l(x){var y=x.match(Gi);y&&(n+=y.length);var v=x.lastIndexOf(tl);i=~v?x.length-v:i+x.length}function o(){var x={line:n,column:i};return function(y){return y.position=new s(x),u(),y}}function s(x){this.start=x,this.end={line:n,column:i},this.source=t.source}s.prototype.content=e;function a(x){var y=new Error(t.source+":"+n+":"+i+": "+x);if(y.reason=x,y.filename=t.source,y.line=n,y.column=i,y.source=e,!t.silent)throw y}function d(x){var y=x.exec(e);if(y){var v=y[0];return l(v),e=e.slice(v.length),y}}function u(){d(Yi)}function p(x){var y;for(x=x||[];y=h();)y!==!1&&x.push(y);return x}function h(){var x=o();if(!(wn!=e.charAt(0)||jn!=e.charAt(1))){for(var y=2;Ve!=e.charAt(y)&&(jn!=e.charAt(y)||wn!=e.charAt(y+1));)++y;if(y+=2,Ve===e.charAt(y-1))return a("End of comment missing");var v=e.slice(2,y-2);return i+=2,l(v),e=e.slice(y),i+=2,x({type:nl,comment:v})}}function m(){var x=o(),y=d(Xi);if(y){if(h(),!d(Qi))return a("property missing ':'");var v=d(Ji),w=x({type:rl,property:Sn(y[0].replace(kn,Ve)),value:v?Sn(v[0].replace(kn,Ve)):Ve});return d(Zi),w}}function c(){var x=[];p(x);for(var y;y=m();)y!==!1&&(x.push(y),p(x));return x}return u(),c()}function Sn(e){return e?e.replace(el,Ve):Ve}var ll=il,ol=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.default=al;const sl=ol(ll);function al(e,t){let n=null;if(!e||typeof e!="string")return n;const i=(0,sl.default)(e),l=typeof t=="function";return i.forEach(o=>{if(o.type!=="declaration")return;const{property:s,value:a}=o;l?t(s,a,o):a&&(n=n||{},n[s]=a)}),n}var vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.camelCase=void 0;var cl=/^--[a-zA-Z0-9_-]+$/,ul=/-([a-z])/g,dl=/^[^-]+$/,pl=/^-(webkit|moz|ms|o|khtml)-/,hl=/^-(ms)-/,ml=function(e){return!e||dl.test(e)||cl.test(e)},gl=function(e,t){return t.toUpperCase()},Cn=function(e,t){return"".concat(t,"-")},fl=function(e,t){return t===void 0&&(t={}),ml(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(hl,Cn):e=e.replace(pl,Cn),e.replace(ul,gl))};vt.camelCase=fl;var xl=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},yl=xl(Jt),bl=vt;function Ht(e,t){var n={};return!e||typeof e!="string"||(0,yl.default)(e,function(i,l){i&&l&&(n[(0,bl.camelCase)(i,t)]=l)}),n}Ht.default=Ht;var vl=Ht;const kl=ar(vl),wr=jr("end"),Zt=jr("start");function jr(e){return t;function t(n){const i=n&&n.position&&n.position[e]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function wl(e){const t=Zt(e),n=wr(e);if(t&&n)return{start:t,end:n}}function tt(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?In(e.position):"start"in e||"end"in e?In(e):"line"in e||"column"in e?Ut(e):""}function Ut(e){return Tn(e&&e.line)+":"+Tn(e&&e.column)}function In(e){return Ut(e&&e.start)+"-"+Ut(e&&e.end)}function Tn(e){return e&&typeof e=="number"?e:1}class he extends Error{constructor(t,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let l="",o={},s=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?l=t:!o.cause&&t&&(s=!0,l=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof i=="string"){const d=i.indexOf(":");d===-1?o.ruleId=i:(o.source=i.slice(0,d),o.ruleId=i.slice(d+1))}if(!o.place&&o.ancestors&&o.ancestors){const d=o.ancestors[o.ancestors.length-1];d&&(o.place=d.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=l,this.line=a?a.line:void 0,this.name=tt(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}he.prototype.file="";he.prototype.name="";he.prototype.reason="";he.prototype.message="";he.prototype.stack="";he.prototype.column=void 0;he.prototype.line=void 0;he.prototype.ancestors=void 0;he.prototype.cause=void 0;he.prototype.fatal=void 0;he.prototype.place=void 0;he.prototype.ruleId=void 0;he.prototype.source=void 0;const en={}.hasOwnProperty,jl=new Map,Sl=/[A-Z]/g,Cl=new Set(["table","tbody","thead","tfoot","tr"]),Il=new Set(["td","th"]),Sr="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Tl(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let i;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=Bl(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=Rl(n,t.jsx,t.jsxs)}const l={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:i,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Qt:qi,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=Cr(l,e,void 0);return o&&typeof o!="string"?o:l.create(e,l.Fragment,{children:o||void 0},void 0)}function Cr(e,t,n){if(t.type==="element")return zl(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return El(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Ll(e,t,n);if(t.type==="mdxjsEsm")return Ml(e,t);if(t.type==="root")return Pl(e,t,n);if(t.type==="text")return Al(e,t)}function zl(e,t,n){const i=e.schema;let l=i;t.tagName.toLowerCase()==="svg"&&i.space==="html"&&(l=Qt,e.schema=l),e.ancestors.push(t);const o=Tr(e,t.tagName,!1),s=Dl(e,t);let a=nn(e,t);return Cl.has(t.tagName)&&(a=a.filter(function(d){return typeof d=="string"?!Di(d):!0})),Ir(e,s,o,t),tn(s,a),e.ancestors.pop(),e.schema=i,e.create(t,o,s,n)}function El(e,t){if(t.data&&t.data.estree&&e.evaluater){const i=t.data.estree.body[0];return i.type,e.evaluater.evaluateExpression(i.expression)}it(e,t.position)}function Ml(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);it(e,t.position)}function Ll(e,t,n){const i=e.schema;let l=i;t.name==="svg"&&i.space==="html"&&(l=Qt,e.schema=l),e.ancestors.push(t);const o=t.name===null?e.Fragment:Tr(e,t.name,!0),s=_l(e,t),a=nn(e,t);return Ir(e,s,o,t),tn(s,a),e.ancestors.pop(),e.schema=i,e.create(t,o,s,n)}function Pl(e,t,n){const i={};return tn(i,nn(e,t)),e.create(t,e.Fragment,i,n)}function Al(e,t){return t.value}function Ir(e,t,n,i){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=i)}function tn(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Rl(e,t,n){return i;function i(l,o,s,a){const u=Array.isArray(s.children)?n:t;return a?u(o,s,a):u(o,s)}}function Bl(e,t){return n;function n(i,l,o,s){const a=Array.isArray(o.children),d=Zt(i);return t(l,o,s,a,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function Dl(e,t){const n={};let i,l;for(l in t.properties)if(l!=="children"&&en.call(t.properties,l)){const o=Fl(e,l,t.properties[l]);if(o){const[s,a]=o;e.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&Il.has(t.tagName)?i=a:n[s]=a}}if(i){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function _l(e,t){const n={};for(const i of t.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&e.evaluater){const o=i.data.estree.body[0];o.type;const s=o.expression;s.type;const a=s.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else it(e,t.position);else{const l=i.name;let o;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&e.evaluater){const a=i.value.data.estree.body[0];a.type,o=e.evaluater.evaluateExpression(a.expression)}else it(e,t.position);else o=i.value===null?!0:i.value;n[l]=o}return n}function nn(e,t){const n=[];let i=-1;const l=e.passKeys?new Map:jl;for(;++i<t.children.length;){const o=t.children[i];let s;if(e.passKeys){const d=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(d){const u=l.get(d)||0;s=d+"-"+u,l.set(d,u+1)}}const a=Cr(e,o,s);a!==void 0&&n.push(a)}return n}function Fl(e,t,n){const i=Ui(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?Li(n):Ki(n)),i.property==="style"){let l=typeof n=="object"?n:Nl(e,String(n));return e.stylePropertyNameCase==="css"&&(l=Wl(l)),["style",l]}return[e.elementAttributeNameCase==="react"&&i.space?Wi[i.property]||i.property:i.attribute,n]}}function Nl(e,t){try{return kl(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const i=n,l=new he("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw l.file=e.filePath||void 0,l.url=Sr+"#cannot-parse-style-attribute",l}}function Tr(e,t,n){let i;if(!n)i={type:"Literal",value:t};else if(t.includes(".")){const l=t.split(".");let o=-1,s;for(;++o<l.length;){const a=xn(l[o])?{type:"Identifier",name:l[o]}:{type:"Literal",value:l[o]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}i=s}else i=xn(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(i.type==="Literal"){const l=i.value;return en.call(e.components,l)?e.components[l]:l}if(e.evaluater)return e.evaluater.evaluateExpression(i);it(e)}function it(e,t){const n=new he("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Sr+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Wl(e){const t={};let n;for(n in e)en.call(e,n)&&(t[Ol(n)]=e[n]);return t}function Ol(e){let t=e.replace(Sl,Hl);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Hl(e){return"-"+e.toLowerCase()}const It={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Ul={};function $l(e,t){const n=Ul,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,l=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return zr(e,i,l)}function zr(e,t,n){if(Vl(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return zn(e.children,t,n)}return Array.isArray(e)?zn(e,t,n):""}function zn(e,t,n){const i=[];let l=-1;for(;++l<e.length;)i[l]=zr(e[l],t,n);return i.join("")}function Vl(e){return!!(e&&typeof e=="object")}const En=document.createElement("i");function rn(e){const t="&"+e+";";En.innerHTML=t;const n=En.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Pe(e,t,n,i){const l=e.length;let o=0,s;if(t<0?t=-t>l?0:l+t:t=t>l?l:t,n=n>0?n:0,i.length<1e4)s=Array.from(i),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);o<i.length;)s=i.slice(o,o+1e4),s.unshift(t,0),e.splice(...s),o+=1e4,t+=1e4}function Ie(e,t){return e.length>0?(Pe(e,e.length,0,t),e):t}const Mn={}.hasOwnProperty;function ql(e){const t={};let n=-1;for(;++n<e.length;)Kl(t,e[n]);return t}function Kl(e,t){let n;for(n in t){const l=(Mn.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let s;if(o)for(s in o){Mn.call(l,s)||(l[s]=[]);const a=o[s];Gl(l[s],Array.isArray(a)?a:a?[a]:[])}}}function Gl(e,t){let n=-1;const i=[];for(;++n<t.length;)(t[n].add==="after"?e:i).push(t[n]);Pe(e,0,0,i)}function Er(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function Ye(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Le=Oe(/[A-Za-z]/),je=Oe(/[\dA-Za-z]/),Yl=Oe(/[#-'*+\--9=?A-Z^-~]/);function $t(e){return e!==null&&(e<32||e===127)}const Vt=Oe(/\d/),Xl=Oe(/[\dA-Fa-f]/),Ql=Oe(/[!-/:-@[-`{-~]/);function $(e){return e!==null&&e<-2}function be(e){return e!==null&&(e<0||e===32)}function J(e){return e===-2||e===-1||e===32}const Jl=Oe(new RegExp("\\p{P}|\\p{S}","u")),Zl=Oe(/\s/);function Oe(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Qe(e){const t=[];let n=-1,i=0,l=0;for(;++n<e.length;){const o=e.charCodeAt(n);let s="";if(o===37&&je(e.charCodeAt(n+1))&&je(e.charCodeAt(n+2)))l=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const a=e.charCodeAt(n+1);o<56320&&a>56319&&a<57344?(s=String.fromCharCode(o,a),l=1):s="�"}else s=String.fromCharCode(o);s&&(t.push(e.slice(i,n),encodeURIComponent(s)),i=n+l+1,s=""),l&&(n+=l,l=0)}return t.join("")+e.slice(i)}function le(e,t,n,i){const l=i?i-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(d){return J(d)?(e.enter(n),a(d)):t(d)}function a(d){return J(d)&&o++<l?(e.consume(d),a):(e.exit(n),t(d))}}const eo={tokenize:to};function to(e){const t=e.attempt(this.parser.constructs.contentInitial,i,l);let n;return t;function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),le(e,t,"linePrefix")}function l(a){return e.enter("paragraph"),o(a)}function o(a){const d=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=d),n=d,s(a)}function s(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return $(a)?(e.consume(a),e.exit("chunkText"),o):(e.consume(a),s)}}const no={tokenize:ro},Ln={tokenize:io};function ro(e){const t=this,n=[];let i=0,l,o,s;return a;function a(E){if(i<n.length){const Y=n[i];return t.containerState=Y[1],e.attempt(Y[0].continuation,d,u)(E)}return u(E)}function d(E){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,l&&W();const Y=t.events.length;let G=Y,k;for(;G--;)if(t.events[G][0]==="exit"&&t.events[G][1].type==="chunkFlow"){k=t.events[G][1].end;break}w(i);let D=Y;for(;D<t.events.length;)t.events[D][1].end={...k},D++;return Pe(t.events,G+1,0,t.events.slice(Y)),t.events.length=D,u(E)}return a(E)}function u(E){if(i===n.length){if(!l)return m(E);if(l.currentConstruct&&l.currentConstruct.concrete)return x(E);t.interrupt=!!(l.currentConstruct&&!l._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Ln,p,h)(E)}function p(E){return l&&W(),w(i),m(E)}function h(E){return t.parser.lazy[t.now().line]=i!==n.length,s=t.now().offset,x(E)}function m(E){return t.containerState={},e.attempt(Ln,c,x)(E)}function c(E){return i++,n.push([t.currentConstruct,t.containerState]),m(E)}function x(E){if(E===null){l&&W(),w(0),e.consume(E);return}return l=l||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:l,contentType:"flow",previous:o}),y(E)}function y(E){if(E===null){v(e.exit("chunkFlow"),!0),w(0),e.consume(E);return}return $(E)?(e.consume(E),v(e.exit("chunkFlow")),i=0,t.interrupt=void 0,a):(e.consume(E),y)}function v(E,Y){const G=t.sliceStream(E);if(Y&&G.push(null),E.previous=o,o&&(o.next=E),o=E,l.defineSkip(E.start),l.write(G),t.parser.lazy[E.start.line]){let k=l.events.length;for(;k--;)if(l.events[k][1].start.offset<s&&(!l.events[k][1].end||l.events[k][1].end.offset>s))return;const D=t.events.length;let z=D,P,L;for(;z--;)if(t.events[z][0]==="exit"&&t.events[z][1].type==="chunkFlow"){if(P){L=t.events[z][1].end;break}P=!0}for(w(i),k=D;k<t.events.length;)t.events[k][1].end={...L},k++;Pe(t.events,z+1,0,t.events.slice(D)),t.events.length=k}}function w(E){let Y=n.length;for(;Y-- >E;){const G=n[Y];t.containerState=G[1],G[0].exit.call(t,e)}n.length=E}function W(){l.write([null]),o=void 0,l=void 0,t.containerState._closeFlow=void 0}}function io(e,t,n){return le(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Pn(e){if(e===null||be(e)||Zl(e))return 1;if(Jl(e))return 2}function ln(e,t,n){const i=[];let l=-1;for(;++l<e.length;){const o=e[l].resolveAll;o&&!i.includes(o)&&(t=o(t,n),i.push(o))}return t}const qt={name:"attention",resolveAll:lo,tokenize:oo};function lo(e,t){let n=-1,i,l,o,s,a,d,u,p;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(i=n;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[i][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;d=e[i][1].end.offset-e[i][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[i][1].end},m={...e[n][1].start};An(h,-d),An(m,d),s={type:d>1?"strongSequence":"emphasisSequence",start:h,end:{...e[i][1].end}},a={type:d>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:m},o={type:d>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[n][1].start}},l={type:d>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},e[i][1].end={...s.start},e[n][1].start={...a.end},u=[],e[i][1].end.offset-e[i][1].start.offset&&(u=Ie(u,[["enter",e[i][1],t],["exit",e[i][1],t]])),u=Ie(u,[["enter",l,t],["enter",s,t],["exit",s,t],["enter",o,t]]),u=Ie(u,ln(t.parser.constructs.insideSpan.null,e.slice(i+1,n),t)),u=Ie(u,[["exit",o,t],["enter",a,t],["exit",a,t],["exit",l,t]]),e[n][1].end.offset-e[n][1].start.offset?(p=2,u=Ie(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):p=0,Pe(e,i-1,n-i+3,u),n=i+u.length-p-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function oo(e,t){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,l=Pn(i);let o;return s;function s(d){return o=d,e.enter("attentionSequence"),a(d)}function a(d){if(d===o)return e.consume(d),a;const u=e.exit("attentionSequence"),p=Pn(d),h=!p||p===2&&l||n.includes(d),m=!l||l===2&&p||n.includes(i);return u._open=!!(o===42?h:h&&(l||!m)),u._close=!!(o===42?m:m&&(p||!h)),t(d)}}function An(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const so={name:"autolink",tokenize:ao};function ao(e,t,n){let i=0;return l;function l(c){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(c),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(c){return Le(c)?(e.consume(c),s):c===64?n(c):u(c)}function s(c){return c===43||c===45||c===46||je(c)?(i=1,a(c)):u(c)}function a(c){return c===58?(e.consume(c),i=0,d):(c===43||c===45||c===46||je(c))&&i++<32?(e.consume(c),a):(i=0,u(c))}function d(c){return c===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(c),e.exit("autolinkMarker"),e.exit("autolink"),t):c===null||c===32||c===60||$t(c)?n(c):(e.consume(c),d)}function u(c){return c===64?(e.consume(c),p):Yl(c)?(e.consume(c),u):n(c)}function p(c){return je(c)?h(c):n(c)}function h(c){return c===46?(e.consume(c),i=0,p):c===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(c),e.exit("autolinkMarker"),e.exit("autolink"),t):m(c)}function m(c){if((c===45||je(c))&&i++<63){const x=c===45?m:h;return e.consume(c),x}return n(c)}}const kt={partial:!0,tokenize:co};function co(e,t,n){return i;function i(o){return J(o)?le(e,l,"linePrefix")(o):l(o)}function l(o){return o===null||$(o)?t(o):n(o)}}const Mr={continuation:{tokenize:po},exit:ho,name:"blockQuote",tokenize:uo};function uo(e,t,n){const i=this;return l;function l(s){if(s===62){const a=i.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),o}return n(s)}function o(s){return J(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function po(e,t,n){const i=this;return l;function l(s){return J(s)?le(e,o,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return e.attempt(Mr,t,n)(s)}}function ho(e){e.exit("blockQuote")}const Lr={name:"characterEscape",tokenize:mo};function mo(e,t,n){return i;function i(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),l}function l(o){return Ql(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const Pr={name:"characterReference",tokenize:go};function go(e,t,n){const i=this;let l=0,o,s;return a;function a(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),d}function d(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),o=31,s=je,p(h))}function u(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,s=Xl,p):(e.enter("characterReferenceValue"),o=7,s=Vt,p(h))}function p(h){if(h===59&&l){const m=e.exit("characterReferenceValue");return s===je&&!rn(i.sliceSerialize(m))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(h)&&l++<o?(e.consume(h),p):n(h)}}const Rn={partial:!0,tokenize:xo},Bn={concrete:!0,name:"codeFenced",tokenize:fo};function fo(e,t,n){const i=this,l={partial:!0,tokenize:G};let o=0,s=0,a;return d;function d(k){return u(k)}function u(k){const D=i.events[i.events.length-1];return o=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,a=k,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),p(k)}function p(k){return k===a?(s++,e.consume(k),p):s<3?n(k):(e.exit("codeFencedFenceSequence"),J(k)?le(e,h,"whitespace")(k):h(k))}function h(k){return k===null||$(k)?(e.exit("codeFencedFence"),i.interrupt?t(k):e.check(Rn,y,Y)(k)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(k))}function m(k){return k===null||$(k)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(k)):J(k)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),le(e,c,"whitespace")(k)):k===96&&k===a?n(k):(e.consume(k),m)}function c(k){return k===null||$(k)?h(k):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(k))}function x(k){return k===null||$(k)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(k)):k===96&&k===a?n(k):(e.consume(k),x)}function y(k){return e.attempt(l,Y,v)(k)}function v(k){return e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),w}function w(k){return o>0&&J(k)?le(e,W,"linePrefix",o+1)(k):W(k)}function W(k){return k===null||$(k)?e.check(Rn,y,Y)(k):(e.enter("codeFlowValue"),E(k))}function E(k){return k===null||$(k)?(e.exit("codeFlowValue"),W(k)):(e.consume(k),E)}function Y(k){return e.exit("codeFenced"),t(k)}function G(k,D,z){let P=0;return L;function L(C){return k.enter("lineEnding"),k.consume(C),k.exit("lineEnding"),A}function A(C){return k.enter("codeFencedFence"),J(C)?le(k,R,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):R(C)}function R(C){return C===a?(k.enter("codeFencedFenceSequence"),j(C)):z(C)}function j(C){return C===a?(P++,k.consume(C),j):P>=s?(k.exit("codeFencedFenceSequence"),J(C)?le(k,I,"whitespace")(C):I(C)):z(C)}function I(C){return C===null||$(C)?(k.exit("codeFencedFence"),D(C)):z(C)}}}function xo(e,t,n){const i=this;return l;function l(s){return s===null?n(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o)}function o(s){return i.parser.lazy[i.now().line]?n(s):t(s)}}const Tt={name:"codeIndented",tokenize:bo},yo={partial:!0,tokenize:vo};function bo(e,t,n){const i=this;return l;function l(u){return e.enter("codeIndented"),le(e,o,"linePrefix",5)(u)}function o(u){const p=i.events[i.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?s(u):n(u)}function s(u){return u===null?d(u):$(u)?e.attempt(yo,s,d)(u):(e.enter("codeFlowValue"),a(u))}function a(u){return u===null||$(u)?(e.exit("codeFlowValue"),s(u)):(e.consume(u),a)}function d(u){return e.exit("codeIndented"),t(u)}}function vo(e,t,n){const i=this;return l;function l(s){return i.parser.lazy[i.now().line]?n(s):$(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),l):le(e,o,"linePrefix",5)(s)}function o(s){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):$(s)?l(s):n(s)}}const ko={name:"codeText",previous:jo,resolve:wo,tokenize:So};function wo(e){let t=e.length-4,n=3,i,l;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(i=n;++i<t;)if(e[i][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(i=n-1,t++;++i<=t;)l===void 0?i!==t&&e[i][1].type!=="lineEnding"&&(l=i):(i===t||e[i][1].type==="lineEnding")&&(e[l][1].type="codeTextData",i!==l+2&&(e[l][1].end=e[i-1][1].end,e.splice(l+2,i-l-2),t-=i-l-2,i=l+2),l=void 0);return e}function jo(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function So(e,t,n){let i=0,l,o;return s;function s(h){return e.enter("codeText"),e.enter("codeTextSequence"),a(h)}function a(h){return h===96?(e.consume(h),i++,a):(e.exit("codeTextSequence"),d(h))}function d(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),d):h===96?(o=e.enter("codeTextSequence"),l=0,p(h)):$(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),d):(e.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||$(h)?(e.exit("codeTextData"),d(h)):(e.consume(h),u)}function p(h){return h===96?(e.consume(h),l++,p):l===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(o.type="codeTextData",u(h))}}class Co{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(t,i):t>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(t,n,i){const l=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-l,Number.POSITIVE_INFINITY);return i&&Je(this.left,i),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Je(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Je(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Je(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Je(this.left,n.reverse())}}}function Je(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Ar(e){const t={};let n=-1,i,l,o,s,a,d,u;const p=new Co(e);for(;++n<p.length;){for(;n in t;)n=t[n];if(i=p.get(n),n&&i[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(d=i[1]._tokenizer.events,o=0,o<d.length&&d[o][1].type==="lineEndingBlank"&&(o+=2),o<d.length&&d[o][1].type==="content"))for(;++o<d.length&&d[o][1].type!=="content";)d[o][1].type==="chunkText"&&(d[o][1]._isInFirstContentOfListItem=!0,o++);if(i[0]==="enter")i[1].contentType&&(Object.assign(t,Io(p,n)),n=t[n],u=!0);else if(i[1]._container){for(o=n,l=void 0;o--;)if(s=p.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(l&&(p.get(l)[1].type="lineEndingBlank"),s[1].type="lineEnding",l=o);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;l&&(i[1].end={...p.get(l)[1].start},a=p.slice(l,n),a.unshift(i),p.splice(l,n-l+1,a))}}return Pe(e,0,Number.POSITIVE_INFINITY,p.slice(0)),!u}function Io(e,t){const n=e.get(t)[1],i=e.get(t)[2];let l=t-1;const o=[];let s=n._tokenizer;s||(s=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,d=[],u={};let p,h,m=-1,c=n,x=0,y=0;const v=[y];for(;c;){for(;e.get(++l)[1]!==c;);o.push(l),c._tokenizer||(p=i.sliceStream(c),c.next||p.push(null),h&&s.defineSkip(c.start),c._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(p),c._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),h=c,c=c.next}for(c=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(y=m+1,v.push(y),c._tokenizer=void 0,c.previous=void 0,c=c.next);for(s.events=[],c?(c._tokenizer=void 0,c.previous=void 0):v.pop(),m=v.length;m--;){const w=a.slice(v[m],v[m+1]),W=o.pop();d.push([W,W+w.length-1]),e.splice(W,2,w)}for(d.reverse(),m=-1;++m<d.length;)u[x+d[m][0]]=x+d[m][1],x+=d[m][1]-d[m][0]-1;return u}const To={resolve:Eo,tokenize:Mo},zo={partial:!0,tokenize:Lo};function Eo(e){return Ar(e),e}function Mo(e,t){let n;return i;function i(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),l(a)}function l(a){return a===null?o(a):$(a)?e.check(zo,s,o)(a):(e.consume(a),l)}function o(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function s(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,l}}function Lo(e,t,n){const i=this;return l;function l(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),le(e,o,"linePrefix")}function o(s){if(s===null||$(s))return n(s);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):e.interrupt(i.parser.constructs.flow,n,t)(s)}}function Rr(e,t,n,i,l,o,s,a,d){const u=d||Number.POSITIVE_INFINITY;let p=0;return h;function h(w){return w===60?(e.enter(i),e.enter(l),e.enter(o),e.consume(w),e.exit(o),m):w===null||w===32||w===41||$t(w)?n(w):(e.enter(i),e.enter(s),e.enter(a),e.enter("chunkString",{contentType:"string"}),y(w))}function m(w){return w===62?(e.enter(o),e.consume(w),e.exit(o),e.exit(l),e.exit(i),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),c(w))}function c(w){return w===62?(e.exit("chunkString"),e.exit(a),m(w)):w===null||w===60||$(w)?n(w):(e.consume(w),w===92?x:c)}function x(w){return w===60||w===62||w===92?(e.consume(w),c):c(w)}function y(w){return!p&&(w===null||w===41||be(w))?(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(i),t(w)):p<u&&w===40?(e.consume(w),p++,y):w===41?(e.consume(w),p--,y):w===null||w===32||w===40||$t(w)?n(w):(e.consume(w),w===92?v:y)}function v(w){return w===40||w===41||w===92?(e.consume(w),y):y(w)}}function Br(e,t,n,i,l,o){const s=this;let a=0,d;return u;function u(c){return e.enter(i),e.enter(l),e.consume(c),e.exit(l),e.enter(o),p}function p(c){return a>999||c===null||c===91||c===93&&!d||c===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?n(c):c===93?(e.exit(o),e.enter(l),e.consume(c),e.exit(l),e.exit(i),t):$(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),p):(e.enter("chunkString",{contentType:"string"}),h(c))}function h(c){return c===null||c===91||c===93||$(c)||a++>999?(e.exit("chunkString"),p(c)):(e.consume(c),d||(d=!J(c)),c===92?m:h)}function m(c){return c===91||c===92||c===93?(e.consume(c),a++,h):h(c)}}function Dr(e,t,n,i,l,o){let s;return a;function a(m){return m===34||m===39||m===40?(e.enter(i),e.enter(l),e.consume(m),e.exit(l),s=m===40?41:m,d):n(m)}function d(m){return m===s?(e.enter(l),e.consume(m),e.exit(l),e.exit(i),t):(e.enter(o),u(m))}function u(m){return m===s?(e.exit(o),d(s)):m===null?n(m):$(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),le(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),p(m))}function p(m){return m===s||m===null||$(m)?(e.exit("chunkString"),u(m)):(e.consume(m),m===92?h:p)}function h(m){return m===s||m===92?(e.consume(m),p):p(m)}}function nt(e,t){let n;return i;function i(l){return $(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),n=!0,i):J(l)?le(e,i,n?"linePrefix":"lineSuffix")(l):t(l)}}const Po={name:"definition",tokenize:Ro},Ao={partial:!0,tokenize:Bo};function Ro(e,t,n){const i=this;let l;return o;function o(c){return e.enter("definition"),s(c)}function s(c){return Br.call(i,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(c)}function a(c){return l=Ye(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),c===58?(e.enter("definitionMarker"),e.consume(c),e.exit("definitionMarker"),d):n(c)}function d(c){return be(c)?nt(e,u)(c):u(c)}function u(c){return Rr(e,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(c)}function p(c){return e.attempt(Ao,h,h)(c)}function h(c){return J(c)?le(e,m,"whitespace")(c):m(c)}function m(c){return c===null||$(c)?(e.exit("definition"),i.parser.defined.push(l),t(c)):n(c)}}function Bo(e,t,n){return i;function i(a){return be(a)?nt(e,l)(a):n(a)}function l(a){return Dr(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return J(a)?le(e,s,"whitespace")(a):s(a)}function s(a){return a===null||$(a)?t(a):n(a)}}const Do={name:"hardBreakEscape",tokenize:_o};function _o(e,t,n){return i;function i(o){return e.enter("hardBreakEscape"),e.consume(o),l}function l(o){return $(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const Fo={name:"headingAtx",resolve:No,tokenize:Wo};function No(e,t){let n=e.length-2,i=3,l,o;return e[i][1].type==="whitespace"&&(i+=2),n-2>i&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&e[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(l={type:"atxHeadingText",start:e[i][1].start,end:e[n][1].end},o={type:"chunkText",start:e[i][1].start,end:e[n][1].end,contentType:"text"},Pe(e,i,n-i+1,[["enter",l,t],["enter",o,t],["exit",o,t],["exit",l,t]])),e}function Wo(e,t,n){let i=0;return l;function l(p){return e.enter("atxHeading"),o(p)}function o(p){return e.enter("atxHeadingSequence"),s(p)}function s(p){return p===35&&i++<6?(e.consume(p),s):p===null||be(p)?(e.exit("atxHeadingSequence"),a(p)):n(p)}function a(p){return p===35?(e.enter("atxHeadingSequence"),d(p)):p===null||$(p)?(e.exit("atxHeading"),t(p)):J(p)?le(e,a,"whitespace")(p):(e.enter("atxHeadingText"),u(p))}function d(p){return p===35?(e.consume(p),d):(e.exit("atxHeadingSequence"),a(p))}function u(p){return p===null||p===35||be(p)?(e.exit("atxHeadingText"),a(p)):(e.consume(p),u)}}const Oo=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Dn=["pre","script","style","textarea"],Ho={concrete:!0,name:"htmlFlow",resolveTo:Vo,tokenize:qo},Uo={partial:!0,tokenize:Go},$o={partial:!0,tokenize:Ko};function Vo(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function qo(e,t,n){const i=this;let l,o,s,a,d;return u;function u(f){return p(f)}function p(f){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(f),h}function h(f){return f===33?(e.consume(f),m):f===47?(e.consume(f),o=!0,y):f===63?(e.consume(f),l=3,i.interrupt?t:g):Le(f)?(e.consume(f),s=String.fromCharCode(f),v):n(f)}function m(f){return f===45?(e.consume(f),l=2,c):f===91?(e.consume(f),l=5,a=0,x):Le(f)?(e.consume(f),l=4,i.interrupt?t:g):n(f)}function c(f){return f===45?(e.consume(f),i.interrupt?t:g):n(f)}function x(f){const ce="CDATA[";return f===ce.charCodeAt(a++)?(e.consume(f),a===ce.length?i.interrupt?t:R:x):n(f)}function y(f){return Le(f)?(e.consume(f),s=String.fromCharCode(f),v):n(f)}function v(f){if(f===null||f===47||f===62||be(f)){const ce=f===47,oe=s.toLowerCase();return!ce&&!o&&Dn.includes(oe)?(l=1,i.interrupt?t(f):R(f)):Oo.includes(s.toLowerCase())?(l=6,ce?(e.consume(f),w):i.interrupt?t(f):R(f)):(l=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(f):o?W(f):E(f))}return f===45||je(f)?(e.consume(f),s+=String.fromCharCode(f),v):n(f)}function w(f){return f===62?(e.consume(f),i.interrupt?t:R):n(f)}function W(f){return J(f)?(e.consume(f),W):L(f)}function E(f){return f===47?(e.consume(f),L):f===58||f===95||Le(f)?(e.consume(f),Y):J(f)?(e.consume(f),E):L(f)}function Y(f){return f===45||f===46||f===58||f===95||je(f)?(e.consume(f),Y):G(f)}function G(f){return f===61?(e.consume(f),k):J(f)?(e.consume(f),G):E(f)}function k(f){return f===null||f===60||f===61||f===62||f===96?n(f):f===34||f===39?(e.consume(f),d=f,D):J(f)?(e.consume(f),k):z(f)}function D(f){return f===d?(e.consume(f),d=null,P):f===null||$(f)?n(f):(e.consume(f),D)}function z(f){return f===null||f===34||f===39||f===47||f===60||f===61||f===62||f===96||be(f)?G(f):(e.consume(f),z)}function P(f){return f===47||f===62||J(f)?E(f):n(f)}function L(f){return f===62?(e.consume(f),A):n(f)}function A(f){return f===null||$(f)?R(f):J(f)?(e.consume(f),A):n(f)}function R(f){return f===45&&l===2?(e.consume(f),B):f===60&&l===1?(e.consume(f),V):f===62&&l===4?(e.consume(f),Z):f===63&&l===3?(e.consume(f),g):f===93&&l===5?(e.consume(f),F):$(f)&&(l===6||l===7)?(e.exit("htmlFlowData"),e.check(Uo,ne,j)(f)):f===null||$(f)?(e.exit("htmlFlowData"),j(f)):(e.consume(f),R)}function j(f){return e.check($o,I,ne)(f)}function I(f){return e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),C}function C(f){return f===null||$(f)?j(f):(e.enter("htmlFlowData"),R(f))}function B(f){return f===45?(e.consume(f),g):R(f)}function V(f){return f===47?(e.consume(f),s="",H):R(f)}function H(f){if(f===62){const ce=s.toLowerCase();return Dn.includes(ce)?(e.consume(f),Z):R(f)}return Le(f)&&s.length<8?(e.consume(f),s+=String.fromCharCode(f),H):R(f)}function F(f){return f===93?(e.consume(f),g):R(f)}function g(f){return f===62?(e.consume(f),Z):f===45&&l===2?(e.consume(f),g):R(f)}function Z(f){return f===null||$(f)?(e.exit("htmlFlowData"),ne(f)):(e.consume(f),Z)}function ne(f){return e.exit("htmlFlow"),t(f)}}function Ko(e,t,n){const i=this;return l;function l(s){return $(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o):n(s)}function o(s){return i.parser.lazy[i.now().line]?n(s):t(s)}}function Go(e,t,n){return i;function i(l){return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),e.attempt(kt,t,n)}}const Yo={name:"htmlText",tokenize:Xo};function Xo(e,t,n){const i=this;let l,o,s;return a;function a(g){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(g),d}function d(g){return g===33?(e.consume(g),u):g===47?(e.consume(g),G):g===63?(e.consume(g),E):Le(g)?(e.consume(g),z):n(g)}function u(g){return g===45?(e.consume(g),p):g===91?(e.consume(g),o=0,x):Le(g)?(e.consume(g),W):n(g)}function p(g){return g===45?(e.consume(g),c):n(g)}function h(g){return g===null?n(g):g===45?(e.consume(g),m):$(g)?(s=h,V(g)):(e.consume(g),h)}function m(g){return g===45?(e.consume(g),c):h(g)}function c(g){return g===62?B(g):g===45?m(g):h(g)}function x(g){const Z="CDATA[";return g===Z.charCodeAt(o++)?(e.consume(g),o===Z.length?y:x):n(g)}function y(g){return g===null?n(g):g===93?(e.consume(g),v):$(g)?(s=y,V(g)):(e.consume(g),y)}function v(g){return g===93?(e.consume(g),w):y(g)}function w(g){return g===62?B(g):g===93?(e.consume(g),w):y(g)}function W(g){return g===null||g===62?B(g):$(g)?(s=W,V(g)):(e.consume(g),W)}function E(g){return g===null?n(g):g===63?(e.consume(g),Y):$(g)?(s=E,V(g)):(e.consume(g),E)}function Y(g){return g===62?B(g):E(g)}function G(g){return Le(g)?(e.consume(g),k):n(g)}function k(g){return g===45||je(g)?(e.consume(g),k):D(g)}function D(g){return $(g)?(s=D,V(g)):J(g)?(e.consume(g),D):B(g)}function z(g){return g===45||je(g)?(e.consume(g),z):g===47||g===62||be(g)?P(g):n(g)}function P(g){return g===47?(e.consume(g),B):g===58||g===95||Le(g)?(e.consume(g),L):$(g)?(s=P,V(g)):J(g)?(e.consume(g),P):B(g)}function L(g){return g===45||g===46||g===58||g===95||je(g)?(e.consume(g),L):A(g)}function A(g){return g===61?(e.consume(g),R):$(g)?(s=A,V(g)):J(g)?(e.consume(g),A):P(g)}function R(g){return g===null||g===60||g===61||g===62||g===96?n(g):g===34||g===39?(e.consume(g),l=g,j):$(g)?(s=R,V(g)):J(g)?(e.consume(g),R):(e.consume(g),I)}function j(g){return g===l?(e.consume(g),l=void 0,C):g===null?n(g):$(g)?(s=j,V(g)):(e.consume(g),j)}function I(g){return g===null||g===34||g===39||g===60||g===61||g===96?n(g):g===47||g===62||be(g)?P(g):(e.consume(g),I)}function C(g){return g===47||g===62||be(g)?P(g):n(g)}function B(g){return g===62?(e.consume(g),e.exit("htmlTextData"),e.exit("htmlText"),t):n(g)}function V(g){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),H}function H(g){return J(g)?le(e,F,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g):F(g)}function F(g){return e.enter("htmlTextData"),s(g)}}const on={name:"labelEnd",resolveAll:es,resolveTo:ts,tokenize:ns},Qo={tokenize:rs},Jo={tokenize:is},Zo={tokenize:ls};function es(e){let t=-1;const n=[];for(;++t<e.length;){const i=e[t][1];if(n.push(e[t]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const l=i.type==="labelImage"?4:2;i.type="data",t+=l}}return e.length!==n.length&&Pe(e,0,e.length,n),e}function ts(e,t){let n=e.length,i=0,l,o,s,a;for(;n--;)if(l=e[n][1],o){if(l.type==="link"||l.type==="labelLink"&&l._inactive)break;e[n][0]==="enter"&&l.type==="labelLink"&&(l._inactive=!0)}else if(s){if(e[n][0]==="enter"&&(l.type==="labelImage"||l.type==="labelLink")&&!l._balanced&&(o=n,l.type!=="labelLink")){i=2;break}}else l.type==="labelEnd"&&(s=n);const d={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[o][1].start},end:{...e[s][1].end}},p={type:"labelText",start:{...e[o+i+2][1].end},end:{...e[s-2][1].start}};return a=[["enter",d,t],["enter",u,t]],a=Ie(a,e.slice(o+1,o+i+3)),a=Ie(a,[["enter",p,t]]),a=Ie(a,ln(t.parser.constructs.insideSpan.null,e.slice(o+i+4,s-3),t)),a=Ie(a,[["exit",p,t],e[s-2],e[s-1],["exit",u,t]]),a=Ie(a,e.slice(s+1)),a=Ie(a,[["exit",d,t]]),Pe(e,o,e.length,a),e}function ns(e,t,n){const i=this;let l=i.events.length,o,s;for(;l--;)if((i.events[l][1].type==="labelImage"||i.events[l][1].type==="labelLink")&&!i.events[l][1]._balanced){o=i.events[l][1];break}return a;function a(m){return o?o._inactive?h(m):(s=i.parser.defined.includes(Ye(i.sliceSerialize({start:o.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),d):n(m)}function d(m){return m===40?e.attempt(Qo,p,s?p:h)(m):m===91?e.attempt(Jo,p,s?u:h)(m):s?p(m):h(m)}function u(m){return e.attempt(Zo,p,h)(m)}function p(m){return t(m)}function h(m){return o._balanced=!0,n(m)}}function rs(e,t,n){return i;function i(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),l}function l(h){return be(h)?nt(e,o)(h):o(h)}function o(h){return h===41?p(h):Rr(e,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function s(h){return be(h)?nt(e,d)(h):p(h)}function a(h){return n(h)}function d(h){return h===34||h===39||h===40?Dr(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):p(h)}function u(h){return be(h)?nt(e,p)(h):p(h)}function p(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function is(e,t,n){const i=this;return l;function l(a){return Br.call(i,e,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return i.parser.defined.includes(Ye(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function s(a){return n(a)}}function ls(e,t,n){return i;function i(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),l}function l(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const os={name:"labelStartImage",resolveAll:on.resolveAll,tokenize:ss};function ss(e,t,n){const i=this;return l;function l(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),o}function o(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),s):n(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(a):t(a)}}const as={name:"labelStartLink",resolveAll:on.resolveAll,tokenize:cs};function cs(e,t,n){const i=this;return l;function l(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(s):t(s)}}const zt={name:"lineEnding",tokenize:us};function us(e,t){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),le(e,t,"linePrefix")}}const mt={name:"thematicBreak",tokenize:ds};function ds(e,t,n){let i=0,l;return o;function o(u){return e.enter("thematicBreak"),s(u)}function s(u){return l=u,a(u)}function a(u){return u===l?(e.enter("thematicBreakSequence"),d(u)):i>=3&&(u===null||$(u))?(e.exit("thematicBreak"),t(u)):n(u)}function d(u){return u===l?(e.consume(u),i++,d):(e.exit("thematicBreakSequence"),J(u)?le(e,a,"whitespace")(u):a(u))}}const ye={continuation:{tokenize:gs},exit:xs,name:"list",tokenize:ms},ps={partial:!0,tokenize:ys},hs={partial:!0,tokenize:fs};function ms(e,t,n){const i=this,l=i.events[i.events.length-1];let o=l&&l[1].type==="linePrefix"?l[2].sliceSerialize(l[1],!0).length:0,s=0;return a;function a(c){const x=i.containerState.type||(c===42||c===43||c===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!i.containerState.marker||c===i.containerState.marker:Vt(c)){if(i.containerState.type||(i.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),c===42||c===45?e.check(mt,n,u)(c):u(c);if(!i.interrupt||c===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(c)}return n(c)}function d(c){return Vt(c)&&++s<10?(e.consume(c),d):(!i.interrupt||s<2)&&(i.containerState.marker?c===i.containerState.marker:c===41||c===46)?(e.exit("listItemValue"),u(c)):n(c)}function u(c){return e.enter("listItemMarker"),e.consume(c),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||c,e.check(kt,i.interrupt?n:p,e.attempt(ps,m,h))}function p(c){return i.containerState.initialBlankLine=!0,o++,m(c)}function h(c){return J(c)?(e.enter("listItemPrefixWhitespace"),e.consume(c),e.exit("listItemPrefixWhitespace"),m):n(c)}function m(c){return i.containerState.size=o+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(c)}}function gs(e,t,n){const i=this;return i.containerState._closeFlow=void 0,e.check(kt,l,o);function l(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,le(e,t,"listItemIndent",i.containerState.size+1)(a)}function o(a){return i.containerState.furtherBlankLines||!J(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,s(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(hs,t,s)(a))}function s(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,le(e,e.attempt(ye,t,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function fs(e,t,n){const i=this;return le(e,l,"listItemIndent",i.containerState.size+1);function l(o){const s=i.events[i.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===i.containerState.size?t(o):n(o)}}function xs(e){e.exit(this.containerState.type)}function ys(e,t,n){const i=this;return le(e,l,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function l(o){const s=i.events[i.events.length-1];return!J(o)&&s&&s[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const _n={name:"setextUnderline",resolveTo:bs,tokenize:vs};function bs(e,t){let n=e.length,i,l,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){i=n;break}e[n][1].type==="paragraph"&&(l=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const s={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[l][1].type="setextHeadingText",o?(e.splice(l,0,["enter",s,t]),e.splice(o+1,0,["exit",e[i][1],t]),e[i][1].end={...e[o][1].end}):e[i][1]=s,e.push(["exit",s,t]),e}function vs(e,t,n){const i=this;let l;return o;function o(u){let p=i.events.length,h;for(;p--;)if(i.events[p][1].type!=="lineEnding"&&i.events[p][1].type!=="linePrefix"&&i.events[p][1].type!=="content"){h=i.events[p][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||h)?(e.enter("setextHeadingLine"),l=u,s(u)):n(u)}function s(u){return e.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===l?(e.consume(u),a):(e.exit("setextHeadingLineSequence"),J(u)?le(e,d,"lineSuffix")(u):d(u))}function d(u){return u===null||$(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const ks={tokenize:ws};function ws(e){const t=this,n=e.attempt(kt,i,e.attempt(this.parser.constructs.flowInitial,l,le(e,e.attempt(this.parser.constructs.flow,l,e.attempt(To,l)),"linePrefix")));return n;function i(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function l(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const js={resolveAll:Fr()},Ss=_r("string"),Cs=_r("text");function _r(e){return{resolveAll:Fr(e==="text"?Is:void 0),tokenize:t};function t(n){const i=this,l=this.parser.constructs[e],o=n.attempt(l,s,a);return s;function s(p){return u(p)?o(p):a(p)}function a(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),d}function d(p){return u(p)?(n.exit("data"),o(p)):(n.consume(p),d)}function u(p){if(p===null)return!0;const h=l[p];let m=-1;if(h)for(;++m<h.length;){const c=h[m];if(!c.previous||c.previous.call(i,i.previous))return!0}return!1}}}function Fr(e){return t;function t(n,i){let l=-1,o;for(;++l<=n.length;)o===void 0?n[l]&&n[l][1].type==="data"&&(o=l,l++):(!n[l]||n[l][1].type!=="data")&&(l!==o+2&&(n[o][1].end=n[l-1][1].end,n.splice(o+2,l-o-2),l=o+2),o=void 0);return e?e(n,i):n}}function Is(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const i=e[n-1][1],l=t.sliceStream(i);let o=l.length,s=-1,a=0,d;for(;o--;){const u=l[o];if(typeof u=="string"){for(s=u.length;u.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(u===-2)d=!0,a++;else if(u!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const u={type:n===e.length||d||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:i.start._bufferIndex+s,_index:i.start._index+o,line:i.end.line,column:i.end.column-a,offset:i.end.offset-a},end:{...i.end}};i.end={...u.start},i.start.offset===i.end.offset?Object.assign(i,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const Ts={42:ye,43:ye,45:ye,48:ye,49:ye,50:ye,51:ye,52:ye,53:ye,54:ye,55:ye,56:ye,57:ye,62:Mr},zs={91:Po},Es={[-2]:Tt,[-1]:Tt,32:Tt},Ms={35:Fo,42:mt,45:[_n,mt],60:Ho,61:_n,95:mt,96:Bn,126:Bn},Ls={38:Pr,92:Lr},Ps={[-5]:zt,[-4]:zt,[-3]:zt,33:os,38:Pr,42:qt,60:[so,Yo],91:as,92:[Do,Lr],93:on,95:qt,96:ko},As={null:[qt,js]},Rs={null:[42,95]},Bs={null:[]},Ds=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Rs,contentInitial:zs,disable:Bs,document:Ts,flow:Ms,flowInitial:Es,insideSpan:As,string:Ls,text:Ps},Symbol.toStringTag,{value:"Module"}));function _s(e,t,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const l={},o=[];let s=[],a=[];const d={attempt:D(G),check:D(k),consume:W,enter:E,exit:Y,interrupt:D(k,{interrupt:!0})},u={code:null,containerState:{},defineSkip:y,events:[],now:x,parser:e,previous:null,sliceSerialize:m,sliceStream:c,write:h};let p=t.tokenize.call(u,d);return t.resolveAll&&o.push(t),u;function h(A){return s=Ie(s,A),v(),s[s.length-1]!==null?[]:(z(t,0),u.events=ln(o,u.events,u),u.events)}function m(A,R){return Ns(c(A),R)}function c(A){return Fs(s,A)}function x(){const{_bufferIndex:A,_index:R,line:j,column:I,offset:C}=i;return{_bufferIndex:A,_index:R,line:j,column:I,offset:C}}function y(A){l[A.line]=A.column,L()}function v(){let A;for(;i._index<s.length;){const R=s[i._index];if(typeof R=="string")for(A=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===A&&i._bufferIndex<R.length;)w(R.charCodeAt(i._bufferIndex));else w(R)}}function w(A){p=p(A)}function W(A){$(A)?(i.line++,i.column=1,i.offset+=A===-3?2:1,L()):A!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===s[i._index].length&&(i._bufferIndex=-1,i._index++)),u.previous=A}function E(A,R){const j=R||{};return j.type=A,j.start=x(),u.events.push(["enter",j,u]),a.push(j),j}function Y(A){const R=a.pop();return R.end=x(),u.events.push(["exit",R,u]),R}function G(A,R){z(A,R.from)}function k(A,R){R.restore()}function D(A,R){return j;function j(I,C,B){let V,H,F,g;return Array.isArray(I)?ne(I):"tokenize"in I?ne([I]):Z(I);function Z(te){return fe;function fe(de){const xe=de!==null&&te[de],pe=de!==null&&te.null,Te=[...Array.isArray(xe)?xe:xe?[xe]:[],...Array.isArray(pe)?pe:pe?[pe]:[]];return ne(Te)(de)}}function ne(te){return V=te,H=0,te.length===0?B:f(te[H])}function f(te){return fe;function fe(de){return g=P(),F=te,te.partial||(u.currentConstruct=te),te.name&&u.parser.constructs.disable.null.includes(te.name)?oe():te.tokenize.call(R?Object.assign(Object.create(u),R):u,d,ce,oe)(de)}}function ce(te){return A(F,g),C}function oe(te){return g.restore(),++H<V.length?f(V[H]):B}}}function z(A,R){A.resolveAll&&!o.includes(A)&&o.push(A),A.resolve&&Pe(u.events,R,u.events.length-R,A.resolve(u.events.slice(R),u)),A.resolveTo&&(u.events=A.resolveTo(u.events,u))}function P(){const A=x(),R=u.previous,j=u.currentConstruct,I=u.events.length,C=Array.from(a);return{from:I,restore:B};function B(){i=A,u.previous=R,u.currentConstruct=j,u.events.length=I,a=C,L()}}function L(){i.line in l&&i.column<2&&(i.column=l[i.line],i.offset+=l[i.line]-1)}}function Fs(e,t){const n=t.start._index,i=t.start._bufferIndex,l=t.end._index,o=t.end._bufferIndex;let s;if(n===l)s=[e[n].slice(i,o)];else{if(s=e.slice(n,l),i>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(i):s.shift()}o>0&&s.push(e[l].slice(0,o))}return s}function Ns(e,t){let n=-1;const i=[];let l;for(;++n<e.length;){const o=e[n];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&l)continue;s=" ";break}default:s=String.fromCharCode(o)}l=o===-2,i.push(s)}return i.join("")}function Ws(e){const i={constructs:ql([Ds,...(e||{}).extensions||[]]),content:l(eo),defined:[],document:l(no),flow:l(ks),lazy:{},string:l(Ss),text:l(Cs)};return i;function l(o){return s;function s(a){return _s(i,o,a)}}}function Os(e){for(;!Ar(e););return e}const Fn=/[\0\t\n\r]/g;function Hs(){let e=1,t="",n=!0,i;return l;function l(o,s,a){const d=[];let u,p,h,m,c;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),h=0,t="",n&&(o.charCodeAt(0)===65279&&h++,n=void 0);h<o.length;){if(Fn.lastIndex=h,u=Fn.exec(o),m=u&&u.index!==void 0?u.index:o.length,c=o.charCodeAt(m),!u){t=o.slice(h);break}if(c===10&&h===m&&i)d.push(-3),i=void 0;else switch(i&&(d.push(-5),i=void 0),h<m&&(d.push(o.slice(h,m)),e+=m-h),c){case 0:{d.push(65533),e++;break}case 9:{for(p=Math.ceil(e/4)*4,d.push(-2);e++<p;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:i=!0,e=1}h=m+1}return a&&(i&&d.push(-5),t&&d.push(t),d.push(null)),d}}const Us=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function $s(e){return e.replace(Us,Vs)}function Vs(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const l=n.charCodeAt(1),o=l===120||l===88;return Er(n.slice(o?2:1),o?16:10)}return rn(n)||e}const Nr={}.hasOwnProperty;function qs(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Ks(n)(Os(Ws(n).document().write(Hs()(e,t,!0))))}function Ks(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Ue),autolinkProtocol:P,autolinkEmail:P,atxHeading:o(He),blockQuote:o(pe),characterEscape:P,characterReference:P,codeFenced:o(Te),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(Te,s),codeText:o(Se,s),codeTextData:P,data:P,codeFlowValue:P,definition:o(Be),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(De),hardBreakEscape:o(_),hardBreakTrailing:o(_),htmlFlow:o(U,s),htmlFlowData:P,htmlText:o(U,s),htmlTextData:P,image:o(re),label:s,link:o(Ue),listItem:o(ze),listItemValue:m,listOrdered:o(st,h),listUnordered:o(st),paragraph:o(Ce),reference:f,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(He),strong:o(Ae),thematicBreak:o(St)},exit:{atxHeading:d(),atxHeadingSequence:G,autolink:d(),autolinkEmail:xe,autolinkProtocol:de,blockQuote:d(),characterEscapeValue:L,characterReferenceMarkerHexadecimal:oe,characterReferenceMarkerNumeric:oe,characterReferenceValue:te,characterReference:fe,codeFenced:d(v),codeFencedFence:y,codeFencedFenceInfo:c,codeFencedFenceMeta:x,codeFlowValue:L,codeIndented:d(w),codeText:d(C),codeTextData:L,data:L,definition:d(),definitionDestinationString:Y,definitionLabelString:W,definitionTitleString:E,emphasis:d(),hardBreakEscape:d(R),hardBreakTrailing:d(R),htmlFlow:d(j),htmlFlowData:L,htmlText:d(I),htmlTextData:L,image:d(V),label:F,labelText:H,lineEnding:A,link:d(B),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:ce,resourceDestinationString:g,resourceTitleString:Z,resource:ne,setextHeading:d(z),setextHeadingLineSequence:D,setextHeadingText:k,strong:d(),thematicBreak:d()}};Wr(t,(e||{}).mdastExtensions||[]);const n={};return i;function i(b){let M={type:"root",children:[]};const q={stack:[M],tokenStack:[],config:t,enter:a,exit:u,buffer:s,resume:p,data:n},X=[];let ee=-1;for(;++ee<b.length;)if(b[ee][1].type==="listOrdered"||b[ee][1].type==="listUnordered")if(b[ee][0]==="enter")X.push(ee);else{const ke=X.pop();ee=l(b,ke,ee)}for(ee=-1;++ee<b.length;){const ke=t[b[ee][0]];Nr.call(ke,b[ee][1].type)&&ke[b[ee][1].type].call(Object.assign({sliceSerialize:b[ee][2].sliceSerialize},q),b[ee][1])}if(q.tokenStack.length>0){const ke=q.tokenStack[q.tokenStack.length-1];(ke[1]||Nn).call(q,void 0,ke[0])}for(M.position={start:Ne(b.length>0?b[0][1].start:{line:1,column:1,offset:0}),end:Ne(b.length>0?b[b.length-2][1].end:{line:1,column:1,offset:0})},ee=-1;++ee<t.transforms.length;)M=t.transforms[ee](M)||M;return M}function l(b,M,q){let X=M-1,ee=-1,ke=!1,Re,N,Q,$e;for(;++X<=q;){const ge=b[X];switch(ge[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ge[0]==="enter"?ee++:ee--,$e=void 0;break}case"lineEndingBlank":{ge[0]==="enter"&&(Re&&!$e&&!ee&&!Q&&(Q=X),$e=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:$e=void 0}if(!ee&&ge[0]==="enter"&&ge[1].type==="listItemPrefix"||ee===-1&&ge[0]==="exit"&&(ge[1].type==="listUnordered"||ge[1].type==="listOrdered")){if(Re){let _e=X;for(N=void 0;_e--;){const ue=b[_e];if(ue[1].type==="lineEnding"||ue[1].type==="lineEndingBlank"){if(ue[0]==="exit")continue;N&&(b[N][1].type="lineEndingBlank",ke=!0),ue[1].type="lineEnding",N=_e}else if(!(ue[1].type==="linePrefix"||ue[1].type==="blockQuotePrefix"||ue[1].type==="blockQuotePrefixWhitespace"||ue[1].type==="blockQuoteMarker"||ue[1].type==="listItemIndent"))break}Q&&(!N||Q<N)&&(Re._spread=!0),Re.end=Object.assign({},N?b[N][1].start:ge[1].end),b.splice(N||X,0,["exit",Re,ge[2]]),X++,q++}if(ge[1].type==="listItemPrefix"){const _e={type:"listItem",_spread:!1,start:Object.assign({},ge[1].start),end:void 0};Re=_e,b.splice(X,0,["enter",_e,ge[2]]),X++,q++,Q=void 0,$e=!0}}}return b[M][1]._spread=ke,q}function o(b,M){return q;function q(X){a.call(this,b(X),X),M&&M.call(this,X)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(b,M,q){this.stack[this.stack.length-1].children.push(b),this.stack.push(b),this.tokenStack.push([M,q||void 0]),b.position={start:Ne(M.start),end:void 0}}function d(b){return M;function M(q){b&&b.call(this,q),u.call(this,q)}}function u(b,M){const q=this.stack.pop(),X=this.tokenStack.pop();if(X)X[0].type!==b.type&&(M?M.call(this,b,X[0]):(X[1]||Nn).call(this,b,X[0]));else throw new Error("Cannot close `"+b.type+"` ("+tt({start:b.start,end:b.end})+"): it’s not open");q.position.end=Ne(b.end)}function p(){return $l(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(b){if(this.data.expectingFirstListItemValue){const M=this.stack[this.stack.length-2];M.start=Number.parseInt(this.sliceSerialize(b),10),this.data.expectingFirstListItemValue=void 0}}function c(){const b=this.resume(),M=this.stack[this.stack.length-1];M.lang=b}function x(){const b=this.resume(),M=this.stack[this.stack.length-1];M.meta=b}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function v(){const b=this.resume(),M=this.stack[this.stack.length-1];M.value=b.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const b=this.resume(),M=this.stack[this.stack.length-1];M.value=b.replace(/(\r?\n|\r)$/g,"")}function W(b){const M=this.resume(),q=this.stack[this.stack.length-1];q.label=M,q.identifier=Ye(this.sliceSerialize(b)).toLowerCase()}function E(){const b=this.resume(),M=this.stack[this.stack.length-1];M.title=b}function Y(){const b=this.resume(),M=this.stack[this.stack.length-1];M.url=b}function G(b){const M=this.stack[this.stack.length-1];if(!M.depth){const q=this.sliceSerialize(b).length;M.depth=q}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function D(b){const M=this.stack[this.stack.length-1];M.depth=this.sliceSerialize(b).codePointAt(0)===61?1:2}function z(){this.data.setextHeadingSlurpLineEnding=void 0}function P(b){const q=this.stack[this.stack.length-1].children;let X=q[q.length-1];(!X||X.type!=="text")&&(X=me(),X.position={start:Ne(b.start),end:void 0},q.push(X)),this.stack.push(X)}function L(b){const M=this.stack.pop();M.value+=this.sliceSerialize(b),M.position.end=Ne(b.end)}function A(b){const M=this.stack[this.stack.length-1];if(this.data.atHardBreak){const q=M.children[M.children.length-1];q.position.end=Ne(b.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(M.type)&&(P.call(this,b),L.call(this,b))}function R(){this.data.atHardBreak=!0}function j(){const b=this.resume(),M=this.stack[this.stack.length-1];M.value=b}function I(){const b=this.resume(),M=this.stack[this.stack.length-1];M.value=b}function C(){const b=this.resume(),M=this.stack[this.stack.length-1];M.value=b}function B(){const b=this.stack[this.stack.length-1];if(this.data.inReference){const M=this.data.referenceType||"shortcut";b.type+="Reference",b.referenceType=M,delete b.url,delete b.title}else delete b.identifier,delete b.label;this.data.referenceType=void 0}function V(){const b=this.stack[this.stack.length-1];if(this.data.inReference){const M=this.data.referenceType||"shortcut";b.type+="Reference",b.referenceType=M,delete b.url,delete b.title}else delete b.identifier,delete b.label;this.data.referenceType=void 0}function H(b){const M=this.sliceSerialize(b),q=this.stack[this.stack.length-2];q.label=$s(M),q.identifier=Ye(M).toLowerCase()}function F(){const b=this.stack[this.stack.length-1],M=this.resume(),q=this.stack[this.stack.length-1];if(this.data.inReference=!0,q.type==="link"){const X=b.children;q.children=X}else q.alt=M}function g(){const b=this.resume(),M=this.stack[this.stack.length-1];M.url=b}function Z(){const b=this.resume(),M=this.stack[this.stack.length-1];M.title=b}function ne(){this.data.inReference=void 0}function f(){this.data.referenceType="collapsed"}function ce(b){const M=this.resume(),q=this.stack[this.stack.length-1];q.label=M,q.identifier=Ye(this.sliceSerialize(b)).toLowerCase(),this.data.referenceType="full"}function oe(b){this.data.characterReferenceType=b.type}function te(b){const M=this.sliceSerialize(b),q=this.data.characterReferenceType;let X;q?(X=Er(M,q==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):X=rn(M);const ee=this.stack[this.stack.length-1];ee.value+=X}function fe(b){const M=this.stack.pop();M.position.end=Ne(b.end)}function de(b){L.call(this,b);const M=this.stack[this.stack.length-1];M.url=this.sliceSerialize(b)}function xe(b){L.call(this,b);const M=this.stack[this.stack.length-1];M.url="mailto:"+this.sliceSerialize(b)}function pe(){return{type:"blockquote",children:[]}}function Te(){return{type:"code",lang:null,meta:null,value:""}}function Se(){return{type:"inlineCode",value:""}}function Be(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function De(){return{type:"emphasis",children:[]}}function He(){return{type:"heading",depth:0,children:[]}}function _(){return{type:"break"}}function U(){return{type:"html",value:""}}function re(){return{type:"image",title:null,url:"",alt:null}}function Ue(){return{type:"link",title:null,url:"",children:[]}}function st(b){return{type:"list",ordered:b.type==="listOrdered",start:null,spread:b._spread,children:[]}}function ze(b){return{type:"listItem",spread:b._spread,checked:null,children:[]}}function Ce(){return{type:"paragraph",children:[]}}function Ae(){return{type:"strong",children:[]}}function me(){return{type:"text",value:""}}function St(){return{type:"thematicBreak"}}}function Ne(e){return{line:e.line,column:e.column,offset:e.offset}}function Wr(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?Wr(e,i):Gs(e,i)}}function Gs(e,t){let n;for(n in t)if(Nr.call(t,n))switch(n){case"canContainEols":{const i=t[n];i&&e[n].push(...i);break}case"transforms":{const i=t[n];i&&e[n].push(...i);break}case"enter":case"exit":{const i=t[n];i&&Object.assign(e[n],i);break}}}function Nn(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+tt({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+tt({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+tt({start:t.start,end:t.end})+") is still open")}function Ys(e){const t=this;t.parser=n;function n(i){return qs(i,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Xs(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Qs(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Js(e,t){const n=t.value?t.value+`
`:"",i={},l=t.lang?t.lang.split(/\s+/):[];l.length>0&&(i.className=["language-"+l[0]]);let o={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o}function Zs(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ea(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ta(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),l=Qe(i.toLowerCase()),o=e.footnoteOrder.indexOf(i);let s,a=e.footnoteCounts.get(i);a===void 0?(a=0,e.footnoteOrder.push(i),s=e.footnoteOrder.length):s=o+1,a+=1,e.footnoteCounts.set(i,a);const d={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+l,id:n+"fnref-"+l+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,d);const u={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(t,u),e.applyData(t,u)}function na(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ra(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Or(e,t){const n=t.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+i}];const l=e.all(t),o=l[0];o&&o.type==="text"?o.value="["+o.value:l.unshift({type:"text",value:"["});const s=l[l.length-1];return s&&s.type==="text"?s.value+=i:l.push({type:"text",value:i}),l}function ia(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return Or(e,t);const l={src:Qe(i.url||""),alt:t.alt};i.title!==null&&i.title!==void 0&&(l.title=i.title);const o={type:"element",tagName:"img",properties:l,children:[]};return e.patch(t,o),e.applyData(t,o)}function la(e,t){const n={src:Qe(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)}function oa(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,i),e.applyData(t,i)}function sa(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return Or(e,t);const l={href:Qe(i.url||"")};i.title!==null&&i.title!==void 0&&(l.title=i.title);const o={type:"element",tagName:"a",properties:l,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function aa(e,t){const n={href:Qe(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function ca(e,t,n){const i=e.all(t),l=n?ua(n):Hr(t),o={},s=[];if(typeof t.checked=="boolean"){const p=i[0];let h;p&&p.type==="element"&&p.tagName==="p"?h=p:(h={type:"element",tagName:"p",properties:{},children:[]},i.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<i.length;){const p=i[a];(l||a!==0||p.type!=="element"||p.tagName!=="p")&&s.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!l?s.push(...p.children):s.push(p)}const d=i[i.length-1];d&&(l||d.type!=="element"||d.tagName!=="p")&&s.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:o,children:s};return e.patch(t,u),e.applyData(t,u)}function ua(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let i=-1;for(;!t&&++i<n.length;)t=Hr(n[i])}return t}function Hr(e){const t=e.spread;return t??e.children.length>1}function da(e,t){const n={},i=e.all(t);let l=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++l<i.length;){const s=i[l];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function pa(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ha(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function ma(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ga(e,t){const n=e.all(t),i=n.shift(),l=[];if(i){const s={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(t.children[0],s),l.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Zt(t.children[1]),d=wr(t.children[t.children.length-1]);a&&d&&(s.position={start:a,end:d}),l.push(s)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(l,!0)};return e.patch(t,o),e.applyData(t,o)}function fa(e,t,n){const i=n?n.children:void 0,o=(i?i.indexOf(t):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,a=s?s.length:t.children.length;let d=-1;const u=[];for(;++d<a;){const h=t.children[d],m={},c=s?s[d]:void 0;c&&(m.align=c);let x={type:"element",tagName:o,properties:m,children:[]};h&&(x.children=e.all(h),e.patch(h,x),x=e.applyData(h,x)),u.push(x)}const p={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,p),e.applyData(t,p)}function xa(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Wn=9,On=32;function ya(e){const t=String(e),n=/\r?\n|\r/g;let i=n.exec(t),l=0;const o=[];for(;i;)o.push(Hn(t.slice(l,i.index),l>0,!0),i[0]),l=i.index+i[0].length,i=n.exec(t);return o.push(Hn(t.slice(l),l>0,!1)),o.join("")}function Hn(e,t,n){let i=0,l=e.length;if(t){let o=e.codePointAt(i);for(;o===Wn||o===On;)i++,o=e.codePointAt(i)}if(n){let o=e.codePointAt(l-1);for(;o===Wn||o===On;)l--,o=e.codePointAt(l-1)}return l>i?e.slice(i,l):""}function ba(e,t){const n={type:"text",value:ya(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function va(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const ka={blockquote:Xs,break:Qs,code:Js,delete:Zs,emphasis:ea,footnoteReference:ta,heading:na,html:ra,imageReference:ia,image:la,inlineCode:oa,linkReference:sa,link:aa,listItem:ca,list:da,paragraph:pa,root:ha,strong:ma,table:ga,tableCell:xa,tableRow:fa,text:ba,thematicBreak:va,toml:ct,yaml:ct,definition:ct,footnoteDefinition:ct};function ct(){}const Ur=-1,wt=0,rt=1,yt=2,sn=3,an=4,cn=5,un=6,$r=7,Vr=8,Un=typeof self=="object"?self:globalThis,wa=(e,t)=>{const n=(l,o)=>(e.set(o,l),l),i=l=>{if(e.has(l))return e.get(l);const[o,s]=t[l];switch(o){case wt:case Ur:return n(s,l);case rt:{const a=n([],l);for(const d of s)a.push(i(d));return a}case yt:{const a=n({},l);for(const[d,u]of s)a[i(d)]=i(u);return a}case sn:return n(new Date(s),l);case an:{const{source:a,flags:d}=s;return n(new RegExp(a,d),l)}case cn:{const a=n(new Map,l);for(const[d,u]of s)a.set(i(d),i(u));return a}case un:{const a=n(new Set,l);for(const d of s)a.add(i(d));return a}case $r:{const{name:a,message:d}=s;return n(new Un[a](d),l)}case Vr:return n(BigInt(s),l);case"BigInt":return n(Object(BigInt(s)),l);case"ArrayBuffer":return n(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:a}=new Uint8Array(s);return n(new DataView(a),s)}}return n(new Un[o](s),l)};return i},$n=e=>wa(new Map,e)(0),Ke="",{toString:ja}={},{keys:Sa}=Object,Ze=e=>{const t=typeof e;if(t!=="object"||!e)return[wt,t];const n=ja.call(e).slice(8,-1);switch(n){case"Array":return[rt,Ke];case"Object":return[yt,Ke];case"Date":return[sn,Ke];case"RegExp":return[an,Ke];case"Map":return[cn,Ke];case"Set":return[un,Ke];case"DataView":return[rt,n]}return n.includes("Array")?[rt,n]:n.includes("Error")?[$r,n]:[yt,n]},ut=([e,t])=>e===wt&&(t==="function"||t==="symbol"),Ca=(e,t,n,i)=>{const l=(s,a)=>{const d=i.push(s)-1;return n.set(a,d),d},o=s=>{if(n.has(s))return n.get(s);let[a,d]=Ze(s);switch(a){case wt:{let p=s;switch(d){case"bigint":a=Vr,p=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);p=null;break;case"undefined":return l([Ur],s)}return l([a,p],s)}case rt:{if(d){let m=s;return d==="DataView"?m=new Uint8Array(s.buffer):d==="ArrayBuffer"&&(m=new Uint8Array(s)),l([d,[...m]],s)}const p=[],h=l([a,p],s);for(const m of s)p.push(o(m));return h}case yt:{if(d)switch(d){case"BigInt":return l([d,s.toString()],s);case"Boolean":case"Number":case"String":return l([d,s.valueOf()],s)}if(t&&"toJSON"in s)return o(s.toJSON());const p=[],h=l([a,p],s);for(const m of Sa(s))(e||!ut(Ze(s[m])))&&p.push([o(m),o(s[m])]);return h}case sn:return l([a,s.toISOString()],s);case an:{const{source:p,flags:h}=s;return l([a,{source:p,flags:h}],s)}case cn:{const p=[],h=l([a,p],s);for(const[m,c]of s)(e||!(ut(Ze(m))||ut(Ze(c))))&&p.push([o(m),o(c)]);return h}case un:{const p=[],h=l([a,p],s);for(const m of s)(e||!ut(Ze(m)))&&p.push(o(m));return h}}const{message:u}=s;return l([a,{name:d,message:u}],s)};return o},Vn=(e,{json:t,lossy:n}={})=>{const i=[];return Ca(!(t||n),!!t,new Map,i)(e),i},bt=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?$n(Vn(e,t)):structuredClone(e):(e,t)=>$n(Vn(e,t));function Ia(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Ta(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function za(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Ia,i=e.options.footnoteBackLabel||Ta,l=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let d=-1;for(;++d<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[d]);if(!u)continue;const p=e.all(u),h=String(u.identifier).toUpperCase(),m=Qe(h.toLowerCase());let c=0;const x=[],y=e.footnoteCounts.get(h);for(;y!==void 0&&++c<=y;){x.length>0&&x.push({type:"text",value:" "});let W=typeof n=="string"?n:n(d,c);typeof W=="string"&&(W={type:"text",value:W}),x.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(c>1?"-"+c:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(d,c),className:["data-footnote-backref"]},children:Array.isArray(W)?W:[W]})}const v=p[p.length-1];if(v&&v.type==="element"&&v.tagName==="p"){const W=v.children[v.children.length-1];W&&W.type==="text"?W.value+=" ":v.children.push({type:"text",value:" "}),v.children.push(...x)}else p.push(...x);const w={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(p,!0)};e.patch(u,w),a.push(w)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...bt(s),id:"footnote-label"},children:[{type:"text",value:l}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const qr=function(e){if(e==null)return Pa;if(typeof e=="function")return jt(e);if(typeof e=="object")return Array.isArray(e)?Ea(e):Ma(e);if(typeof e=="string")return La(e);throw new Error("Expected function, string, or object as test")};function Ea(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=qr(e[n]);return jt(i);function i(...l){let o=-1;for(;++o<t.length;)if(t[o].apply(this,l))return!0;return!1}}function Ma(e){const t=e;return jt(n);function n(i){const l=i;let o;for(o in e)if(l[o]!==t[o])return!1;return!0}}function La(e){return jt(t);function t(n){return n&&n.type===e}}function jt(e){return t;function t(n,i,l){return!!(Aa(n)&&e.call(this,n,typeof i=="number"?i:void 0,l||void 0))}}function Pa(){return!0}function Aa(e){return e!==null&&typeof e=="object"&&"type"in e}const Kr=[],Ra=!0,qn=!1,Ba="skip";function Da(e,t,n,i){let l;typeof t=="function"&&typeof n!="function"?(i=n,n=t):l=t;const o=qr(l),s=i?-1:1;a(e,void 0,[])();function a(d,u,p){const h=d&&typeof d=="object"?d:{};if(typeof h.type=="string"){const c=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(d.type+(c?"<"+c+">":""))+")"})}return m;function m(){let c=Kr,x,y,v;if((!t||o(d,u,p[p.length-1]||void 0))&&(c=_a(n(d,p)),c[0]===qn))return c;if("children"in d&&d.children){const w=d;if(w.children&&c[0]!==Ba)for(y=(i?w.children.length:-1)+s,v=p.concat(w);y>-1&&y<w.children.length;){const W=w.children[y];if(x=a(W,y,v)(),x[0]===qn)return x;y=typeof x[1]=="number"?x[1]:y+s}}return c}}}function _a(e){return Array.isArray(e)?e:typeof e=="number"?[Ra,e]:e==null?Kr:[e]}function Gr(e,t,n,i){let l,o,s;typeof t=="function"&&typeof n!="function"?(o=void 0,s=t,l=n):(o=t,s=n,l=i),Da(e,o,a,l);function a(d,u){const p=u[u.length-1],h=p?p.children.indexOf(d):void 0;return s(d,h,p)}}const Kt={}.hasOwnProperty,Fa={};function Na(e,t){const n=t||Fa,i=new Map,l=new Map,o=new Map,s={...ka,...n.handlers},a={all:u,applyData:Oa,definitionById:i,footnoteById:l,footnoteCounts:o,footnoteOrder:[],handlers:s,one:d,options:n,patch:Wa,wrap:Ua};return Gr(e,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const h=p.type==="definition"?i:l,m=String(p.identifier).toUpperCase();h.has(m)||h.set(m,p)}}),a;function d(p,h){const m=p.type,c=a.handlers[m];if(Kt.call(a.handlers,m)&&c)return c(a,p,h);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in p){const{children:y,...v}=p,w=bt(v);return w.children=a.all(p),w}return bt(p)}return(a.options.unknownHandler||Ha)(a,p,h)}function u(p){const h=[];if("children"in p){const m=p.children;let c=-1;for(;++c<m.length;){const x=a.one(m[c],p);if(x){if(c&&m[c-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=Kn(x.value)),!Array.isArray(x)&&x.type==="element")){const y=x.children[0];y&&y.type==="text"&&(y.value=Kn(y.value))}Array.isArray(x)?h.push(...x):h.push(x)}}}return h}}function Wa(e,t){e.position&&(t.position=wl(e))}function Oa(e,t){let n=t;if(e&&e.data){const i=e.data.hName,l=e.data.hChildren,o=e.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const s="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:s}}n.type==="element"&&o&&Object.assign(n.properties,bt(o)),"children"in n&&n.children&&l!==null&&l!==void 0&&(n.children=l)}return n}function Ha(e,t){const n=t.data||{},i="value"in t&&!(Kt.call(n,"hProperties")||Kt.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Ua(e,t){const n=[];let i=-1;for(t&&n.push({type:"text",value:`
`});++i<e.length;)i&&n.push({type:"text",value:`
`}),n.push(e[i]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Kn(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Gn(e,t){const n=Na(e,t),i=n.one(e,void 0),l=za(n),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return l&&o.children.push({type:"text",value:`
`},l),o}function $a(e,t){return e&&"run"in e?async function(n,i){const l=Gn(n,{file:i,...t});await e.run(l,i)}:function(n,i){return Gn(n,{file:i,...e||t})}}function Yn(e){if(e)throw e}var gt=Object.prototype.hasOwnProperty,Yr=Object.prototype.toString,Xn=Object.defineProperty,Qn=Object.getOwnPropertyDescriptor,Jn=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Yr.call(t)==="[object Array]"},Zn=function(t){if(!t||Yr.call(t)!=="[object Object]")return!1;var n=gt.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&gt.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!i)return!1;var l;for(l in t);return typeof l>"u"||gt.call(t,l)},er=function(t,n){Xn&&n.name==="__proto__"?Xn(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},tr=function(t,n){if(n==="__proto__")if(gt.call(t,n)){if(Qn)return Qn(t,n).value}else return;return t[n]},Va=function e(){var t,n,i,l,o,s,a=arguments[0],d=1,u=arguments.length,p=!1;for(typeof a=="boolean"&&(p=a,a=arguments[1]||{},d=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});d<u;++d)if(t=arguments[d],t!=null)for(n in t)i=tr(a,n),l=tr(t,n),a!==l&&(p&&l&&(Zn(l)||(o=Jn(l)))?(o?(o=!1,s=i&&Jn(i)?i:[]):s=i&&Zn(i)?i:{},er(a,{name:n,newValue:e(p,s,l)})):typeof l<"u"&&er(a,{name:n,newValue:l}));return a};const Et=ar(Va);function Gt(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function qa(){const e=[],t={run:n,use:i};return t;function n(...l){let o=-1;const s=l.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...l);function a(d,...u){const p=e[++o];let h=-1;if(d){s(d);return}for(;++h<l.length;)(u[h]===null||u[h]===void 0)&&(u[h]=l[h]);l=u,p?Ka(p,a)(...u):s(null,...u)}}function i(l){if(typeof l!="function")throw new TypeError("Expected `middelware` to be a function, not "+l);return e.push(l),t}}function Ka(e,t){let n;return i;function i(...s){const a=e.length>s.length;let d;a&&s.push(l);try{d=e.apply(this,s)}catch(u){const p=u;if(a&&n)throw p;return l(p)}a||(d&&d.then&&typeof d.then=="function"?d.then(o,l):d instanceof Error?l(d):o(d))}function l(s,...a){n||(n=!0,t(s,...a))}function o(s){l(null,s)}}const Me={basename:Ga,dirname:Ya,extname:Xa,join:Qa,sep:"/"};function Ga(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');ot(e);let n=0,i=-1,l=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;l--;)if(e.codePointAt(l)===47){if(o){n=l+1;break}}else i<0&&(o=!0,i=l+1);return i<0?"":e.slice(n,i)}if(t===e)return"";let s=-1,a=t.length-1;for(;l--;)if(e.codePointAt(l)===47){if(o){n=l+1;break}}else s<0&&(o=!0,s=l+1),a>-1&&(e.codePointAt(l)===t.codePointAt(a--)?a<0&&(i=l):(a=-1,i=s));return n===i?i=s:i<0&&(i=e.length),e.slice(n,i)}function Ya(e){if(ot(e),e.length===0)return".";let t=-1,n=e.length,i;for(;--n;)if(e.codePointAt(n)===47){if(i){t=n;break}}else i||(i=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Xa(e){ot(e);let t=e.length,n=-1,i=0,l=-1,o=0,s;for(;t--;){const a=e.codePointAt(t);if(a===47){if(s){i=t+1;break}continue}n<0&&(s=!0,n=t+1),a===46?l<0?l=t:o!==1&&(o=1):l>-1&&(o=-1)}return l<0||n<0||o===0||o===1&&l===n-1&&l===i+1?"":e.slice(l,n)}function Qa(...e){let t=-1,n;for(;++t<e.length;)ot(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Ja(n)}function Ja(e){ot(e);const t=e.codePointAt(0)===47;let n=Za(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Za(e,t){let n="",i=0,l=-1,o=0,s=-1,a,d;for(;++s<=e.length;){if(s<e.length)a=e.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(l===s-1||o===1))if(l!==s-1&&o===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(d=n.lastIndexOf("/"),d!==n.length-1){d<0?(n="",i=0):(n=n.slice(0,d),i=n.length-1-n.lastIndexOf("/")),l=s,o=0;continue}}else if(n.length>0){n="",i=0,l=s,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+e.slice(l+1,s):n=e.slice(l+1,s),i=s-l-1;l=s,o=0}else a===46&&o>-1?o++:o=-1}return n}function ot(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const ec={cwd:tc};function tc(){return"/"}function Yt(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function nc(e){if(typeof e=="string")e=new URL(e);else if(!Yt(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return rc(e)}function rc(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const i=t.codePointAt(n+2);if(i===70||i===102){const l=new TypeError("File URL path must not include encoded / characters");throw l.code="ERR_INVALID_FILE_URL_PATH",l}}return decodeURIComponent(t)}const Mt=["history","path","basename","stem","extname","dirname"];class Xr{constructor(t){let n;t?Yt(t)?n={path:t}:typeof t=="string"||ic(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":ec.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<Mt.length;){const o=Mt[i];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let l;for(l in n)Mt.includes(l)||(this[l]=n[l])}get basename(){return typeof this.path=="string"?Me.basename(this.path):void 0}set basename(t){Pt(t,"basename"),Lt(t,"basename"),this.path=Me.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Me.dirname(this.path):void 0}set dirname(t){nr(this.basename,"dirname"),this.path=Me.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Me.extname(this.path):void 0}set extname(t){if(Lt(t,"extname"),nr(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Me.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Yt(t)&&(t=nc(t)),Pt(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Me.basename(this.path,this.extname):void 0}set stem(t){Pt(t,"stem"),Lt(t,"stem"),this.path=Me.join(this.dirname||"",t+(this.extname||""))}fail(t,n,i){const l=this.message(t,n,i);throw l.fatal=!0,l}info(t,n,i){const l=this.message(t,n,i);return l.fatal=void 0,l}message(t,n,i){const l=new he(t,n,i);return this.path&&(l.name=this.path+":"+l.name,l.file=this.path),l.fatal=!1,this.messages.push(l),l}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Lt(e,t){if(e&&e.includes(Me.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Me.sep+"`")}function Pt(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function nr(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ic(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const lc=function(e){const i=this.constructor.prototype,l=i[e],o=function(){return l.apply(o,arguments)};return Object.setPrototypeOf(o,i),o},oc={}.hasOwnProperty;class dn extends lc{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=qa()}copy(){const t=new dn;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];t.use(...i)}return t.data(Et(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Bt("data",this.frozen),this.namespace[t]=n,this):oc.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Bt("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const l=n.call(t,...i);typeof l=="function"&&this.transformers.use(l)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=dt(t),i=this.parser||this.Parser;return At("parse",i),i(String(n),n)}process(t,n){const i=this;return this.freeze(),At("process",this.parser||this.Parser),Rt("process",this.compiler||this.Compiler),n?l(void 0,n):new Promise(l);function l(o,s){const a=dt(t),d=i.parse(a);i.run(d,a,function(p,h,m){if(p||!h||!m)return u(p);const c=h,x=i.stringify(c,m);cc(x)?m.value=x:m.result=x,u(p,m)});function u(p,h){p||!h?s(p):o?o(h):n(void 0,h)}}}processSync(t){let n=!1,i;return this.freeze(),At("processSync",this.parser||this.Parser),Rt("processSync",this.compiler||this.Compiler),this.process(t,l),ir("processSync","process",n),i;function l(o,s){n=!0,Yn(o),i=s}}run(t,n,i){rr(t),this.freeze();const l=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?o(void 0,i):new Promise(o);function o(s,a){const d=dt(n);l.run(t,d,u);function u(p,h,m){const c=h||t;p?a(p):s?s(c):i(void 0,c,m)}}}runSync(t,n){let i=!1,l;return this.run(t,n,o),ir("runSync","run",i),l;function o(s,a){Yn(s),l=a,i=!0}}stringify(t,n){this.freeze();const i=dt(n),l=this.compiler||this.Compiler;return Rt("stringify",l),rr(t),l(t,i)}use(t,...n){const i=this.attachers,l=this.namespace;if(Bt("use",this.frozen),t!=null)if(typeof t=="function")d(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):s(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(u){if(typeof u=="function")d(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[p,...h]=u;d(p,h)}else s(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function s(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(l.settings=Et(!0,l.settings,u.settings))}function a(u){let p=-1;if(u!=null)if(Array.isArray(u))for(;++p<u.length;){const h=u[p];o(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function d(u,p){let h=-1,m=-1;for(;++h<i.length;)if(i[h][0]===u){m=h;break}if(m===-1)i.push([u,...p]);else if(p.length>0){let[c,...x]=p;const y=i[m][1];Gt(y)&&Gt(c)&&(c=Et(!0,y,c)),i[m]=[u,c,...x]}}}}const sc=new dn().freeze();function At(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Rt(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Bt(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function rr(e){if(!Gt(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function ir(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function dt(e){return ac(e)?e:new Xr(e)}function ac(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function cc(e){return typeof e=="string"||uc(e)}function uc(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const dc="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",lr=[],or={allowDangerousHtml:!0},pc=/^(https?|ircs?|mailto|xmpp)$/i,hc=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function mc(e){const t=gc(e),n=fc(e);return xc(t.runSync(t.parse(n),n),e)}function gc(e){const t=e.rehypePlugins||lr,n=e.remarkPlugins||lr,i=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...or}:or;return sc().use(Ys).use(n).use($a,i).use(t)}function fc(e){const t=e.children||"",n=new Xr;return typeof t=="string"&&(n.value=t),n}function xc(e,t){const n=t.allowedElements,i=t.allowElement,l=t.components,o=t.disallowedElements,s=t.skipHtml,a=t.unwrapDisallowed,d=t.urlTransform||yc;for(const p of hc)Object.hasOwn(t,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+dc+p.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),Gr(e,u),Tl(e,{Fragment:r.Fragment,components:l,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0});function u(p,h,m){if(p.type==="raw"&&m&&typeof h=="number")return s?m.children.splice(h,1):m.children[h]={type:"text",value:p.value},h;if(p.type==="element"){let c;for(c in It)if(Object.hasOwn(It,c)&&Object.hasOwn(p.properties,c)){const x=p.properties[c],y=It[c];(y===null||y.includes(p.tagName))&&(p.properties[c]=d(String(x||""),c,p))}}if(p.type==="element"){let c=n?!n.includes(p.tagName):o?o.includes(p.tagName):!1;if(!c&&i&&typeof h=="number"&&(c=!i(p,h,m)),c&&m&&typeof h=="number")return a&&p.children?m.children.splice(h,1,...p.children):m.children.splice(h,1),h}}}function yc(e){const t=e.indexOf(":"),n=e.indexOf("?"),i=e.indexOf("#"),l=e.indexOf("/");return t===-1||l!==-1&&t>l||n!==-1&&t>n||i!==-1&&t>i||pc.test(e.slice(0,t))?e:""}function Gc({summary:e,isGenerating:t,error:n,onGenerate:i,hasTranscription:l,sessionDate:o,ollamaModel:s="GPT-OSS"}){const[a,d]=S.useState(!1),[u,p]=S.useState(!1),h=S.useCallback(async()=>{if(e)try{await navigator.clipboard.writeText(e),d(!0),p(!1),setTimeout(()=>d(!1),2e3)}catch(c){console.error("Copy failed:",c)}},[e]),m=S.useCallback(()=>{if(!e)return;const c=o?new Date(o):new Date,x=c.toISOString().slice(0,10),y=c.toTimeString().slice(0,5).replace(":","-"),v=`summary_${x}_${y}.md`,w=new Blob([e],{type:"text/markdown;charset=utf-8"}),W=URL.createObjectURL(w),E=document.createElement("a");E.href=W,E.download=v,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(W),p(!1)},[e,o]);return l?t?r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"3rem",color:"#888"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem",animation:"pulse 1s infinite"},children:"🤖"}),r.jsx("div",{style:{marginBottom:"0.5rem"},children:"Генерация summary..."}),r.jsx("div",{style:{fontSize:"0.8rem",color:"#666"},children:"Это может занять некоторое время"})]}):n?r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"2rem"},children:[r.jsxs("div",{style:{padding:"1rem",backgroundColor:"rgba(244, 67, 54, 0.1)",border:"1px solid rgba(244, 67, 54, 0.3)",borderRadius:"8px",color:"#f44336",marginBottom:"1rem",maxWidth:"500px",textAlign:"center"},children:[r.jsx("div",{style:{marginBottom:"0.5rem"},children:"❌ Ошибка генерации"}),r.jsx("div",{style:{fontSize:"0.85rem"},children:n})]}),r.jsx("button",{onClick:i,style:{padding:"0.6rem 1.5rem",backgroundColor:"#6c5ce7",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem"},children:"🔄 Попробовать снова"})]}):e?r.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--surface)",borderRadius:"var(--radius-lg)",border:"1px solid var(--glass-border)",lineHeight:"1.8",width:"100%",maxWidth:"100%",overflow:"hidden",overflowX:"hidden",wordWrap:"break-word",overflowWrap:"break-word",boxSizing:"border-box"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid var(--glass-border)"},children:[r.jsxs("h4",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"0.4rem"},children:[r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),r.jsx("polyline",{points:"14 2 14 8 20 8"}),r.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),r.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),r.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Summary"]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsxs("div",{style:{position:"relative"},children:[r.jsxs("button",{onClick:()=>p(!u),title:"Экспорт summary",style:{padding:"0.3rem 0.6rem",backgroundColor:a?"var(--success)":"var(--primary)",color:"#fff",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.3rem",transition:"background-color 0.2s"},children:[r.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),r.jsx("polyline",{points:"17 8 12 3 7 8"}),r.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),a?"Скопировано":"Экспорт"]}),u&&r.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.3rem",backgroundColor:"var(--surface-elevated)",border:"1px solid var(--glass-border)",borderRadius:"var(--radius-md)",overflow:"hidden",zIndex:100,minWidth:"160px",boxShadow:"var(--shadow-lg)"},children:[r.jsxs("button",{onClick:h,style:{width:"100%",padding:"0.6rem 1rem",backgroundColor:"transparent",border:"none",color:"var(--text-primary)",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},onMouseEnter:c=>c.currentTarget.style.backgroundColor="var(--glass-bg)",onMouseLeave:c=>c.currentTarget.style.backgroundColor="transparent",children:[r.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),r.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),"Копировать"]}),r.jsxs("button",{onClick:m,style:{width:"100%",padding:"0.6rem 1rem",backgroundColor:"transparent",border:"none",borderTop:"1px solid var(--glass-border)",color:"var(--text-primary)",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.85rem"},onMouseEnter:c=>c.currentTarget.style.backgroundColor="var(--glass-bg)",onMouseLeave:c=>c.currentTarget.style.backgroundColor="transparent",children:[r.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),r.jsx("polyline",{points:"7 10 12 15 17 10"}),r.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Скачать .md"]})]})]}),r.jsxs("button",{onClick:i,title:"Перегенерировать summary",style:{padding:"0.3rem 0.6rem",backgroundColor:"var(--surface-strong)",color:"var(--text-muted)",border:"1px solid var(--glass-border)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.3rem"},children:[r.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M23 4v6h-6"}),r.jsx("path",{d:"M1 20v-6h6"}),r.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),"Обновить"]})]})]}),r.jsx("div",{className:"markdown-content",style:{color:"var(--text-secondary)",fontSize:"0.95rem",overflow:"hidden",overflowWrap:"break-word",wordBreak:"break-word"},children:r.jsx(mc,{components:{h2:({children:c})=>r.jsx("h2",{style:{color:"var(--text-primary)",fontSize:"1.1rem",marginTop:"1.2rem",marginBottom:"0.6rem",borderBottom:"1px solid var(--glass-border)",paddingBottom:"0.4rem"},children:c}),h3:({children:c})=>r.jsx("h3",{style:{color:"var(--text-secondary)",fontSize:"1rem",marginTop:"1rem",marginBottom:"0.5rem"},children:c}),ul:({children:c})=>r.jsx("ul",{style:{margin:"0.5rem 0",paddingLeft:"1.5rem",listStyleType:"disc"},children:c}),li:({children:c})=>r.jsx("li",{style:{marginBottom:"0.4rem",color:"var(--text-secondary)",overflowWrap:"break-word",wordBreak:"break-word"},children:c}),p:({children:c})=>r.jsx("p",{style:{margin:"0.5rem 0",color:"var(--text-secondary)",overflowWrap:"break-word",wordBreak:"break-word"},children:c}),strong:({children:c})=>r.jsx("strong",{style:{color:"var(--text-primary)"},children:c}),em:({children:c})=>r.jsx("em",{style:{color:"var(--text-muted)"},children:c})},children:e})})]}):r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",maxWidth:"600px",margin:"0 auto",height:"100%"},children:[r.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"var(--font-weight-bold)",color:"var(--text-primary)",marginBottom:"0.5rem",marginTop:"1rem",textAlign:"center"},children:"Summary ещё не создан"}),r.jsx("p",{style:{fontSize:"0.95rem",color:"var(--text-secondary)",marginBottom:"2rem",textAlign:"center"},children:"Нажмите кнопку чтобы сгенерировать краткое содержание записи"}),r.jsxs("button",{onClick:i,style:{padding:"0.8rem 2rem",backgroundColor:"var(--primary)",color:"#fff",border:"none",borderRadius:"var(--radius-lg)",cursor:"pointer",fontSize:"1rem",fontWeight:"var(--font-weight-semibold)",display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:"var(--shadow-glow-primary)",transition:"all 0.2s ease",marginBottom:"1.5rem"},onMouseEnter:c=>{c.currentTarget.style.transform="translateY(-2px)",c.currentTarget.style.boxShadow="0 8px 24px rgba(139, 92, 246, 0.4)"},onMouseLeave:c=>{c.currentTarget.style.transform="translateY(0)",c.currentTarget.style.boxShadow="var(--shadow-glow-primary)"},children:[r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),r.jsx("path",{d:"M2 17l10 5 10-5"}),r.jsx("path",{d:"M2 12l10 5 10-5"})]}),r.jsx("span",{children:"Создать Summary"})]}),r.jsxs("div",{style:{width:"100%",background:"var(--glass-bg)",backdropFilter:"blur(var(--glass-blur-light))",borderRadius:"var(--radius-lg)",border:"1px solid var(--glass-border)",padding:"1.25rem"},children:[r.jsx("h3",{style:{fontSize:"0.85rem",fontWeight:"var(--font-weight-semibold)",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.04em",marginBottom:"1rem"},children:"Информация"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"var(--glass-bg-elevated)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,color:"var(--text-muted)"},children:r.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),r.jsx("circle",{cx:"9",cy:"10",r:"2"}),r.jsx("circle",{cx:"15",cy:"10",r:"2"}),r.jsx("path",{d:"M9 16h6"})]})}),r.jsxs("div",{children:[r.jsxs("div",{style:{color:"var(--text-primary)",fontSize:"0.9rem",fontWeight:"var(--font-weight-medium)"},children:["Модель: ",s||"GPT-OSS"]}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem",marginTop:"2px"},children:"Используется для анализа текста"})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"var(--glass-bg-elevated)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,color:"var(--text-muted)"},children:r.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})})}),r.jsxs("div",{children:[r.jsx("div",{style:{color:"var(--text-primary)",fontSize:"0.9rem",fontWeight:"var(--font-weight-medium)"},children:"Структурированный анализ"}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem",marginTop:"2px"},children:"Тема, ключевые моменты, решения, следующие шаги"})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[r.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"var(--glass-bg-elevated)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,color:"var(--text-muted)"},children:r.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),r.jsx("polyline",{points:"17 8 12 3 7 8"}),r.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})}),r.jsxs("div",{children:[r.jsx("div",{style:{color:"var(--text-primary)",fontSize:"0.9rem",fontWeight:"var(--font-weight-medium)"},children:"Экспорт в Markdown"}),r.jsx("div",{style:{color:"var(--text-muted)",fontSize:"0.8rem",marginTop:"2px"},children:"Копирование или скачивание файла"})]})]})]})]})]}):r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"3rem",color:"#666"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"📋"}),r.jsx("div",{children:"Нет транскрипции для создания summary"})]})}const Dt=["#4caf50","#2196f3","#e91e63","#ff9800","#9c27b0","#00bcd4","#8bc34a"],bc=(e,t)=>t?Dt[0]:Dt[(e+1)%Dt.length],Qr=e=>{if(e<60)return`${Math.round(e)}с`;const t=Math.floor(e/60),n=Math.round(e%60);return`${t}м ${n}с`},vc=({currentName:e,isRecognized:t,onSave:n,onClose:i})=>{const[l,o]=S.useState(e),[s,a]=S.useState(!t),d=u=>{u.preventDefault(),l.trim()&&n(l.trim(),s)};return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:i,onKeyDown:u=>{u.code!=="Escape"&&u.stopPropagation()},children:r.jsxs("div",{style:{background:"var(--glass-bg-elevated)",backdropFilter:"blur(var(--glass-blur)) saturate(var(--glass-saturation))",WebkitBackdropFilter:"blur(var(--glass-blur)) saturate(var(--glass-saturation))",borderRadius:"var(--radius-xl)",padding:"1.5rem",minWidth:"320px",boxShadow:"var(--shadow-elevated)",border:"1px solid var(--glass-border)"},onClick:u=>u.stopPropagation(),onKeyDown:u=>{u.code!=="Escape"&&u.stopPropagation()},children:[r.jsx("h3",{style:{margin:"0 0 1rem",color:"var(--text-primary)"},children:"Переименовать спикера"}),r.jsxs("form",{onSubmit:d,children:[r.jsx("input",{type:"text",value:l,onChange:u=>o(u.target.value),placeholder:"Введите имя",autoFocus:!0,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",backgroundColor:"var(--surface-strong)",color:"var(--text-primary)",marginBottom:"1rem",boxSizing:"border-box"}}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem",cursor:"pointer",color:"var(--text-secondary)",fontSize:"0.9rem"},children:[r.jsx("input",{type:"checkbox",checked:s,onChange:u=>a(u.target.checked),style:{width:"16px",height:"16px"}}),"Запомнить голос (для будущих сессий)"]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[r.jsx("button",{type:"button",onClick:i,className:"btn-secondary",style:{padding:"0.6rem 1.2rem",borderRadius:"var(--radius-md)"},children:"Отмена"}),r.jsx("button",{type:"submit",className:"btn-primary",style:{padding:"0.6rem 1.2rem",borderRadius:"var(--radius-md)"},children:"Сохранить"})]})]})]})})},kc=({speakers:e,onMerge:t,onClose:n})=>{const[i,l]=S.useState(e[0]?.localId??0),[o,s]=S.useState(""),[a,d]=S.useState(!0),[u,p]=S.useState(!1),h=c=>{c.preventDefault(),t(i,o.trim(),a,u)},m=e.map(c=>c.displayName).join(", ");return r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:n,onKeyDown:c=>{c.code!=="Escape"&&c.stopPropagation()},children:r.jsxs("div",{style:{background:"var(--glass-bg-elevated)",backdropFilter:"blur(var(--glass-blur)) saturate(var(--glass-saturation))",WebkitBackdropFilter:"blur(var(--glass-blur)) saturate(var(--glass-saturation))",borderRadius:"var(--radius-xl)",padding:"1.5rem",minWidth:"360px",maxWidth:"450px",boxShadow:"var(--shadow-elevated)",border:"1px solid var(--glass-border)"},onClick:c=>c.stopPropagation(),onKeyDown:c=>{c.code!=="Escape"&&c.stopPropagation()},children:[r.jsx("h3",{style:{margin:"0 0 1rem",color:"var(--text-primary)"},children:"Объединить спикеров"}),r.jsxs("p",{style:{margin:"0 0 1rem",color:"var(--text-secondary)",fontSize:"0.9rem",lineHeight:1.4},children:["Выбрано: ",r.jsx("strong",{style:{color:"var(--text-primary)"},children:m})]}),r.jsxs("form",{onSubmit:h,children:[r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Имя объединённого спикера (опционально):"}),r.jsx("input",{type:"text",value:o,onChange:c=>s(c.target.value),placeholder:e.find(c=>c.localId===i)?.displayName||"Введите имя",style:{width:"100%",padding:"0.75rem",fontSize:"1rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",backgroundColor:"var(--surface-strong)",color:"var(--text-primary)",boxSizing:"border-box"}})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Взять голосовой отпечаток от:"}),r.jsx("select",{value:i,onChange:c=>l(Number(c.target.value)),style:{width:"100%",padding:"0.75rem",fontSize:"1rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",backgroundColor:"var(--surface-strong)",color:"var(--text-primary)",boxSizing:"border-box"},children:e.map(c=>r.jsxs("option",{value:c.localId,children:[c.displayName," (",c.segmentCount," фраз, ",Qr(c.totalDuration),")"]},c.localId))})]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",cursor:"pointer",color:"var(--text-secondary)",fontSize:"0.9rem"},children:[r.jsx("input",{type:"checkbox",checked:a,onChange:c=>d(c.target.checked),style:{width:"16px",height:"16px"}}),"Усреднить голоса всех спикеров"]}),r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem",cursor:"pointer",color:"var(--text-secondary)",fontSize:"0.9rem"},children:[r.jsx("input",{type:"checkbox",checked:u,onChange:c=>p(c.target.checked),style:{width:"16px",height:"16px"}}),"Запомнить голос (для будущих сессий)"]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[r.jsx("button",{type:"button",onClick:n,className:"btn-secondary",style:{padding:"0.6rem 1.2rem",borderRadius:"var(--radius-md)"},children:"Отмена"}),r.jsx("button",{type:"submit",className:"btn-primary",style:{padding:"0.6rem 1.2rem",borderRadius:"var(--radius-md)"},children:"Объединить"})]})]})]})})};function Yc({sessionId:e,speakers:t,onRename:n,onMergeSpeakers:i,onPlaySample:l,onStopSample:o,playingSpeakerId:s}){const[a,d]=S.useState(null),[u,p]=S.useState(!1),[h,m]=S.useState(new Set),[c,x]=S.useState(!1),y=(z,P)=>{a&&(n(a.localId,z,P),d(null))},v=z=>{const P=new Set(h);P.has(z)?P.delete(z):P.add(z),m(P)},w=()=>{h.size>=2&&x(!0)},W=(z,P,L,A)=>{if(i){const R=Array.from(h);i(R,z,P,L,A)}x(!1),p(!1),m(new Set)},E=()=>{p(!1),m(new Set)},Y=[...t].sort((z,P)=>z.isMic&&!P.isMic?-1:!z.isMic&&P.isMic?1:z.localId-P.localId),k=Y.filter(z=>!z.isMic).length>=2,D=Y.filter(z=>h.has(z.localId));return t.length===0?r.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:[r.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",style:{marginBottom:"1rem",opacity:.5},children:[r.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"9",cy:"7",r:"4"}),r.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),r.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),r.jsx("p",{children:"Нет данных о спикерах"}),r.jsx("p",{style:{fontSize:"0.85rem",marginTop:"0.5rem"},children:"Спикеры появятся после транскрипции с диаризацией"})]}):r.jsxs("div",{style:{padding:"1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-secondary)",fontSize:"0.85rem"},children:[r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"9",cy:"7",r:"4"}),r.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),r.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),u?r.jsxs("span",{children:["Выбрано: ",h.size]}):r.jsxs("span",{children:[t.length," ",t.length===1?"спикер":"спикеров"]})]}),k&&i&&r.jsx("button",{onClick:u?E:()=>p(!0),style:{padding:"0.4rem 0.8rem",fontSize:"0.8rem",borderRadius:"var(--radius-md)",border:"1px solid var(--border)",backgroundColor:u?"var(--danger)":"var(--surface-strong)",color:u?"white":"var(--text-secondary)",cursor:"pointer"},children:u?"Отмена":"Объединить"})]}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Y.map(z=>{const P=bc(z.localId,z.isMic),L=h.has(z.localId),A=u&&!z.isMic;return r.jsxs("div",{onClick:A?()=>v(z.localId):void 0,style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",backgroundColor:L?"rgba(156, 39, 176, 0.15)":"var(--surface-strong)",borderRadius:"var(--radius-md)",border:L?"2px solid var(--primary)":"1px solid var(--border)",cursor:A?"pointer":"default",transition:"all 0.15s ease"},children:[u&&r.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"4px",border:z.isMic?"2px solid var(--border)":L?"2px solid var(--primary)":"2px solid var(--text-muted)",backgroundColor:L?"var(--primary)":"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,opacity:z.isMic?.3:1},children:L&&r.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"white",children:r.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})}),r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:P,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"1rem",flexShrink:0},children:z.displayName.charAt(0).toUpperCase()}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[r.jsx("span",{style:{fontWeight:600,color:"var(--text-primary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:z.displayName}),z.isRecognized&&r.jsx("span",{style:{fontSize:"0.7rem",padding:"2px 6px",borderRadius:"999px",backgroundColor:"rgba(76, 175, 80, 0.15)",color:"#4caf50"},children:"Известен"})]}),r.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-muted)",display:"flex",gap:"0.75rem"},children:[r.jsxs("span",{children:[z.segmentCount," фраз"]}),r.jsx("span",{children:Qr(z.totalDuration)})]})]}),!u&&r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[l&&z.hasSample&&r.jsx("button",{onClick:()=>{s===z.localId&&o?o():l(z.localId)},className:"btn-icon btn-icon-sm",title:s===z.localId?"Остановить":"Прослушать голос",style:{width:"32px",height:"32px",color:s===z.localId?"var(--primary)":void 0},children:s===z.localId?r.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:[r.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),r.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}):r.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M8 5v14l11-7z"})})}),!z.isMic&&r.jsx("button",{onClick:()=>d(z),className:"btn-icon btn-icon-sm",title:"Переименовать",style:{width:"32px",height:"32px"},children:r.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),r.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]})]},z.localId)})}),u&&h.size>=2&&r.jsx("div",{style:{marginTop:"1rem"},children:r.jsxs("button",{onClick:w,className:"btn-primary",style:{width:"100%",padding:"0.75rem",borderRadius:"var(--radius-md)",fontSize:"0.95rem"},children:["Объединить (",h.size,")"]})}),a&&r.jsx(vc,{currentName:a.displayName,isRecognized:a.isRecognized,onSave:y,onClose:()=>d(null)}),c&&D.length>=2&&r.jsx(kc,{speakers:D,onMerge:W,onClose:()=>x(!1)})]})}const pt=e=>{if(!isFinite(e)||Number.isNaN(e))return"0:00";const t=Math.floor(e/60),n=Math.floor(e%60);return`${t}:${n.toString().padStart(2,"0")}`},Xc=({currentTime:e,totalDuration:t,isPlaying:n,playbackOffset:i=0,onSeek:l,waveformData:o,loading:s,error:a,channelLabels:d=["Mic","Sys"]})=>{const u=S.useRef(null),p=S.useRef(null),[h,m]=S.useState(null),[c,x]=S.useState({width:0,height:0}),y=Math.max(0,i+e),v=t>0?y/t*100:0,w=Math.max(0,Math.min(100,v)),W=h!==null&&t>0?h/t*100:null,E=W!==null?Math.max(0,Math.min(100,W)):null;S.useEffect(()=>{const D=u.current;if(!D)return;const z=new ResizeObserver(P=>{const L=P[0];x({width:L.contentRect.width,height:L.contentRect.height})});return z.observe(D),()=>z.disconnect()},[]),S.useEffect(()=>{const D=p.current,z=u.current,P=o;if(!D||!z||c.width===0||c.height===0)return;const L=D.getContext("2d");if(!L)return;const A=window.devicePixelRatio||1;D.width=c.width*A,D.height=c.height*A,D.style.width=`${c.width}px`,D.style.height=`${c.height}px`,L.resetTransform(),L.scale(A,A);const R=c.width,j=c.height,I=P?.channelCount||2,C=8,B=(j-C*(I-1))/I;L.fillStyle="rgba(255, 255, 255, 0.03)",L.fillRect(0,0,R,j);const V=w/100*R;if(P){const H=P.sampleCount,F=R/H;for(let g=0;g<I;g++){const Z=g*(B+C),ne=Z+B/2,f=P.peaks[g],ce=P.rms[g];for(let oe=0;oe<H;oe++){const te=oe*F,fe=te<V,de=f[oe],xe=ce[oe],pe=de*(B*.9),Te=xe*(B*.9);if(fe){const Se=260-de*90,Be=.3+de*.2;L.fillStyle=`hsla(${Se}, 70%, 55%, ${Be})`}else L.fillStyle=`rgba(255, 255, 255, ${.08+de*.08})`;if(L.fillRect(te+.5,ne-pe/2,Math.max(1,F-1),pe),fe){const Se=260-xe*90;L.fillStyle=`hsl(${Se}, 80%, 60%)`}else L.fillStyle=`rgba(255, 255, 255, ${.15+xe*.2})`;L.fillRect(te+.5,ne-Te/2,Math.max(1,F-1),Te)}L.strokeStyle="rgba(255, 255, 255, 0.1)",L.lineWidth=1,L.beginPath(),L.moveTo(0,ne),L.lineTo(R,ne),L.stroke(),L.strokeStyle="rgba(255, 255, 255, 0.04)",L.lineWidth=1,L.strokeRect(.5,Z+.5,R-1,B-1)}}else for(let F=0;F<I;F++){const Z=F*(B+C)+B/2;for(let ne=0;ne<100;ne++){const f=ne/100*R,ce=f<V,oe=.2+.4*Math.sin((ne+F*7)*.3)*Math.sin(ne*.1),te=B*oe;if(ce){const fe=260-oe*90;L.fillStyle=`hsl(${fe}, 75%, 55%)`}else L.fillStyle=`rgba(255, 255, 255, ${.1+oe*.15})`;L.fillRect(f+1,Z-te/2,R/100-2,te)}L.strokeStyle="rgba(255, 255, 255, 0.1)",L.lineWidth=1,L.beginPath(),L.moveTo(0,Z),L.lineTo(R,Z),L.stroke()}},[o,c.width,c.height,w]);const Y=D=>{const z=u.current;if(!z||t<=0)return;const P=z.getBoundingClientRect(),L=Math.max(0,Math.min(1,(D-P.left)/P.width));m(L*t)},G=D=>{const z=u.current;if(!z||t<=0)return;const P=z.getBoundingClientRect(),L=Math.max(0,Math.min(1,(D-P.left)/P.width));l(L*t)},k=(()=>{const D=[],z=o?.channelCount||2;for(let P=0;P<z;P++)D.push(d[P]||`Ch ${P+1}`);return D})();return r.jsxs("div",{className:"glass-surface",style:{padding:"0.75rem 1rem",borderRadius:"var(--radius-lg)",background:"var(--glass-bg)",backdropFilter:"blur(var(--glass-blur)) saturate(var(--glass-saturation))",WebkitBackdropFilter:"blur(var(--glass-blur)) saturate(var(--glass-saturation))",border:"1px solid var(--glass-border)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.6rem",fontSize:"0.8rem",fontFamily:"SF Mono, Menlo, monospace",color:"var(--text-muted)"},children:[r.jsx("span",{children:pt(y)}),r.jsx("span",{style:{color:"var(--accent)"},children:i>0?`+${pt(i)}`:""}),r.jsx("span",{children:pt(t)})]}),r.jsxs("div",{ref:u,style:{position:"relative",height:"140px",borderRadius:"var(--radius-md)",overflow:"hidden",cursor:"pointer",userSelect:"none",border:"1px solid var(--glass-border-subtle)",background:"var(--glass-bg)"},onMouseMove:D=>Y(D.clientX),onMouseLeave:()=>m(null),onClick:D=>G(D.clientX),children:[r.jsx("canvas",{ref:p,style:{width:"100%",height:"100%",display:"block"}}),k.map((D,z)=>{const P=o?.channelCount||2,A=((c.height||140)-8*(P-1))/P,R=z*(A+8)+6;return r.jsx("span",{style:{position:"absolute",left:"8px",top:`${R}px`,color:"var(--text-muted)",fontSize:"0.7rem",fontWeight:"var(--font-weight-medium)",textTransform:"uppercase",letterSpacing:"0.03em"},children:D},D+z)}),r.jsx("div",{style:{position:"absolute",top:0,bottom:0,width:"2px",left:0,transform:`translateX(${w}%)`,willChange:"transform",background:"white",boxShadow:"0 0 12px rgba(255, 255, 255, 0.9)",transition:n?"none":"transform 0.1s ease",pointerEvents:"none"}}),E!==null&&r.jsxs("div",{style:{position:"absolute",top:0,bottom:0,left:`${E}%`,pointerEvents:"none"},children:[r.jsx("div",{style:{position:"absolute",top:0,bottom:0,width:"1px",background:"rgba(255, 255, 255, 0.4)"}}),r.jsx("div",{style:{position:"absolute",top:"6px",left:"6px",padding:"3px 8px",background:"var(--glass-bg-elevated)",backdropFilter:"blur(10px)",borderRadius:"var(--radius-xs)",border:"1px solid var(--glass-border)",color:"var(--text-primary)",fontSize:"0.7rem",fontFamily:"SF Mono, monospace",whiteSpace:"nowrap"},children:pt(h||0)})]}),s&&r.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(4px)",color:"var(--text-secondary)",fontSize:"0.85rem"},children:[r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{animation:"spin 1s linear infinite",marginRight:"0.5rem"},children:r.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"Загружаем аудио..."]}),a&&r.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(239, 68, 68, 0.1)",color:"var(--danger)",fontSize:"0.8rem",textAlign:"center",padding:"0 1rem"},children:a})]})]})},Jr=()=>r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M4 7h16M4 12h10M4 17h14"})}),wc=()=>r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),Zr=()=>r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"9",cy:"7",r:"4"}),r.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),r.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),ei=()=>r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),sr=()=>r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),r.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),r.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),jc=()=>r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("polyline",{points:"12 6 12 12 16 14"})]}),Sc=()=>r.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),r.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),r.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Cc=()=>r.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"20 6 9 17 4 12"})}),Ic=()=>r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Tc=()=>r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),r.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),r.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),r.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}),Qc=({dialogue:e,totalDuration:t,isCompact:n=!1})=>{const i=S.useMemo(()=>{if(!e||e.length===0)return{totalWords:0,totalSegments:0,speakersCount:0,speakers:[],avgSegmentLength:0,avgWordsPerMinute:0,lowConfidenceWords:0,avgConfidence:0};let l=0,o=0,s=0,a=0;const d=new Map;for(const m of e){const c=m.speaker||"unknown",x=(m.end||0)-(m.start||0);if(m.words&&m.words.length>0){l+=m.words.length;for(const v of m.words)v.p&&v.p>0&&(s+=v.p,a++,v.p<.7&&o++)}else if(m.text){const v=m.text.trim().split(/\s+/).filter(w=>w.length>0).length;l+=v}const y=d.get(c)||{words:0,segments:0,duration:0};y.segments++,y.duration+=x,m.words&&m.words.length>0?y.words+=m.words.length:m.text&&(y.words+=m.text.trim().split(/\s+/).filter(v=>v.length>0).length),d.set(c,y)}const u=Array.from(d.entries()).map(([m,c])=>({name:Mc(m),...c}));u.sort((m,c)=>c.words-m.words);const p=t/1e9/60,h=p>0?Math.round(l/p):0;return{totalWords:l,totalSegments:e.length,speakersCount:d.size,speakers:u,avgSegmentLength:e.length>0?Math.round(l/e.length):0,avgWordsPerMinute:h,lowConfidenceWords:o,avgConfidence:a>0?s/a:0}},[e,t]);return n?r.jsx(zc,{stats:i}):r.jsx(Ec,{stats:i,totalDuration:t})},zc=({stats:e})=>e.totalWords===0?null:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",fontSize:"0.8rem",color:"var(--text-muted)"},children:[r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},title:"Количество слов",children:[r.jsx(Jr,{})," ",e.totalWords.toLocaleString()]}),r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},title:"Количество спикеров",children:[r.jsx(Zr,{})," ",e.speakersCount]}),r.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},title:"Слов в минуту",children:[r.jsx(ei,{})," ",e.avgWordsPerMinute,"/мин"]})]}),Ec=({stats:e,totalDuration:t})=>{if(e.totalWords===0)return r.jsxs("div",{style:{padding:"3rem 1.5rem",textAlign:"center",color:"var(--text-muted)"},children:[r.jsx("div",{style:{marginBottom:"0.5rem",opacity:.5},children:r.jsx(sr,{})}),r.jsx("div",{children:"Нет данных для отображения"})]});const n=l=>{const o=Math.floor(l/1e9),s=o%60,a=Math.floor(o/60)%60,d=Math.floor(o/3600);return d>0?`${d}ч ${a}м ${s}с`:`${a}м ${s}с`},i=[{icon:r.jsx(jc,{}),label:"Длительность",value:n(t)},{icon:r.jsx(Jr,{}),label:"Всего слов",value:e.totalWords.toLocaleString()},{icon:r.jsx(wc,{}),label:"Реплик",value:e.totalSegments.toString()},{icon:r.jsx(Zr,{}),label:"Спикеров",value:e.speakersCount.toString()},{icon:r.jsx(ei,{}),label:"Темп речи",value:`${e.avgWordsPerMinute} сл/мин`},{icon:r.jsx(sr,{}),label:"Ср. длина реплики",value:`${e.avgSegmentLength} сл.`}];return r.jsxs("div",{style:{padding:"1rem 1.5rem"},children:[r.jsx("div",{style:{marginBottom:"1.5rem"},children:i.map((l,o)=>r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 0",borderBottom:o<i.length-1?"1px solid var(--glass-border-subtle)":"none"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",color:"var(--text-muted)",fontSize:"0.85rem"},children:[r.jsx("span",{style:{opacity:.5},children:l.icon}),l.label]}),r.jsx("div",{style:{fontSize:"0.85rem",fontWeight:500,color:"var(--text-muted)",fontVariantNumeric:"tabular-nums"},children:l.value})]},o))}),e.speakers.length>0&&r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginBottom:"12px",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:500},children:"Активность спикеров"}),e.speakers.map((l,o)=>{const s=e.totalWords>0?Math.round(l.words/e.totalWords*100):0,a=l.name==="Вы"?r.jsx(Tc,{}):r.jsx(Ic,{});return r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px 0"},children:[r.jsx("span",{style:{opacity:.5,color:"var(--text-muted)",display:"flex",alignItems:"center"},children:a}),r.jsx("span",{style:{minWidth:"100px",fontSize:"0.85rem",color:"var(--text-muted)",fontWeight:500},children:l.name}),r.jsx("div",{style:{flex:1,height:"4px",backgroundColor:"var(--glass-bg)",borderRadius:"2px",overflow:"hidden"},children:r.jsx("div",{style:{width:`${s}%`,height:"100%",background:`linear-gradient(90deg, ${Lc(o)}, ${Pc(o)})`,borderRadius:"2px",transition:"width 0.5s ease"}})}),r.jsxs("span",{style:{minWidth:"90px",fontSize:"0.85rem",color:"var(--text-muted)",textAlign:"right",fontVariantNumeric:"tabular-nums"},children:[l.words," сл. (",s,"%)"]})]},o)})]}),e.avgConfidence>0&&r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:"var(--glass-bg)",borderRadius:"var(--radius-md)",fontSize:"0.9rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-secondary)"},children:[e.avgConfidence>=.8?r.jsx("span",{style:{color:"var(--success)"},children:r.jsx(Cc,{})}):r.jsx("span",{style:{color:"var(--warning)"},children:r.jsx(Sc,{})}),"Уверенность распознавания"]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsxs("span",{style:{fontWeight:600,color:Ac(e.avgConfidence)},children:[Math.round(e.avgConfidence*100),"%"]}),e.lowConfidenceWords>0&&r.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:["(",e.lowConfidenceWords," неуверенных)"]})]})]})]})};function Mc(e){return e==="mic"?"Вы":e==="sys"?"Собеседник":e.startsWith("Speaker ")?`Собеседник ${parseInt(e.replace("Speaker ",""),10)+1}`:e}function Lc(e){const t=["#8b5cf6","#4de1c1","#3b82f6","#f59e0b","#ec4899","#10b981"];return t[e%t.length]}function Pc(e){const t=["#a78bfa","#6ee7c7","#60a5fa","#fbbf24","#f472b6","#34d399"];return t[e%t.length]}function Ac(e){return e>=.8?"var(--success)":e>=.6?"var(--warning)":"var(--danger)"}const Rc=[{category:"Запись",items:[{keys:["⌘","N"],description:"Начать новую запись"},{keys:["⌘","."],description:"Остановить запись"},{keys:["Space"],description:"Воспроизвести/Пауза (когда не в поле ввода)"}]},{category:"Файлы",items:[{keys:["⌘","O"],description:"Импорт аудиофайла"},{keys:["⌘","E"],description:"Экспорт транскрипции"},{keys:["⌘","⇧","O"],description:"Открыть папку с записями"},{keys:["⌘","⇧","C"],description:"Копировать транскрипцию"}]},{category:"Сессия",items:[{keys:["⌘","R"],description:"Перетранскрибировать сессию"},{keys:["⌘","S"],description:"Создать AI-сводку"},{keys:["⌘","⌫"],description:"Удалить сессию"}]},{category:"Приложение",items:[{keys:["⌘",","],description:"Открыть настройки"},{keys:["F1"],description:"Справка"},{keys:["⌘","/"],description:"Горячие клавиши"},{keys:["⌘","Q"],description:"Выход из приложения"}]},{category:"Навигация",items:[{keys:["⌘","+"],description:"Увеличить масштаб"},{keys:["⌘","-"],description:"Уменьшить масштаб"},{keys:["⌘","0"],description:"Сбросить масштаб"},{keys:["⌘","F"],description:"Полноэкранный режим"}]}],Jc=({isOpen:e,onClose:t,initialTab:n="guide",appVersion:i="2.0.2"})=>{const[l,o]=S.useState(n);if(!e)return null;const s=p=>({padding:"0.6rem 1.2rem",background:l===p?"var(--primary)":"transparent",color:l===p?"white":"var(--text-secondary)",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer",fontSize:"0.9rem",fontWeight:500,transition:"all 0.2s ease"}),a=()=>r.jsxs("div",{style:{lineHeight:1.7},children:[r.jsxs("section",{style:{marginBottom:"2rem"},children:[r.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{fontSize:"1.3rem"},children:"🎙️"}),"Быстрый старт"]}),r.jsxs("ol",{style:{paddingLeft:"1.5rem",color:"var(--text-secondary)",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Начните запись"})," — нажмите большую красную кнопку или ",r.jsx("kbd",{children:"⌘N"})]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Говорите"})," — AIWisper автоматически распознаёт речь в реальном времени"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Остановите запись"})," — нажмите кнопку снова или ",r.jsx("kbd",{children:"⌘."})]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Просмотрите результат"})," — транскрипция появится в правой панели"]})]})]}),r.jsxs("section",{style:{marginBottom:"2rem"},children:[r.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{fontSize:"1.3rem"},children:"🎧"}),"Режимы записи"]}),r.jsxs("div",{style:{display:"grid",gap:"1rem",color:"var(--text-secondary)"},children:[r.jsxs("div",{style:{padding:"1rem",background:"var(--glass-bg)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},children:[r.jsx("strong",{style:{color:"var(--text-primary)"},children:"Микрофон + Системный звук"}),r.jsx("p",{style:{margin:"0.5rem 0 0",fontSize:"0.9rem"},children:"Записывает вашу речь и звук из приложений (Zoom, Meet, Teams). Идеально для записи онлайн-встреч с автоматическим разделением спикеров."})]}),r.jsxs("div",{style:{padding:"1rem",background:"var(--glass-bg)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},children:[r.jsx("strong",{style:{color:"var(--text-primary)"},children:"Только микрофон"}),r.jsx("p",{style:{margin:"0.5rem 0 0",fontSize:"0.9rem"},children:"Записывает только вашу речь. Подходит для диктовки заметок, голосовых сообщений или записи в тихом помещении."})]})]})]}),r.jsxs("section",{style:{marginBottom:"2rem"},children:[r.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{fontSize:"1.3rem"},children:"🤖"}),"AI-функции"]}),r.jsxs("div",{style:{display:"grid",gap:"0.75rem",color:"var(--text-secondary)"},children:[r.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[r.jsx("span",{style:{background:"var(--primary)",color:"white",padding:"0.2rem 0.5rem",borderRadius:"var(--radius-sm)",fontSize:"0.75rem",fontWeight:600},children:"Сводка"}),r.jsx("span",{children:"Автоматическое создание краткого содержания записи с ключевыми моментами"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[r.jsx("span",{style:{background:"var(--success)",color:"white",padding:"0.2rem 0.5rem",borderRadius:"var(--radius-sm)",fontSize:"0.75rem",fontWeight:600},children:"Диаризация"}),r.jsx("span",{children:"Автоматическое определение говорящих (кто что сказал)"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[r.jsx("span",{style:{background:"var(--warning)",color:"white",padding:"0.2rem 0.5rem",borderRadius:"var(--radius-sm)",fontSize:"0.75rem",fontWeight:600},children:"Улучшение"}),r.jsx("span",{children:"AI-коррекция текста: исправление ошибок, пунктуация, форматирование"})]})]})]}),r.jsxs("section",{style:{marginBottom:"2rem"},children:[r.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{fontSize:"1.3rem"},children:"💡"}),"Рекомендации"]}),r.jsxs("ul",{style:{paddingLeft:"1.5rem",color:"var(--text-secondary)",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[r.jsx("li",{children:"Используйте качественный микрофон для лучшего распознавания"}),r.jsx("li",{children:"Говорите чётко и не слишком быстро"}),r.jsx("li",{children:"Для длинных записей включите диаризацию в настройках"}),r.jsxs("li",{children:["Модель ",r.jsx("strong",{children:"large-v3-turbo"})," даёт лучшее качество для русского языка"]}),r.jsxs("li",{children:["Для быстрой работы на слабых устройствах используйте модель ",r.jsx("strong",{children:"base"})]}),r.jsx("li",{children:"Drag & Drop аудиофайлы прямо в окно приложения для импорта"})]})]}),r.jsxs("section",{children:[r.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:600,marginBottom:"1rem",color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("span",{style:{fontSize:"1.3rem"},children:"📤"}),"Экспорт"]}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Доступные форматы экспорта транскрипции:"}),r.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:["TXT","SRT","VTT","JSON","Буфер обмена"].map(p=>r.jsx("span",{style:{padding:"0.3rem 0.75rem",background:"var(--glass-bg)",border:"1px solid var(--glass-border)",borderRadius:"var(--radius-sm)",fontSize:"0.85rem",color:"var(--text-secondary)"},children:p},p))})]})]}),d=()=>r.jsxs("div",{children:[Rc.map(p=>r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("h4",{style:{fontSize:"0.85rem",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:p.category}),r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:p.items.map((h,m)=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.6rem 0.75rem",background:"var(--glass-bg)",borderRadius:"var(--radius-sm)",border:"1px solid var(--glass-border)"},children:[r.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:h.description}),r.jsx("div",{style:{display:"flex",gap:"0.25rem"},children:h.keys.map((c,x)=>r.jsx("kbd",{style:{padding:"0.25rem 0.5rem",background:"var(--surface-strong)",border:"1px solid var(--border)",borderRadius:"4px",fontSize:"0.8rem",fontFamily:"SF Mono, Monaco, monospace",color:"var(--text-primary)",minWidth:"1.5rem",textAlign:"center",boxShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:c},x))})]},m))})]},p.category)),r.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-muted)",marginTop:"1rem",fontStyle:"italic"},children:"На Windows/Linux используйте Ctrl вместо ⌘"})]}),u=()=>r.jsxs("div",{style:{textAlign:"center",padding:"1rem 0"},children:[r.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 1.5rem",background:"linear-gradient(135deg, var(--primary) 0%, #6366f1 100%)",borderRadius:"20px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 32px rgba(99, 102, 241, 0.3)"},children:r.jsx("span",{style:{fontSize:"2.5rem"},children:"🎙️"})}),r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"0.5rem",color:"var(--text-primary)"},children:"AIWisper"}),r.jsxs("p",{style:{color:"var(--text-muted)",marginBottom:"1.5rem",fontSize:"0.95rem"},children:["Версия ",i]}),r.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"2rem",lineHeight:1.6,maxWidth:"400px",margin:"0 auto 2rem"},children:"Интеллектуальное приложение для транскрипции речи с поддержкой распознавания говорящих, AI-сводок и экспорта в различные форматы."}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[r.jsxs("div",{style:{padding:"1rem",background:"var(--glass-bg)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},children:[r.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"0.5rem"},children:"🚀"}),r.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Whisper AI"})]}),r.jsxs("div",{style:{padding:"1rem",background:"var(--glass-bg)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},children:[r.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"0.5rem"},children:"🍎"}),r.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"macOS Native"})]}),r.jsxs("div",{style:{padding:"1rem",background:"var(--glass-bg)",borderRadius:"var(--radius-md)",border:"1px solid var(--glass-border)"},children:[r.jsx("div",{style:{fontSize:"1.5rem",marginBottom:"0.5rem"},children:"🔒"}),r.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Локальная обработка"})]})]}),r.jsxs("div",{style:{borderTop:"1px solid var(--glass-border)",paddingTop:"1.5rem",color:"var(--text-muted)",fontSize:"0.85rem"},children:[r.jsx("p",{style:{marginBottom:"0.5rem"},children:"Разработано с ❤️ командой AIWisper"}),r.jsx("p",{children:"© 2024-2025 AIWisper. Все права защищены."})]})]});return r.jsx("div",{className:"animate-scale-in",style:{position:"fixed",inset:0,zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)"},onClick:t,children:r.jsxs("div",{style:{background:"var(--glass-bg-elevated)",backdropFilter:"blur(var(--glass-blur)) saturate(var(--glass-saturation))",WebkitBackdropFilter:"blur(var(--glass-blur)) saturate(var(--glass-saturation))",borderRadius:"var(--radius-xl)",width:"640px",maxHeight:"85vh",boxShadow:"var(--shadow-elevated)",border:"1px solid var(--glass-border)",display:"flex",flexDirection:"column",overflow:"hidden"},onClick:p=>p.stopPropagation(),children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid var(--glass-border-subtle)",flexShrink:0},children:[r.jsx("h2",{style:{margin:0,fontSize:"1.2rem",fontWeight:"var(--font-weight-bold)"},children:"Справка"}),r.jsx("button",{className:"btn-icon",onClick:t,style:{width:"32px",height:"32px"},children:r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",padding:"0 1.5rem",paddingTop:"1rem",flexShrink:0},children:[r.jsx("button",{style:s("guide"),onClick:()=>o("guide"),children:"📖 Руководство"}),r.jsx("button",{style:s("shortcuts"),onClick:()=>o("shortcuts"),children:"⌨️ Горячие клавиши"}),r.jsx("button",{style:s("about"),onClick:()=>o("about"),children:"ℹ️ О программе"})]}),r.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem"},children:[l==="guide"&&a(),l==="shortcuts"&&d(),l==="about"&&u()]}),r.jsx("div",{style:{textAlign:"right",padding:"1rem 1.5rem",borderTop:"1px solid var(--glass-border-subtle)",flexShrink:0},children:r.jsx("button",{className:"btn-capsule btn-capsule-primary",onClick:t,style:{padding:"0.65rem 1.5rem"},children:"Закрыть"})})]})})},Bc=({languages:e})=>e.includes("ru")&&e.length===1?r.jsx("span",{title:"Русский",children:"🇷🇺"}):e.includes("en")&&e.length===1?r.jsx("span",{title:"English",children:"🇬🇧"}):r.jsx("span",{title:"Мультиязычная",children:"🌍"}),Dc=({status:e,progress:t,requiresPython:n})=>{const i={fontSize:"0.75rem",padding:"0.15rem 0.5rem",borderRadius:"var(--radius-capsule)",display:"inline-flex",alignItems:"center",gap:"0.25rem"};switch(e){case"active":return r.jsxs("span",{style:{...i,background:"rgba(52, 211, 153, 0.15)",color:"var(--success)",border:"1px solid rgba(52, 211, 153, 0.3)"},children:[r.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"var(--success)"}}),"Активна"]});case"downloaded":return n?r.jsx("span",{style:{...i,background:"rgba(139, 92, 246, 0.15)",color:"var(--primary-light)",border:"1px solid rgba(139, 92, 246, 0.3)"},children:"Онлайн"}):r.jsx("span",{style:{...i,background:"rgba(96, 165, 250, 0.15)",color:"#60a5fa",border:"1px solid rgba(96, 165, 250, 0.3)"},children:"Готова"});case"downloading":return r.jsxs("span",{style:{...i,background:"rgba(251, 191, 36, 0.15)",color:"var(--warning)",border:"1px solid rgba(251, 191, 36, 0.3)"},children:[t?.toFixed(0),"%"]});case"error":return r.jsx("span",{style:{...i,background:"rgba(248, 113, 113, 0.15)",color:"var(--danger)",border:"1px solid rgba(248, 113, 113, 0.3)"},children:"Ошибка"});default:return null}},_c=({model:e,isActive:t,onDownload:n,onCancelDownload:i,onDelete:l,onSetActive:o})=>{const s=e.status==="downloaded"||e.status==="active",a=e.status==="downloading";return r.jsxs("div",{style:{background:t?"rgba(52, 211, 153, 0.08)":"var(--glass-bg)",borderRadius:"var(--radius-md)",padding:"1rem",marginBottom:"0.75rem",border:t?"1px solid rgba(52, 211, 153, 0.3)":"1px solid var(--glass-border-subtle)",transition:"all 0.15s ease"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",minWidth:0},children:[r.jsx(Bc,{languages:e.languages}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",minWidth:0},children:[r.jsx("span",{style:{fontWeight:"var(--font-weight-semibold)",fontSize:"0.95rem",color:"var(--text-primary)",whiteSpace:"nowrap"},children:e.name}),r.jsx(ht,{title:e.name,maxWidth:480,children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[r.jsx("div",{style:{color:"rgba(255,255,255,0.8)",lineHeight:1.5},children:e.description}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",fontSize:"0.9rem"},children:[r.jsxs("span",{style:{color:"rgba(255,255,255,0.8)"},children:["Размер: ",e.size]}),r.jsxs("span",{style:{color:"rgba(255,255,255,0.8)"},children:["Скорость: ",e.speed]}),e.wer&&r.jsxs("span",{style:{color:"rgba(255,255,255,0.8)"},children:["WER: ",e.wer]}),r.jsxs("span",{style:{color:"rgba(255,255,255,0.8)"},children:["Тип: ",e.type==="ggml"?"Whisper (GGML)":e.type==="onnx"?"GigaAM (ONNX)":"Parakeet (CoreML)"]})]}),e.type==="coreml"&&r.jsx("div",{style:{padding:"8px 10px",borderRadius:"10px",background:"rgba(102, 126, 234, 0.12)",border:"1px solid rgba(102, 126, 234, 0.25)",color:"rgba(255,255,255,0.9)",fontSize:"0.85rem"},children:"Модель скачивается автоматически при первом использовании (~640 MB)"})]})})]}),e.recommended&&r.jsx("span",{style:{background:"linear-gradient(135deg, var(--primary), var(--primary-dark))",color:"white",padding:"0.1rem 0.5rem",borderRadius:"var(--radius-capsule)",fontSize:"0.7rem",fontWeight:"var(--font-weight-semibold)"},children:"Рекомендуется"})]}),r.jsx(Dc,{status:e.status,progress:e.progress,requiresPython:e.requiresPython})]}),r.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginBottom:"0.25rem",display:"flex",gap:"0.5rem",flexWrap:"wrap",alignItems:"center"},children:[r.jsx("span",{children:e.size}),r.jsx("span",{children:"•"}),r.jsx("span",{children:e.engine==="whisper"?"Whisper":e.engine==="gigaam"?"GigaAM":"Parakeet"}),e.wer&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"•"}),r.jsxs("span",{children:["WER: ",e.wer]})]}),e.type==="coreml"&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"•"}),r.jsxs("span",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"0.1rem 0.4rem",borderRadius:"var(--radius-capsule)",fontSize:"0.7rem",fontWeight:"var(--font-weight-semibold)",display:"inline-flex",alignItems:"center",gap:"0.2rem"},children:[r.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"})}),"ANE"]})]})]}),r.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:"0.75rem",lineHeight:1.4},children:[e.speed,e.type==="coreml"&&r.jsx("div",{style:{marginTop:"0.4rem",padding:"0.45rem 0.65rem",background:"rgba(102, 126, 234, 0.1)",borderRadius:"var(--radius-sm)",border:"1px solid rgba(102, 126, 234, 0.2)",fontSize:"0.78rem",color:"var(--text-secondary)"},children:"💡 Модель скачивается автоматически при первом использовании (~640 MB)"})]}),a&&r.jsx("div",{style:{marginBottom:"0.75rem"},children:r.jsx("div",{style:{background:"var(--glass-bg-elevated)",borderRadius:"var(--radius-capsule)",height:"6px",overflow:"hidden"},children:r.jsx("div",{style:{background:"linear-gradient(90deg, var(--warning), #f59e0b)",height:"100%",width:`${e.progress||0}%`,transition:"width 0.3s ease",borderRadius:"var(--radius-capsule)"}})})}),e.error&&r.jsx("div",{style:{color:"var(--danger)",fontSize:"0.8rem",marginBottom:"0.5rem",padding:"0.5rem 0.75rem",background:"rgba(248, 113, 113, 0.1)",borderRadius:"var(--radius-sm)",border:"1px solid rgba(248, 113, 113, 0.2)"},children:e.error}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[!s&&!a&&e.type!=="coreml"&&r.jsx("button",{className:"btn-capsule btn-capsule-primary",onClick:n,style:{padding:"0.4rem 0.9rem",fontSize:"0.85rem"},children:"Скачать"}),!s&&!a&&e.type==="coreml"&&r.jsx("button",{className:"btn-capsule btn-capsule-primary",onClick:o,style:{padding:"0.4rem 0.9rem",fontSize:"0.85rem"},children:"Использовать"}),a&&r.jsx("button",{className:"btn-capsule",onClick:i,style:{padding:"0.4rem 0.9rem",fontSize:"0.85rem"},children:"Отмена"}),s&&!t&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"btn-capsule",onClick:o,style:{padding:"0.4rem 0.9rem",fontSize:"0.85rem",background:"rgba(52, 211, 153, 0.15)",border:"1px solid rgba(52, 211, 153, 0.3)",color:"var(--success)"},children:"Использовать"}),!e.requiresPython&&r.jsx("button",{className:"btn-capsule",onClick:l,style:{padding:"0.4rem 0.9rem",fontSize:"0.85rem",background:"transparent",border:"1px solid rgba(248, 113, 113, 0.3)",color:"var(--danger)"},children:"Удалить"})]}),t&&r.jsxs("span",{style:{padding:"0.4rem 0.9rem",color:"var(--success)",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[r.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:r.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Используется"]})]})]})};function Zc({models:e,activeModelId:t,onDownload:n,onCancelDownload:i,onDelete:l,onSetActive:o,onClose:s}){const[a,d]=S.useState("all"),p=[...e.filter(m=>m.engine==="diarization"?!1:a==="downloaded"?m.status==="downloaded"||m.status==="active":a==="ggml"?m.type==="ggml":a==="onnx"?m.type==="onnx":a==="coreml"?m.type==="coreml":!0)].sort((m,c)=>m.recommended&&!c.recommended?-1:!m.recommended&&c.recommended?1:m.sizeBytes-c.sizeBytes),h=[{key:"all",label:"Все"},{key:"downloaded",label:"Скачанные"},{key:"ggml",label:"Whisper"},{key:"onnx",label:"GigaAM"},{key:"coreml",label:"Parakeet"}];return r.jsx("div",{className:"animate-scale-in",style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1100},onClick:s,children:r.jsxs("div",{style:{background:"var(--glass-bg-elevated)",backdropFilter:"blur(var(--glass-blur)) saturate(var(--glass-saturation))",WebkitBackdropFilter:"blur(var(--glass-blur)) saturate(var(--glass-saturation))",borderRadius:"var(--radius-xl)",width:"90%",maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"var(--shadow-elevated)",border:"1px solid var(--glass-border)"},onClick:m=>m.stopPropagation(),children:[r.jsxs("div",{style:{padding:"1.25rem 1.5rem",borderBottom:"1px solid var(--glass-border-subtle)",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[r.jsx("h2",{style:{margin:0,fontSize:"1.2rem",fontWeight:"var(--font-weight-bold)",color:"var(--text-primary)"},children:"Модели транскрипции"}),r.jsx("button",{className:"btn-icon",onClick:s,style:{width:"32px",height:"32px"},children:r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),r.jsx("div",{style:{padding:"0.75rem 1.5rem",borderBottom:"1px solid var(--glass-border-subtle)",flexShrink:0},children:r.jsx("div",{className:"segmented-control",style:{display:"inline-flex"},children:h.map(({key:m,label:c})=>r.jsx("button",{className:`segmented-control-item ${a===m?"active":""}`,onClick:()=>d(m),children:c},m))})}),r.jsx("div",{style:{padding:"1rem 1.5rem",overflowY:"auto",flex:1},children:p.length===0?r.jsx("div",{style:{textAlign:"center",color:"var(--text-muted)",padding:"2rem",fontSize:"0.9rem"},children:"Нет моделей для отображения"}):p.map(m=>r.jsx(_c,{model:m,isActive:m.id===t,onDownload:()=>n(m.id),onCancelDownload:()=>i(m.id),onDelete:()=>l(m.id),onSetActive:()=>o(m.id)},m.id))}),r.jsx("div",{style:{padding:"0.75rem 1.5rem",borderTop:"1px solid var(--glass-border-subtle)",fontSize:"0.8rem",color:"var(--text-muted)",flexShrink:0},children:"Модели хранятся локально. GGML — whisper.cpp, GigaAM — ONNX, Parakeet — CoreML (Apple Neural Engine)."})]})})}const eu=({micLevel:e,sysLevel:t,isActive:n})=>{const[i,l]=S.useState(n),[o,s]=S.useState(!1);return S.useEffect(()=>{if(n)l(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{s(!0)})});else{s(!1);const a=setTimeout(()=>{l(!1)},300);return()=>clearTimeout(a)}},[n]),i?r.jsxs("div",{style:{width:o?"40px":"0px",minWidth:o?"40px":"0px",height:"100%",display:"flex",flexDirection:"row",alignItems:"stretch",gap:"6px",padding:o?"12px 8px":"12px 0",background:"linear-gradient(180deg, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.1) 100%)",borderLeft:o?"1px solid var(--border)":"0px solid transparent",opacity:o?1:0,overflow:"hidden",transition:"width 0.3s cubic-bezier(0.4, 0, 0.2, 1), min-width 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease, padding 0.3s ease, border-left 0.3s ease"},children:[r.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[r.jsx("div",{style:{flex:1,width:"12px",background:"var(--surface-strong)",borderRadius:"6px",position:"relative",overflow:"hidden",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.3)"},children:r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:`${e}%`,background:e>70?"linear-gradient(to top, #ff5722, #ff9800)":"linear-gradient(to top, #4caf50, #8bc34a)",borderRadius:"6px",transition:"height 0.08s ease-out",boxShadow:e>50?"0 0 10px rgba(76, 175, 80, 0.5)":"none"}})}),r.jsx("span",{style:{fontSize:"0.65rem",color:"var(--text-muted)"},children:"🎤"})]}),r.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[r.jsx("div",{style:{flex:1,width:"12px",background:"var(--surface-strong)",borderRadius:"6px",position:"relative",overflow:"hidden",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.3)"},children:r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:`${t}%`,background:t>70?"linear-gradient(to top, #e91e63, #f44336)":"linear-gradient(to top, #2196f3, #03a9f4)",borderRadius:"6px",transition:"height 0.08s ease-out",boxShadow:t>50?"0 0 10px rgba(33, 150, 243, 0.5)":"none"}})}),r.jsx("span",{style:{fontSize:"0.65rem",color:"var(--text-muted)"},children:"🔊"})]})]}):null};export{eu as A,ni as B,Jc as H,Zc as M,Oc as P,Nc as S,Xc as W,$c as a,Vc as b,qc as c,Kc as d,Yc as e,Uc as f,Hc as g,Gc as h,Qc as i,Wc as j,pr as k,ri as u};
